/*! For license information please see worker.495e065d9ade7d5a164b.js.LICENSE.txt */
(()=>{var __webpack_modules__={9669:(e,t,n)=>{e.exports=n(51609)},55448:(e,t,n)=>{"use strict";var r=n(64867),i=n(36026),o=n(4372),u=n(15327),a=n(94097),s=n(84109),c=n(67985),l=n(85061),f=n(77874),h=n(65263);e.exports=function(e){return new Promise((function(t,n){var d,p=e.data,v=e.headers,m=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(p)&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",D=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(g+":"+D)}var w=a(e.baseURL,e.url);function E(){if(b){var r="getAllResponseHeaders"in b?s(b.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),b=null}}if(b.open(e.method.toUpperCase(),u(w,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(E)},b.onabort=function(){b&&(n(l("Request aborted",e,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(l("Network Error",e,null,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var x=(e.withCredentials||c(w))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;x&&(v[e.xsrfHeaderName]=x)}"setRequestHeader"in b&&r.forEach(v,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),m&&"json"!==m&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){b&&(n(!e||e&&e.type?new h("canceled"):e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),p||(p=null),b.send(p)}))}},51609:(e,t,n)=>{"use strict";var r=n(64867),i=n(91849),o=n(30321),u=n(47185),a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(u(t,n))},a}(n(45546));a.Axios=o,a.Cancel=n(65263),a.CancelToken=n(14972),a.isCancel=n(26502),a.VERSION=n(97288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(16268),e.exports=a,e.exports.default=a},65263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},14972:(e,t,n)=>{"use strict";var r=n(65263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},26502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},30321:(e,t,n)=>{"use strict";var r=n(64867),i=n(15327),o=n(80782),u=n(13572),a=n(47185),s=n(54875),c=s.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&s.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var f=[u,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(e){p(e);break}}try{o=u(h)}catch(e){return Promise.reject(e)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},80782:(e,t,n)=>{"use strict";var r=n(64867);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},94097:(e,t,n)=>{"use strict";var r=n(91793),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},85061:(e,t,n)=>{"use strict";var r=n(80481);e.exports=function(e,t,n,i,o){var u=new Error(e);return r(u,t,n,i,o)}},13572:(e,t,n)=>{"use strict";var r=n(64867),i=n(18527),o=n(26502),u=n(45546),a=n(65263);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||u.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},80481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},47185:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function u(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:u,method:u,data:u,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==s||(n[e]=i)})),n}},36026:(e,t,n)=>{"use strict";var r=n(85061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},18527:(e,t,n)=>{"use strict";var r=n(64867),i=n(45546);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},45546:(e,t,n)=>{"use strict";var r=n(64867),i=n(16016),o=n(80481),u=n(77874),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={transitional:u,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(c=n(55448)),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,u=!n&&"json"===this.responseType;if(u||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(u){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l},77874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},97288:e=>{e.exports={version:"0.26.1"}},91849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},15327:(e,t,n)=>{"use strict";var r=n(64867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var u=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),u.push(i(t)+"="+i(e))})))})),o=u.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,u){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===u&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},91793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},16268:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},67985:(e,t,n)=>{"use strict";var r=n(64867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},16016:(e,t,n)=>{"use strict";var r=n(64867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},84109:(e,t,n)=>{"use strict";var r=n(64867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,u={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(u[t]&&i.indexOf(t)>=0)return;u[t]="set-cookie"===t?(u[t]?u[t]:[]).concat([n]):u[t]?u[t]+", "+n:n}})),u):u}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},54875:(e,t,n)=>{"use strict";var r=n(97288).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,u){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,u)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],u=t[o];if(u){var a=e[o],s=void 0===a||u(a,o,e);if(!0!==s)throw new TypeError("option "+o+" must be "+s)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},64867:(e,t,n)=>{"use strict";var r=n(91849),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function u(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===i.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:u,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:f,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},93324:(e,t,n)=>{"use strict";function r(){return localStorage.getItem("apiKey")}function i(){return!!r()}n.d(t,{O4:()=>r,jm:()=>i})},69365:(e,t,n)=>{"use strict";n.d(t,{V:()=>F});var r=n(65583),i=n(9248),o=n(80230),u=n(29127),a=n(53741),s=n(23071),c=n(79878),l=n(1545),f=n(94975),h=n(34978),d=n(40052),p=n(51313),v=n(83610),m=n(21276),y=n(44459),b=n(72886),g=n(23229),D=n(4671);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var D={};c(D,u,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&r.call(_,u)&&(D=_);var A=g.prototype=y.prototype=Object.create(D);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==w(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=h;return function(o,u){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(w(t)+" is not iterable")}return b.prototype=g,i(A,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(F.prototype),c(F.prototype,a,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(A),c(A,s,"Generator"),c(A,u,(function(){return this})),c(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function C(){var e;return e=E().mark((function e(t,n){var r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return(0,D.sZ)(e)?(0,g.bH)(t,e).then((function(t){return{role:e.role,content:t}})):Promise.resolve(e)})),e.abrupt("return",Promise.all(r));case 2:case"end":return e.stop()}}),e)})),C=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){A(o,r,i,u,a,"next",e)}function a(e){A(o,r,i,u,a,"throw",e)}u(void 0)}))},C.apply(this,arguments)}function F(e,t){if("paused"===e.model)return e;var n=e.outgoingMessageStream.pipe((0,u.U)((function(e){var t;return[e.messages,{role:"assistant",content:null!==(t=e.typingStatus.get("assistant"))&&void 0!==t?t:""}]})),(0,a.x)((function(e,t){var n=x(e,2),r=n[0],i=(n[1],x(t,2)),o=i[0];return i[1],r===o}))),D=function(e){return e.pipe((0,f.h)((function(e){var t=x(e,2),n=t[0];return t[1],n.length>0&&"system"===n[n.length-1].role})))}(n),w=function(e){return e.pipe((0,f.h)((function(e){var t=x(e,2),n=t[0],r=t[1];return n.length>0&&"user"===n[n.length-1].role&&0===r.content.length})))}(n),E=function(e,t,n,u){return t.pipe((5,5e3,function(e){var t=[];return new o.y((function(n){return e.subscribe({next:function(e){var r=Date.now();(t=t.filter((function(e){return r-e<5e3}))).length>=5?n.error(new Error("Rate limit exceeded. Maximum allowed is ".concat(5," calls within ").concat(5e3," milliseconds."))):(t.push(r),n.next(e))},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}),(0,h.w)((function(t){var r=function(e,t){return C.apply(this,arguments)}(e,t);return(0,d.D)(r).pipe((0,p.b)((function(e){return(0,b.Ds)(e,.1,n,1e3,u)})))})),(0,r.B)({connector:function(){return new i.x},resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}))}(t,(0,s.T)(w,D).pipe((0,u.U)((function(e){var t=x(e,2),n=t[0];return t[1],n}))),e.model,e.functions).pipe((0,c.K)((function(t){return console.error("Error from before handleGptMessages!",t),(0,m.y7)(e,t),l.E})));return function(e,t,n){t.pipe((0,p.b)((function(t){try{return(0,b.YX)(t)?((0,y.un)(e,"assistant",t.text),l.E):(0,b.fY)(t)?((0,y.bG)(e,"assistant","length"===t.stopReason?t.text+"[terminated due to length]":t.text),l.E):(0,b.yS)(t)?(0,g.EO)(e,t.functionCall)?(0,d.D)((0,g.N3)(e,t.functionCall,n)):l.E:(console.warn("Unknown message type",t),l.E)}catch(e){return console.error("Error during handleGptMessages",e),(0,v._)((function(){return e}))}})),(0,c.K)((function(t){return console.error("Error from handleGptMessages catchError!",t),(0,m.y7)(e,t),l.E}))).subscribe()}(e,E,t),e}},72886:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>h,YX:()=>l,fY:()=>f,yS:()=>c});var r=n(9248),i=n(86515),o=n(26362),u=n(29127),a=n(94975),s=n(40557);function c(e){return"functionCall"in e}function l(e){return"text"in e&&!("stopReason"in e)}function f(e){return"stopReason"in e}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gpt-4",c=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];n=function(e,t){return"gpt-4"===e?"gpt-4-1106-preview":t.length>0&&"gpt-3.5-turbo"===e?"gpt-3.5-turbo-0613":e}(n,l);var f=new r.x,h=new i.X(null),d=new i.X(null);return(0,s.Gj)(e,t,n,c,l,(function(e){return f.next(e)}),(function(e){return h.next({functionCall:e})}),(function(e){return d.next({text:e,stopReason:"stop"})}),(function(e){return d.next({text:e,stopReason:"length"})})).then((function(){f.complete(),h.complete(),d.complete()})).catch((function(e){console.error("Error during chat completion:",e),f.error(e),h.complete()})),(0,o.z)(f.pipe((0,u.U)((function(e){return{text:e}}))),h.pipe((0,a.h)((function(e){return null!==e}))),d.pipe((0,a.h)((function(e){return null!==e}))))}},21276:(e,t,n)=>{"use strict";n.d(t,{Mx:()=>B,Xw:()=>S,cm:()=>k,kg:()=>R,qu:()=>T,y7:()=>j});var r=n(9248),i=n(86515),o=n(79878),u=n(40052),a=n(29127),s=n(94975),c=n(56542),l=n(53741),f=n(51313),h=n(44459),d=n(89982),p=n(26130),v=n(64211),m=n(93324);function y(){y=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function b(){}function g(){}function D(){}var w={};c(w,u,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(k([])));x&&x!==n&&r.call(x,u)&&(w=x);var _=D.prototype=b.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==A(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=h;return function(o,u){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(A(t)+" is not iterable")}return g.prototype=D,i(_,"constructor",{value:D,configurable:!0}),i(D,"constructor",{value:g,configurable:!0}),g.displayName=c(D,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,D):(e.__proto__=D,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},C(F.prototype),c(F.prototype,a,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(_),c(_,s,"Generator"),c(_,u,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===A(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return a}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){x(o,r,i,u,a,"next",e)}function a(e){x(o,r,i,u,a,"throw",e)}u(void 0)}))}}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function C(e){return"errorMessage"===e.type}function F(e){var t="An unexpected error occurred";return e instanceof Error?t="Error(".concat(e.name,"): ").concat(e.message).trim():"string"==typeof e?t=e:"number"==typeof e?t="Error code: ".concat(e):"object"===A(e)&&null!==e&&(t=JSON.stringify(e)),{type:"errorMessage",payload:{content:t,role:"system"}}}function O(e){return"newMessage"===e.type}function S(e,t){return P.apply(this,arguments)}function P(){return P=_(y().mark((function e(t,n){var l,f,b,D,x,A,S=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=S.length>2&&void 0!==S[2]?S[2]:"gpt-4",f=S.length>3&&void 0!==S[3]?S[3]:[],(0,m.jm)()||(l="paused"),e.next=5,(0,d.pO)(l,n);case 5:if(b=e.sent,D=b.map((function(e){return e.message})),(0,v.A1)(D)){e.next=9;break}throw new Error("No messages in conversation");case 9:return n=D,x={newMessagesInput:new r.x,outgoingMessageStream:new i.X({messages:n,typingStatus:new Map}),functions:f,model:l},A=x.newMessagesInput.pipe((0,o.K)((function(e){return console.error("Error caught in aggregatedOutput!",e),(0,u.D)([F(e)])})),(0,p.P1)(function(){var e=_(y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O(n)&&!C(n)){e.next=7;break}return e.next=3,(0,d.VO)(l,n.payload,t.lastResult);case 3:return r=e.sent,e.abrupt("return",{lastResult:r,event:{type:"processedMessage",payload:r.message}});case 7:return e.abrupt("return",g(g({},t),{},{event:n}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{lastResult:b[b.length-1],event:null}),(0,a.U)((function(e){return e.event})),(0,s.h)(Boolean),(0,c.R)((function(e,t){if("processedMessage"===t.type){var n=[].concat(function(e){if(Array.isArray(e))return E(e)}(i=e.messages)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||w(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t.payload]),r=t.payload.role;return(0,h.WV)(r)&&e.typingStatus.get(r)?g(g({},e),{},{messages:n,typingStatus:new Map(e.typingStatus).set(r,"")}):g(g({},e),{},"function"===r?{messages:n,typingStatus:new Map(e.typingStatus).set("assistant","")}:{messages:n})}var i;if("typingUpdate"===t.type){var o=new Map(e.typingStatus);return o.set(t.payload.role,t.payload.content),g(g({},e),{},{typingStatus:o})}return e}),x.outgoingMessageStream.value)),(0,p.aw)(A,x.outgoingMessageStream),e.abrupt("return",x);case 14:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function B(e){console.log("TEARDOWNCONVO"),e.newMessagesInput.complete()}function j(e,t){var n=F(t);e.newMessagesInput.next(n)}function k(e,t){e.newMessagesInput.next({type:"newMessage",payload:{content:t,role:"function"}})}function T(e){return e.outgoingMessageStream.value.messages}function R(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?0:T(e).length;return e.outgoingMessageStream.pipe((0,a.U)((function(e){return[e.messages,e.typingStatus]})),(0,l.x)((function(e,t){var n=D(e,2),r=n[0],i=(n[1],D(t,2)),o=i[0];return i[1],r===o})),(0,c.R)((function(e,t){var n=D(e,3),r=(n[0],n[1]),i=(n[2],D(t,2)),o=i[0],u=i[1],a=o.slice(r);return[a,r+a.length,u]}),[[],t,new Map]),(0,f.b)((function(e){var t=D(e,3),n=t[0],r=(t[1],t[2]),i=n.map((function(e){return[e,r]}));return(0,u.D)(i)})))}(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]).pipe((0,a.U)((function(e){var t=D(e,2),n=t[0];return t[1],n})))}},4671:(e,t,n)=>{"use strict";n.d(t,{Au:()=>S,os:()=>C,sZ:()=>F});var r=n(49520),i=n(1545),o=n(19917),u=n(43994),a=n(32817),s=n(23071),c=n(94975),l=n(23229),f=n(99601);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(){p=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",b={};function g(){}function D(){}function w(){}var E={};c(E,u,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&r.call(_,u)&&(E=_);var A=w.prototype=g.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==h(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=d;return function(o,u){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(h(t)+" is not iterable")}return D.prototype=w,i(A,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:D,configurable:!0}),D.displayName=c(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(F.prototype),c(F.prototype,a,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(A),c(A,s,"Generator"),c(A,u,(function(){return this})),c(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function v(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){v(o,r,i,u,a,"next",e)}function a(e){v(o,r,i,u,a,"throw",e)}u(void 0)}))}}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=E(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var C="root";function F(e){return void 0!==e.timestamp}function O(e){return e.parentHash&&e.parentHash!==C}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(H,e);var t,n,r,v,b,g,E,S,P,B,j,k,T,R,I,L,M,N,U,q,K=(U=H,q=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(U);if(q){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,e)});function H(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,H),e=K.call(this,"ConversationDatabase"),(0,f.l)(_(e)),e.messages=e.table("messages"),e.embeddings=e.table("embeddings"),e.summaries=e.table("summaries"),e.summaryEmbeddings=e.table("summaryEmbeddings"),e.pins=e.table("pins"),e.functionResults=e.table("functionResults"),e.functionDependencies=e.table("functionDependencies"),e.functionDependencies2=e.table("functionDependencies2"),e}return t=H,n=[{key:"saveMessage",value:function(e,t){var n,r=this;n=F(e)?Promise.resolve(e):this.transaction("rw",this.messages,(function(){return r.getMessageByHash(e.hash).then((function(t){if(t&&(O(t)||O(e))&&t.parentHash!==e.parentHash)throw new Error("Message with hash: ".concat(e.hash," exists but with a different parent hash."));if(t)return t;if(O(e))return r.getMessageByHash(e.parentHash).then((function(t){if(!t)throw new Error("Parent hash: ".concat(e.parentHash," does not exist in the database."));var n=D(D({},e),{},{timestamp:Date.now()});return r.messages.add(n).then((function(){return n}))}));var n=D(D({},e),{},{timestamp:Date.now()});return r.messages.add(n).then((function(){return n}))}))}));var i=t.messageSummary?this.getSummaryByHash(e.hash).then((function(e){return e||(t.messageSummary?t.messageSummary().then((function(e){return r.saveSummary(e)})):Promise.resolve(void 0))})):Promise.resolve(void 0),o=t.summaryEmbedding?i.then((function(n){if(!n)throw new Error("MessageSummary must be specified when SummaryEmbedding is specified.");return r.getSummaryEmbeddingByHash(e.hash).then((function(e){return e||(t.summaryEmbedding?t.summaryEmbedding(n).then((function(e){return r.saveSummaryEmbedding(e)})):Promise.resolve(void 0))}))})):Promise.resolve(void 0),u=t.messageEmbedding?this.getEmbeddingByHash(e.hash).then((function(e){return e||(t.messageEmbedding?t.messageEmbedding().then((function(e){return r.saveMetadata(e)})):Promise.resolve(void 0))})):Promise.resolve(void 0);return[n,Promise.all([i,o,u]).then((function(e){var n,r,i=(r=3,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return a}}(n,r)||y(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],u=i[1],a={messageEmbedding:i[2],messageSummary:o,summaryEmbedding:u};return function(e,t){for(var n in e)if(!(n in t))throw new Error("Key ".concat(n," is missing in metadata records."))}(t,a),a}))]}},{key:"getSummaryByHash",value:(N=m(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.summaries.get(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"saveSummary",value:(M=m(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transaction("rw",[this.messages,this.summaries],m(p().mark((function e(){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSummaryByHash(t.hash);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n.getMessageByHash(t.hash);case 7:if(e.sent){e.next=9;break}throw new Error("Hash: ".concat(t.hash," does not exist in the database."));case 9:return i=D(D({},t),{},{timestamp:Date.now()}),e.next=12,n.summaries.add(i);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"saveSummaryEmbedding",value:(L=m(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transaction("rw",[this.messages,this.summaryEmbeddings],m(p().mark((function e(){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSummaryEmbeddingByHash(t.hash);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n.getMessageByHash(t.hash);case 7:if(e.sent){e.next=9;break}throw new Error("Hash: ".concat(t.hash," does not exist in the database."));case 9:return i=D(D({},t),{},{timestamp:Date.now()}),e.next=12,n.summaryEmbeddings.add(i);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"saveMetadata",value:(I=m(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transaction("rw",[this.messages,this.embeddings],m(p().mark((function e(){var r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEmbeddingByHash(t.hash);case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n.getMessageByHash(t.hash);case 7:if(e.sent){e.next=9;break}throw new Error("Hash: ".concat(t.hash," does not exist in the database."));case 9:return i=D(D({},t),{},{timestamp:Date.now()}),e.next=12,n.embeddings.add(i);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"getMessageByHash",value:function(e){return this.messages.get(e)}},{key:"getEmbeddingByHash",value:function(e){return this.embeddings.get(e)}},{key:"getSummaryEmbeddingByHash",value:function(e){return this.summaryEmbeddings.get(e)}},{key:"getConversationFromLeaf",value:(R=m(p().mark((function e(t){var n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=t;case 2:if(!r){e.next=12;break}return e.next=5,this.getMessageByHash(r);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("break",12);case 8:n.push(i),r=O(i)?i.parentHash:null,e.next=2;break;case 12:return e.abrupt("return",n.reverse());case 13:case"end":return e.stop()}}),e,this)}))),function(e){return R.apply(this,arguments)})},{key:"getConversationFromLeafMessage",value:(T=m(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[t],O(t)){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,this.getMessageByHash(t.parentHash);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",n);case 8:return e.t0=[],e.t1=d,e.next=12,this.getConversationFromLeafMessage(r);case 12:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=n,e.abrupt("return",e.t0.concat.call(e.t0,e.t3,e.t4));case 16:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"getMessagesFrom",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},c=arguments.length>3?arguments[3]:void 0;return void 0!==c&&n>c?i.E:(0,o.P)((function(){return t.getDirectChildren(e)})).pipe((0,u.z)((function(i){var o=i.map((function(e){return t.getMessagesFrom(e,n+1,r,c)}));return e&&r(e,i)&&o.unshift((0,a.of)({message:e,pathLength:n})),s.T.apply(void 0,d(o))})))}},{key:"getLeafMessagesFrom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getMessagesFrom(e,t,(function(e,t){return 0===t.length}))}},{key:"getDirectChildren",value:function(e){return this.messages.where("parentHash").equals(e?e.hash:C).reverse().sortBy("timestamp")}},{key:"getDirectSiblings",value:function(e){var t;return this.messages.where("parentHash").equals(null!==(t=e.parentHash)&&void 0!==t?t:"").sortBy("timestamp")}},{key:"searchEmbedding",value:(k=m(p().mark((function e(t,n,r,i,o){var a,s,l,f,h=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!i){e.next=16;break}return e.next=4,this.getMessageByHash(i);case 4:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=8;break}e.t0=void 0!==s;case 8:if(!e.t0){e.next=12;break}e.t2=s,e.next=13;break;case 12:e.t2=null;case 13:if(a=e.t2){e.next=16;break}throw new Error("searchembedding message not found! ".concat(i));case 16:return l=this.getMessagesFrom(a,0,(function(){return!0}),o).pipe((0,u.z)((function(e){return("embeddings"===r?h.getEmbeddingByHash(e.message.hash):h.getSummaryEmbeddingByHash(e.message.hash)).then((function(t){return t?{embedding:t,leafPath:e}:null}))})),(0,c.h)(Boolean)),f=[],e.abrupt("return",new Promise((function(e){l.subscribe((function(e){f.push({hash:e.leafPath.message.hash,distance:h.cosineSimilarity(t,e.embedding.embedding)}),f=f.sort((function(e,t){return t.distance-e.distance})).slice(0,n)}),null,(function(){var t=f.map((function(e){return e.hash}));e(t)}))})));case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r,i){return k.apply(this,arguments)})},{key:"cosineSimilarity",value:function(e,t){if(e.length!==t.length)throw new Error("Embeddings have different dimensions");var n=Math.sqrt(e.reduce((function(e,t){return e+Math.pow(t,2)}),0)),r=Math.sqrt(t.reduce((function(e,t){return e+Math.pow(t,2)}),0));return e.reduce((function(e,n,r){return e+n*t[r]}),0)/(n*r)}},{key:"getLeafMessageFromAncestor",value:(j=m(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.messages.where("parentHash").equals(t.hash).sortBy("timestamp");case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",this.getLeafMessageFromAncestor(n[0]));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"addPin",value:(B=m(p().mark((function e(t,n){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.transaction("rw",this.pins,m(p().mark((function e(){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.hasPin(t);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:return i={hash:t.hash,timestamp:Date.now(),version:1,remoteTimestamp:n},e.next=7,r.pins.add(i);case 7:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return B.apply(this,arguments)})},{key:"removePin",value:(P=m(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.transaction("rw",this.pins,m(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.pins.where("hash").equals(t.hash).delete();case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"hasPin",value:(S=m(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pins.get(t.hash);case 2:return n=e.sent,e.abrupt("return",!!n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return S.apply(this,arguments)})},{key:"getPinnedMessages",value:(E=m(p().mark((function e(){var t,n,r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pins.toArray();case 2:return t=e.sent,e.next=5,Promise.all(t.map((function(e){return r.getMessageByHash(e.hash)})));case 5:return n=e.sent,e.abrupt("return",n.filter((function(e){return!!e})).sort((function(e,t){return e.timestamp-t.timestamp})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"saveFunctionResult",value:(g=m(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(D({},t),{},{timestamp:Date.now()}),e.next=3,this.functionResults.add(n);case 3:return r=e.sent,e.abrupt("return",D(D({},n),{},{id:r}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getFunctionResultsByUUID",value:(b=m(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.functionResults.where("uuid").equals(t).sortBy("id");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"saveFunctionDependency",value:(v=m(p().mark((function e(t,n){var r=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transaction("rw",[this.functionResults,this.functionDependencies],m(p().mark((function e(){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={hash:t.hash,timestamp:Date.now(),dependencyName:n},e.next=3,(0,l.qO)(r,t);case 3:if(o=e.sent){e.next=6;break}throw new Error("Cannot add dependency to a non-function message.");case 6:if(!o.some((function(e){return e.completed}))){e.next=8;break}throw new Error("Cannot add dependency to completed function result.");case 8:return e.next=10,r.functionDependencies.add(i);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getFunctionDependenciesByHash",value:(r=m(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.functionDependencies.where("hash").equals(t).toArray());case 1:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}],n&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),H}(r.default)},99601:(e,t,n)=>{"use strict";function r(e){e.version(16).stores({messages:"&hash,timestamp,parentHash,role,content",embeddings:"&hash,timestamp,embedding",summaries:"&hash,timestamp,summary",summaryEmbeddings:"&hash,timestamp,embedding",pins:"&hash,timestamp,version,remoteTimestamp",functionResults:"++id,*uuid,timestamp,functionName,result,completed",functionDependencies:"&hash,timestamp,dependencyName"}),e.version(17).stores({functionDependencies2:"&[hash+dependencyName]"}),e.version(18).upgrade((function(){return e.table("functionDependencies").toArray().then((function(t){return e.table("functionDependencies2").bulkAdd(t)}))})),e.version(19).stores({functionDependencies:null}),e.version(20).stores({functionDependencies:"&[hash+dependencyName]"}).upgrade((function(){return e.table("functionDependencies2").toArray().then((function(t){return e.table("functionDependencies").bulkAdd(t)}))}))}n.d(t,{l:()=>r})},23229:(e,t,n)=>{"use strict";n.d(t,{EO:()=>X,MM:()=>ee,N3:()=>Y,TZ:()=>te,YT:()=>V,bH:()=>ae,ck:()=>P,hp:()=>Z,ng:()=>j,qO:()=>ne,r$:()=>T,vo:()=>ie});var r=n(40557),i=n(21276),o=n(72045),u=n(89982),a=n(40052),s=n(51313),c=n(80230),l=n(1718),f=n(43994),h=n(94975),d=n(30062),p=n(9141),v=n(28400),m=n(64211),y=n(93324),b=n(69365);function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw o}}}}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return a}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function F(){F=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var D={};c(D,u,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(k([])));E&&E!==n&&r.call(E,u)&&(D=E);var x=g.prototype=y.prototype=Object.create(D);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==C(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=h;return function(o,u){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(C(t)+" is not iterable")}return b.prototype=g,i(x,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new A(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},_(x),c(x,s,"Generator"),c(x,u,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function O(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){O(o,r,i,u,a,"next",e)}function a(e){O(o,r,i,u,a,"throw",e)}u(void 0)}))}}var P=["generate_dynamic_function","invoke_dynamic_function","compose_dynamic_functions"],B=["generate_dynamic_function","compose_dynamic_functions"];function j(e){return"function"===e.role}function k(e){return j(e)&&"isComplete"in e&&"results"in e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.length<2)throw new Error("At least two function names are required to generate invocation code.");if(t===e.length-1)return'dependencies["'.concat(e[t],'"](input)');var n=T(e,t+1);return(0===t?"return ":"")+'dependencies["'.concat(e[t],'"](').concat(n,")")}function R(e,t,n){return{name:t,description:n,implementation:function(t,n,i,o,u){var c=t.db,l=function(){var t=S(F().mark((function t(){var a,s,l;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,r.ke)(n);case 2:return a=t.sent,t.next=5,c.searchEmbedding(a,i,e,o,u);case 5:if(0!==(s=t.sent).length){t.next=10;break}return t.abrupt("return",["No results found."]);case 10:return t.next=12,Promise.all(s.map((function(e){return c.getMessageByHash(e)})));case 12:return l=t.sent.filter((function(e){return Boolean(e)})),t.abrupt("return",l.map((function(e){return"".concat(e.hash,": ").concat((60,(t=e.content.replace(/\n/g,"")).length>60?t.substring(0,57)+"...":t));var t})));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,a.D)(l()).pipe((0,s.b)((function(e){return(0,a.D)(e)})))},parameters:[{name:"query",type:"string",description:"The query to convert into an embedding for the search.",required:!0},{name:"limit",type:"number",description:"The maximum number of message results to return.",required:!0},{name:"descendedFromSHA",type:"string",description:"Optional - when provided, only searches messages descended from the message with the provided SHA. Do not include quotes.",required:!1},{name:"maxDepth",type:"number",description:"Optional - when provided, only searches `maxDepth` more levels beneath the specified `descendedFromSHA`.",required:!1}]}}"\nCreate a JavaScript function dynamically and save it to a new message. `functionBody` is a string of code, and `dependencies` is an array of callable function SHAs or function names provided in the API call payload. Return values from other functions are coerced into Observable<string>. Use `RxJS` for RxJS functions and `dependencies` with SHAs or function names to call other functions.\n\nExample:\n###JSON\n{\n  \"functionBody\": \"return RxJS.forkJoin([dependencies['c2931bf195'](input), dependencies['some_function']({someParam: 10, otherParam: \"yes\"})]).pipe(RxJS.map(results => results.join(' and ')));\",\n  \"dependencies\": ['c2931bf195', 'some_function']\n}\n###\n\nIn the above example the `c2931bf195` SHA and the contrived `some_function` function calling mechanism function were specified as dependencies and became available via `dependencies[]()`.\n".trim();var I='\nInvoke a dynamic function using its SHA hash with `invoke_dynamic_function`. Provide `functionHash`, the SHA of the function, and `input`, an array of strings to pass as arguments. The function returns an RxJS Observable<string> with the function\'s output. The function is executed in a Worker, ensuring isolation and asynchronous execution. The observable emits values as they are received from the worker and completes when the function execution is done.\n\nExample:\n###JSON\n{\n  "functionHash": "c2931bf195957b133ebb5e8820df94a20c96887e234d2869ecafad53846501e7",\n  "input": ["sample input"]\n}\n###\n'.trim();function L(e,t,n){return new c.y((function(e){var r=new Worker(window.workerPath);r.postMessage({SET_API_KEY:(0,y.O4)()}),r.addEventListener("message",(function(t){var n=t.data;return"error"===n.status?(e.error(n.error),e.complete(),r.terminate(),void console.log("received error",n)):"complete"===n.status?(e.complete(),void r.terminate()):void e.next("object"===C(n.content)?JSON.stringify(n.content):String(n.content))})),r.addEventListener("error",(function(t){console.log("received error",t),e.error(t.error||t.message),r.terminate()}));var i={functionHash:t,input:n};r.postMessage(i)}))}var M,N,U,q,K,H,z,G,V=[R("embeddings","direct_message_embedding_search","Compares the embedding of the search `query` with the embeddings of the contents of messages using cosine similarity. Returns 'limit' number of closest matching messages."),R("summaryEmbeddings","summary_message_embedding_search","Compares the embedding of the search `query` with the embeddings of the summaries of conversations terminating with potential message results using cosine similarity. Returns 'limit' number of closest matching messages."),{name:"append_user_reply",description:"Appends the provided message content as a user (or overridden `role`) reply to the message specified by `parentHash`.",implementation:(G=S(F().mark((function e(t,n,r,i){var o,a,s,c,l,f,h;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||(r="user"),["user","system","assistant"].includes(r)){e.next=3;break}throw new Error('Invalid role "'.concat(r,'". Must be either "user" or "system" or "assistant".'));case 3:if(o=r,a=[],!i){e.next=14;break}return e.next=8,t.db.getMessageByHash(i);case 8:if(s=e.sent){e.next=11;break}throw new Error("Message with SHA ".concat(i," not found."));case 11:return e.next=13,t.db.getConversationFromLeafMessage(s);case 13:a=e.sent;case 14:if(c={role:o,content:n},l=[].concat(x(a),[c]),(0,m.A1)(l)){e.next=18;break}throw new Error("Unexpected codepoint reached - empty messages array in append_user_reply");case 18:return e.next=20,(0,u.pO)("paused",l);case 20:return f=e.sent,h=f[f.length-1].message,e.abrupt("return",h.hash);case 23:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return G.apply(this,arguments)}),parameters:[{name:"content",type:"string",description:"The content of the new message.",required:!0},{name:"role",type:"string",description:"Must be one of either 'user', 'system', or `assistant`. (defaults to 'user')",required:!1},{name:"parentHash",type:"string",description:"The SHA of the message to append a reply to. (defaults to starting a new conversation from the root rather than replying to an existing message)",required:!1}]},{name:"conversation_completion",description:"Uses GPT to get the next message in a conversation at the specified leaf message.",implementation:(z=S(F().mark((function e(t,n,r){var o,u,a,s,c,f;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(r||"").split(",").map((function(e){return e.trim()})),u=V.map((function(e){return{name:e.name,description:e.description,parameters:{type:"object",properties:e.parameters.reduce((function(e,t){return e[t.name]={type:t.type,description:t.description},t.items&&(e[t.name].items=t.items),e}),{})},required:e.parameters.filter((function(e){return e.required})).map((function(e){return e.name}))}})).filter((function(e){return o.includes(e.name)})),e.next=4,t.db.getMessageByHash(n);case 4:if(a=e.sent){e.next=7;break}throw new Error("Message with SHA ".concat(n," not found."));case 7:if(["system","user"].includes(a.role)){e.next=9;break}return e.abrupt("return","");case 9:return e.next=11,t.db.getConversationFromLeafMessage(a);case 11:return s=e.sent,e.next=14,(0,v.vw)(t.db,s,"gpt-4",u);case 14:return c=e.sent,f=(0,i.kg)(c,!1),e.next=18,(0,l.z)(f).then((function(e){return(0,i.Mx)(c),e.hash}));case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)}))),function(e,t,n){return z.apply(this,arguments)}),parameters:[{name:"sha",type:"string",description:"The SHA address of the last message in the conversation to run a completion against. If the message is not a user or system message, the function will complete without a result.",required:!0},{name:"enabledFunctions",type:"string",description:"A comma separated list of function names to enable for this completion. Defaults to no functions.",required:!1}]},{name:"generate_dynamic_function",description:"Create a JavaScript function dynamically and save it to a new message. `functionBody` is a string of code, and `dependencies` is an array of callable function SHAs or function names provided in the API call payload. Return values from other functions are coerced into Observable<string>. Use `RxJS` for RxJS functions and `dependencies` with SHAs or function names to call other functions. The function must handle errors and return each element as a separate event in an Observable<string> when multiple values are involved.",implementation:(H=S(F().mark((function e(t,n,r){var i,o,u,a,s,c;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=[]),e.next=3,t.functionMessagePromise;case 3:if(te((i=e.sent).content)){e.next=7;break}throw new Error("Invalid function message content");case 7:if(o=t.functionOptions,u=o.map((function(e){return e.name})),!((a=r.filter((function(e){return P.includes(e)}))).length>0)){e.next=12;break}throw new Error("Forbidden dependencies: ".concat(a.join(", ")));case 12:return s=r.filter((function(e){return!u.includes(e)})),e.next=15,Promise.all(s.map(function(){var e=S(F().mark((function e(n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getMessageByHash(n);case 2:return r=e.sent,e.abrupt("return",r?null:n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:if(!((c=e.sent.filter(Boolean)).length>0)){e.next=18;break}throw new Error("Missing dependencies: ".concat(c.join(", ")));case 18:return e.next=20,Promise.all(r.map(function(){var e=S(F().mark((function e(n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.saveFunctionDependency(i,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 20:return e.abrupt("return","Dynamic function persisted:\n\n"+JSON.stringify({hash:i.hash,functionBody:n,dependencies:r}));case 21:case"end":return e.stop()}}),e)}))),function(e,t,n){return H.apply(this,arguments)}),parameters:[{name:"functionBody",type:"string",description:"The body of the function to generate without the enclosing function definition or surrounding curly braces. `input` is an RxJS Observable<string>, and must be accessed as such (e.g., `input.pipe(RxJS.first(), ...`). `dependencies` is an object mapping function names to functions, and must be accessed as an object. When invoking a dependency function, pass the argument directly without wrapping it in an object unless the function explicitly requires an object. The function must either not return, or return a string, Observable<string>, or Promise<string>. An empty string return will be interpreted the same as no return. Avoid returning Observable<string[]> or Promise<string[]> as they will be flattened into a single string; instead, emit each element as a separate event in an Observable<string> whenever possible. It is important to ensure that the function body correctly handles the invocation of dependencies, especially when dealing with dynamic function SHAs. Incorrect invocation can lead to errors such as invalid object where a stream was expected.",required:!0},{name:"dependencies",type:"array",items:{type:"string"},description:"Defaults to []. A list of the names of the functions to which the generated function should have access. Access will be provided to the `functionBody` via a `dependencies` variable. Any functions or SHAs not specified in this list will not be accessible to the generated function. Specify the SHA of a function to include it as a callable dependency within the generated function. When specifying a function by SHA, use the SHA as the key in the `dependencies` object. Example: `['get_message_property', 'c2931bf195957b133ebb5e8820df94a20c96887e234d2869ecafad53846501e7']`. The following functions are forbidden as dependencies: "+P.join(", ")+".",required:!1}]},{name:"compose_dynamic_functions",description:"Compose multiple dynamic functions into a single function by chaining them such that the output of one function is the input to the next. The order of execution is determined by the reverse of the array order; for example, an array `['f', 'g']` will result in a composition equivalent to `return f(g(input))`. Only dynamic functions specified by their SHAs are supported, and each must accept and return an RxJS Observable<string>.",implementation:(K=S(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.functionMessagePromise;case 2:if(te((r=e.sent).content)){e.next=6;break}throw new Error("Invalid function message content");case 6:return e.next=8,Promise.all(n.map(function(){var e=S(F().mark((function e(n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getMessageByHash(n);case 2:return r=e.sent,e.abrupt("return",r?null:n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:if(!((i=e.sent.filter(Boolean)).length>0)){e.next=11;break}throw new Error("Missing functionHashes: ".concat(i.join(", ")));case 11:return e.next=13,Promise.all(n.map(function(){var e=S(F().mark((function e(n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.saveFunctionDependency(r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return e.abrupt("return","Dynamic function persisted:\n\n"+JSON.stringify({hash:r.hash,functionBody:T(n),functionHashes:n}));case 14:case"end":return e.stop()}}),e)}))),function(e,t){return K.apply(this,arguments)}),parameters:[{name:"functionHashes",type:"array",items:{type:"string"},description:"An array of SHAs, each representing a dynamic function to be composed. The functions are composed in reverse order, with the last SHA in the array being the first to process the input and the first SHA being the last, forming a pipeline. All functions must accept and return an RxJS Observable<string>. The array must contain at least two SHAs.",required:!0}]},{name:"invoke_dynamic_function",description:I,implementation:L,parameters:[{name:"functionHash",type:"string",description:"The SHA of the function to invoke.",required:!0},{name:"input",type:"array",items:{type:"string"},description:"The input to provide to the function. Defaults to [].",required:!1}]},{name:"get_message_property",description:"Gets a `property` of a message at the provided `sha` address.",implementation:function(e,t,n){return n||(n="content"),new c.y((function(r){S(F().mark((function i(){var o,u,a,s,c,l;return F().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.db.getMessageByHash(t);case 2:if(o=i.sent){i.next=6;break}return r.error("Message with SHA ".concat(t," not found.")),i.abrupt("return");case 6:if("role"!==n&&"content"!==n&&"parentHash"!==n&&"timestamp"!==n&&"hash"!==n){i.next=9;break}return r.next(String(o[n])),i.abrupt("return");case 9:if("children"!==n){i.next=15;break}return i.next=12,e.db.getDirectChildren(o);case 12:return i.sent.forEach((function(e){return r.next(e.hash)})),i.abrupt("return");case 15:if("siblings"!==n){i.next=21;break}return i.next=18,e.db.getDirectSiblings(o);case 18:return i.sent.forEach((function(e){return r.next(e.hash)})),i.abrupt("return");case 21:if("summary"!==n){i.next=27;break}return i.next=24,e.db.getSummaryByHash(o.hash);case 24:return null!=(u=i.sent)&&u.summary&&r.next(u.summary),i.abrupt("return");case 27:if("functionResults"!==n){i.next=38;break}if(j(o)){i.next=30;break}return i.abrupt("return");case 30:if(a=te(o.content)){i.next=33;break}return i.abrupt("return");case 33:return i.next=35,e.db.getFunctionResultsByUUID(a.uuid);case 35:return(s=i.sent).find((function(e){return e.completed}))&&s.filter((function(e){return!e.completed})).forEach((function(e){return r.next(e.result)})),i.abrupt("return");case 38:if("functionDependencies"!==n){i.next=44;break}return i.next=41,e.db.getFunctionDependenciesByHash(o.hash);case 41:return i.sent.forEach((function(e){return r.next(e.dependencyName)})),i.abrupt("return");case 44:if("embedding"!==n){i.next=50;break}return i.next=47,e.db.getEmbeddingByHash(o.hash);case 47:return(c=i.sent)&&c.embedding.forEach((function(e){return r.next(String(e))})),i.abrupt("return");case 50:if("summaryEmbedding"!==n){i.next=56;break}return i.next=53,e.db.getSummaryEmbeddingByHash(o.hash);case 53:return(l=i.sent)&&l.embedding.forEach((function(e){return r.next(String(e))})),i.abrupt("return");case 56:throw new Error('Invalid property "'.concat(n,"\". Must be either 'role', 'content', 'parentHash', 'timestamp', 'hash', 'children', 'siblings', 'summary', 'functionResults', 'functionDependencies', 'embedding', or 'summaryEmbedding'."));case 57:case"end":return i.stop()}}),i)})))().then((function(){return r.complete()}))}))},parameters:[{name:"sha",type:"string",description:"SHA address which specifies the target message for property retrieval.",required:!0},{name:"property",type:"string",description:"The property to retrieve, defaults to 'content'. Must be one of either:\n'role'\n'content'\n'parentHash'\n'timestamp' (stringified integer representation)\n'hash'\n'children' (their SHAs each in its own event)\n'siblings' (their SHAs each in its own event)\n'summary' (recursive summary representing the conversation path from root to the specified message)\n'functionResults' (EMPTY if not a completed function message)\n'functionDependencies' (each in its own event)\n'embedding' (EMPTY if no embedding, stringified floats each in their own event if present)\n'summaryEmbedding' (same behavior as 'embedding' but for the recursive summary)\n        ".trim(),required:!1}]},{name:"recursively_summarize_path",description:"For any messages which are missing it, recursively summarizes and generates an embedding for both the message content and the summary for every message in the conversation path from the root to the message specified by `sha`. Useful for ensuring that all messages in a conversation path have summaries and embeddings before performing an action which depends on them.",implementation:(q=S(F().mark((function e(t,n){var r,i,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getMessageByHash(n);case 2:if(r=e.sent){e.next=5;break}throw new Error("Message with SHA ".concat(n," not found."));case 5:return e.next=7,t.db.getConversationFromLeafMessage(r);case 7:return i=e.sent,e.next=10,(0,u.pO)("gpt-4",i);case 10:return o=e.sent,e.next=13,Promise.all(o.map((function(e){return e.metadataRecordsPromise})));case 13:return e.abrupt("return","");case 14:case"end":return e.stop()}}),e)}))),function(e,t){return q.apply(this,arguments)}),parameters:[{name:"sha",type:"string",description:"SHA address which specifies the last message in a conversation path starting at the root of the tree.",required:!0}]},{name:"jsonp_data_retrevial",description:"Retrieves data from a JSONP endpoint and returns it as a string via JSON.stringify.",implementation:function(e,t){return new Promise((function(e,n){var r="jsonp_callback_"+Math.round(1e5*Math.random());window[r]=function(t){delete window[r],document.body.removeChild(i),e(JSON.stringify(t.data))};var i=document.createElement("script");i.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+r,document.body.appendChild(i)}))},parameters:[{name:"url",type:"string",description:"The URL of the JSONP-compatible endpoint to retrieve data from. The JSONP callback parameter will be automatically appended to the URL.",required:!0}]},{name:"cors_data_retrieval",description:"Retrieves data from a CORS-compatible endpoint with specified options and returns it as a string.",implementation:(U=S(F().mark((function e(t,n,r,i,o){var u,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={method:r||"GET",headers:i||{}},o&&"POST"===(null==r?void 0:r.toUpperCase())&&(u.body=o),e.next=4,fetch(n,u);case 4:return a=e.sent,e.abrupt("return",a.text());case 6:case"end":return e.stop()}}),e)}))),function(e,t,n,r,i){return U.apply(this,arguments)}),parameters:[{name:"url",type:"string",description:"The URL of the CORS-compatible endpoint to retrieve data from.",required:!0},{name:"method",type:"string",description:"The HTTP method (e.g., GET, POST). Optional, defaults to GET.",required:!1},{name:"headers",type:"object",additionalProperties:{type:"string"},description:"Headers to include in the request. Optional.",required:!1},{name:"body",type:"string",description:"The body content for POST, PUT requests. Not needed for GET requests.",required:!1}]},{name:"rag",description:"Draws in additional messages for context via a dynamic function address while keeping them out of the ongoing conversation history.",implementation:(N=S(F().mark((function e(t,n){var r,o,u,a,s,c,p,v,y,g,D,w,_,A;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.functionMessagePromise;case 2:if(r=e.sent,o=(0,i.qu)(t.conversation),u=o.filter((function(e){return e.hash!==r.hash})),(0,m.A1)(u)){e.next=7;break}throw new Error("Conversation was too short to use RAG. Must have at least one message prior to the function message.");case 7:return a=(0,m.kb)(u),s=E(a,2),c=s[0],p=s[1],e.next=10,(0,l.z)(L(0,n,p.hash).pipe((0,f.z)(function(){var e=S(F().mark((function e(n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.db.getMessageByHash(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.h)(Boolean),(0,d.q)()));case 10:return v=e.sent,y={role:"system",content:"This conversation has been supplemented with the following messages for Retrieval Agumented Generation:"},g={role:"system",content:"End of RAG messages. Please use the above messages to respond to the following message:"},D={role:"system",content:"No messages were found for Retrieval Augmented Generation. Instead, respond to the following message directly:"},w=v.length>0?[].concat(x(c),[y],x(v),[g,p]):[].concat(x(c),[D,p]),_=t.conversation.functions.filter((function(e){return"rag"!==e.name})),e.next=18,(0,i.Xw)(t.db,(0,m.Al)(w),"gpt-4",_);case 18:return(A=e.sent).newMessagesInput.subscribe(t.conversation.newMessagesInput),e.abrupt("return",new Promise((function(e){(0,i.kg)(A,!1).subscribe({next:function(t){(0,i.Mx)(A),e(t.hash)},error:function(e){throw(0,i.Mx)(A),e}}),(0,b.V)(A,t.db)})));case 21:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)}),parameters:[{name:"functionHash",type:"string",description:"The SHA of the function to invoke, typically indicated in a system message.",required:!0}]},{name:"alert",description:"Displays a browser alert with the provided message.",implementation:(M=S(F().mark((function e(t,n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert(n),e.abrupt("return","sent alert!");case 2:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)}),parameters:[{name:"message",type:"string",description:"The message to display in the alert.",required:!0}]},{name:"prompt",description:"Opens a prompt dialog asking the user to input some text.",implementation:function(e,t,n){return prompt(t,n)||""},parameters:[{name:"message",type:"string",description:"The message to display in the prompt.",required:!0},{name:"defaultValue",type:"string",description:"The default value to prefill in the prompt input.",required:!1}]},{name:"error",description:"Throws an error with the provided message.",implementation:function(e,t){throw new Error(t)},parameters:[{name:"message",type:"string",description:"The message to display in the error.",required:!0}]}];function X(e,t){return e.functions.some((function(e){return e.name===t.name}))}function $(e,t){return J.apply(this,arguments)}function J(){return(J=S(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.kg)(t,!1),e.abrupt("return",(0,l.z)(r.pipe((0,h.h)(j),(0,h.h)((function(e){var t;return(null===(t=te(e.content))||void 0===t?void 0:t.uuid)===n.uuid})))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n){return W.apply(this,arguments)}function W(){return W=S(F().mark((function e(t,n,r){var u,a,s,c,l,f,h,d,v,m,y;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u=Q(n),a=(0,o.Z)(),b=s=w(w({},n),{},{uuid:a,v:1}),c=JSON.stringify(b),(0,i.cm)(t,c),l=$(t,s),f=u({db:r,functionMessagePromise:l,functionOptions:t.functions,conversation:t}),h=function(){var e=S(F().mark((function e(t,i){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return",r.saveFunctionResult({uuid:a,functionName:n.name,completed:!0}));case 2:if(""!==t){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",r.saveFunctionResult({uuid:a,functionName:n.name,result:t,completed:!1}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),!(0,p.b)(f)){e.next=12;break}return f.subscribe({next:function(){var e=S(F().mark((function e(t){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),complete:function(){var e=S(F().mark((function e(){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("",!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),error:function(){var e=S(F().mark((function e(n){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.y7)(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),e.abrupt("return");case 12:if(void 0!==f){e.next=16;break}return e.next=15,h("",!0);case 15:return e.abrupt("return");case 16:if(!Array.isArray(f)){e.next=37;break}d=g(f),e.prev=18,d.s();case 20:if((v=d.n()).done){e.next=26;break}return m=v.value,e.next=24,h(m,!1);case 24:e.next=20;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(18),d.e(e.t0);case 31:return e.prev=31,d.f(),e.finish(31);case 34:return e.next=36,h("",!0);case 36:return e.abrupt("return");case 37:return e.next=39,f;case 39:return y=e.sent,e.next=42,h(y,!1);case 42:return e.next=44,h("",!0);case 44:e.next=50;break;case 46:throw e.prev=46,e.t1=e.catch(0),console.error("caught error in callFunction",e.t1),e.t1;case 50:case"end":return e.stop()}var b}),e,null,[[0,46],[18,28,31,34]])}))),W.apply(this,arguments)}function Z(e,t){return t.parameters.map((function(t){if(t.name in e){var n,r,i=e[t.name];if("number"===t.type)return Number(i);if("boolean"===t.type)return Boolean(i);if("string"===t.type)return String(i);if("array"===t.type&&"string"===(null===(n=t.items)||void 0===n?void 0:n.type))return i.map(String);if("object"===t.type&&"string"===(null===(r=t.additionalProperties)||void 0===r?void 0:r.type))return Object.fromEntries(Object.entries(i).map((function(e){var t=E(e,2),n=t[0],r=t[1];return[n,String(r)]})));throw new Error('Unsupported parameter type "'.concat(t.type,'" for parameter "').concat(t.name,'". It had value of ').concat(i))}if(t.required)throw new Error('Required parameter "'.concat(t.name,'" missing in function call.'))}))}function Q(e){var t=V.find((function(t){return t.name===e.name}));if(!t)throw new Error('Function "'.concat(e.name,'" not found in specs.'));var n=Z(e.parameters,t);return function(e){return t.implementation.apply(t,[e].concat(x(n)))}}function ee(e){return B.includes(e.name)}function te(e){try{var t=JSON.parse(e);return t.uuid&&1===t.v?t:null}catch(t){return console.error("Error deserializing function message content",t,e),null}}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=S(F().mark((function e(t,n){var r;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===n.role){e.next=2;break}return e.abrupt("return",null);case 2:if(r=te(n.content)){e.next=6;break}return console.error("Invalid function message content",n.content),e.abrupt("return",null);case 6:return e.abrupt("return",t.getFunctionResultsByUUID(r.uuid));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return oe.apply(this,arguments)}function oe(){return(oe=S(F().mark((function e(t,n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t,n);case 2:if(null!==(r=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return i=w(w({},n),{},{role:"function",isComplete:-1!==r.findIndex((function(e){return e.completed})),results:r}),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){var t,n,r=Math.max.apply(Math,x(null!==(t=null===(n=e.match(/`+/g))||void 0===n?void 0:n.map((function(e){return e.length})))&&void 0!==t?t:[0]));if(/\r?\n/.test(e)){var i="`".repeat(Math.max(3,r+1));return"\n".concat(i,"\n").concat(e,"\n").concat(i)}var o="`".repeat(r+1);return"".concat(o).concat(e).concat(o)}function ae(e,t){return se.apply(this,arguments)}function se(){return(se=S(F().mark((function e(t,n){var r,i,o,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(n)){e.next=2;break}return e.abrupt("return",n.content);case 2:if(r=te(n.content)){e.next=5;break}return e.abrupt("return",n.content);case 5:return e.next=7,t.getFunctionResultsByUUID(r.uuid);case 7:return i=e.sent,o=-1!==i.findIndex((function(e){return e.completed})),u=i.filter((function(e){return!e.completed})),e.abrupt("return","\n**function**: ".concat(ue(r.name),"\n\n").concat(Object.entries(r.parameters).map((function(e){var t=E(e,2),n=t[0],r=t[1];return"**".concat(n,"**: ").concat(ue("string"==typeof r?r:JSON.stringify(r)))})).join("\n"),"\n\n").concat(u.map((function(e){var t,n=ue(null!==(t=e.result)&&void 0!==t?t:"");return"Result: ".concat(n)})).join("\n"),"\n").concat(o?"Function call complete.":"Function call incomplete...","\n  ").trim());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},89982:(e,t,n)=>{"use strict";n.d(t,{VO:()=>F,pO:()=>S});var r=n(4671),i=n(40557),o=n(64211),u=n(72886),a=n(1718),s=n(94975),c=n(29127),l=n(23229),f=n(93324);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw o}}}}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",y={};function g(){}function D(){}function w(){}var E={};c(E,u,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&r.call(_,u)&&(E=_);var A=w.prototype=g.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==h(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=d;return function(o,u){if(i===v)throw new Error("Generator is already running");if(i===m){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(h(t)+" is not iterable")}return D.prototype=w,i(A,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:D,configurable:!0}),D.displayName=c(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(F.prototype),c(F.prototype,a,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(A),c(A,s,"Generator"),c(A,u,(function(){return this})),c(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function g(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){g(o,r,i,u,a,"next",e)}function a(e){g(o,r,i,u,a,"throw",e)}u(void 0)}))}}var w=function(){var e=D(b().mark((function e(t,n){var r,i,o,u,a,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.content,i=t.role,o=JSON.stringify({content:r,role:i}),u=n.reduce((function(e,t){return e+t}),o),e.next=5,crypto.subtle.digest("SHA-256",(new TextEncoder).encode(u));case 5:return a=e.sent,s=Array.from(new Uint8Array(a)),e.abrupt("return",s.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E={message:null,metadataRecordsPromise:Promise.resolve({})};function x(e){return e.replace(/\"\"\"/g,'\\"\\"\\"')}function _(e,t){e=x(e);var n=x(t.content);return"Given the following two texts to combine:\n\nNew Message (".concat(t.role,'): """\n').concat(n,'\n"""\n\nPrior Conversation Summary: """\n').concat(e,'\n"""\n\nPlease generate a summary of the overall conversation.')}function A(e,t){return C.apply(this,arguments)}function C(){return(C=D(b().mark((function e(t,n){var r,i,o,l,f,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.metadataRecordsPromise;case 2:if(e.t2=i=e.sent.messageSummary,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===i;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=i.summary;case 11:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t5=r,e.next=20;break;case 19:e.t5="";case 20:return o=e.t5,l=_(o,t),f=_("A series of exercise instructions have been recommended including sit ups, push ups, chin ups with further advice offered. Inquiries have been made about exercise activities for the purposes of strength training.",{role:"user",content:"That all seems kind of hard though..."}),h=(0,u.Ds)([{role:"system",content:"As an AI, your task is to generate a summary that blends the contents of the prior summary (80%) with the new message (20%) without explicitly indicating which the new content came from. The new output should prioritize the content of the prior summary. Analyze the new message for key themes, but ensure they don't overshadow the content from the prior summary. The goal is a summary that maintains the context and flow, and is representative of the entire discussion up to this point. These summaries will be used for embeddings and message search, so they should be informative and detailed. The objective is a predictable, understandable summary that aids users in contextual search. Only phase out components from the prior summary if they are explicitly contradicted or negated in the new message."},{role:"user",content:f},{role:"assistant",content:"Concern is expressed at the difficulty of the exercises. A series of exercise instructions have been recommended including sit ups, push ups, chin ups."},{role:"user",content:l}],.1,"gpt-4",100),e.abrupt("return",(0,a.z)(h.pipe((0,s.h)(u.fY),(0,c.U)((function(e){return e.text})))));case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n){return O.apply(this,arguments)}function O(){return O=D(b().mark((function e(t,n,o){var u,a,s,c,h,d,v,m,g,E,x,_;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,f.jm)()||(t="paused"),u=o.message?o.message.hash:r.os,e.next=4,w(n,[u]);case 4:return a=e.sent,s=(0,r.sZ)(n)&&n.hash===a?n:y(y({},n),{},{timestamp:void 0,hash:a,parentHash:u}),c=new r.Au,h={messageEmbedding:function(){var e=D(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ke)(n.content);case 2:return t=e.sent,e.abrupt("return",{hash:s.hash,embedding:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},d={messageSummary:function(){var e=D(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n,o);case 2:return t=e.sent,e.abrupt("return",{hash:s.hash,summary:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),summaryEmbedding:function(){var e=D(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.ke)(t.summary);case 2:return n=e.sent,e.abrupt("return",{hash:s.hash,embedding:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v="paused"===t?h:y(y({},h),d),m=c.saveMessage(s,v),F=2,g=function(e){if(Array.isArray(e))return e}(C=m)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,a=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw i}}return a}}(C,F)||p(C,F)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),E=g[0],x=g[1],e.t1=l.vo,e.t2=c,e.next=15,E;case 15:return e.t3=e.sent,e.next=18,(0,e.t1)(e.t2,e.t3);case 18:if(e.t0=e.sent,e.t0){e.next=23;break}return e.next=22,E;case 22:e.t0=e.sent;case 23:return _=e.t0,e.abrupt("return",{message:_,metadataRecordsPromise:x});case 25:case"end":return e.stop()}var C,F}),e)}))),O.apply(this,arguments)}function S(e,t){return P.apply(this,arguments)}function P(){return(P=D(b().mark((function e(t,n){var r,i,u,a,s,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t,n[0],E);case 2:if(r=e.sent,i=[r],u=n.slice(1),(0,o.A1)(u)){e.next=7;break}return e.abrupt("return",i);case 7:a=d(u),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=18;break}return c=s.value,e.next=14,F(t,c,r);case 14:r=e.sent,i.push(r);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",i);case 27:case"end":return e.stop()}}),e,null,[[8,20,23,26]])})))).apply(this,arguments)}},44459:(e,t,n)=>{"use strict";function r(e){return"user"===e||"assistant"===e}function i(e,t,n){e.newMessagesInput.next({type:"typingUpdate",payload:{role:t,content:n}})}function o(e,t,n){n&&e.newMessagesInput.next({type:"newMessage",payload:{content:n,role:t}})}n.d(t,{WV:()=>r,bG:()=>o,un:()=>i})},26130:(e,t,n)=>{"use strict";n.d(t,{P1:()=>s,aw:()=>a});var r=n(83286),i=n(51313),o=n(40052),u=n(29127);function a(e,t){return e.pipe((0,r.x)((function(){return t.complete()}))).subscribe(t)}function s(e,t){var n=0,r=t;return function(t){return t.pipe((0,i.b)((function(t){return(0,o.D)(e(r,t,n++)).pipe((0,u.U)((function(e){return r=e,e})))})))}}},28400:(e,t,n)=>{"use strict";n.d(t,{vw:()=>s}),n(67294);var r=n(21276),i=(n(4671),n(69365));function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",v="suspendedYield",m="executing",y="completed",b={};function g(){}function D(){}function w(){}var E={};f(E,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&r.call(_,s)&&(E=_);var A=w.prototype=g.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,u,a,s){var c=d(e[i],e,u);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var u;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return u=u?u.then(i,i):i()}})}function O(t,n,r){var i=p;return function(o,u){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,u=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return u.next=u}}throw new TypeError(o(t)+" is not iterable")}return D.prototype=w,i(A,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:D,configurable:!0}),D.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(F.prototype),f(F.prototype,c,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(h(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(A),f(A,l,"Generator"),f(A,s,(function(){return this})),f(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function a(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function s(e,t){return c.apply(this,arguments)}function c(){return e=u().mark((function e(t,n){var o,a,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>2&&void 0!==c[2]?c[2]:"gpt-4",a=c.length>3&&void 0!==c[3]?c[3]:[],e.next=4,(0,r.Xw)(t,n,o,a);case 4:return s=e.sent,e.abrupt("return",(0,i.V)(s,t));case 6:case"end":return e.stop()}}),e)})),c=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,s,"next",e)}function s(e){a(o,r,i,u,s,"throw",e)}u(void 0)}))},c.apply(this,arguments);var e}n(51039)},40557:(e,t,n)=>{"use strict";n.d(t,{Gj:()=>p,ke:()=>h}),n(36485);var r=n(93324),i=n(11142),o=n.n(i);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){c=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,u=Object.create(o.prototype),a=new j(r||[]);return i(u,"_invoke",{value:O(e,n,a)}),u}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",v="suspendedYield",m="executing",y="completed",b={};function g(){}function D(){}function w(){}var E={};f(E,a,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(k([])));_&&_!==n&&r.call(_,a)&&(E=_);var A=w.prototype=g.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function F(e,t){function n(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,n,r){var i=p;return function(o,u){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?y:v,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function S(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(u(t)+" is not iterable")}return D.prototype=w,i(A,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:D,configurable:!0}),D.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===D||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},C(F.prototype),f(F.prototype,s,(function(){return this})),t.AsyncIterator=F,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new F(h(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},C(A),f(A,l,"Generator"),f(A,a,(function(){return this})),f(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;B(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function l(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){l(o,r,i,u,a,"next",e)}function a(e){l(o,r,i,u,a,"throw",e)}u(void 0)}))}}function h(e){return d.apply(this,arguments)}function d(){return d=f(c().mark((function e(t){var n,i,o,u,a,s,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:"text-embedding-ada-002",i=(0,r.O4)()){e.next=4;break}throw new Error("API Key not found");case 4:return o={input:t,model:n},e.next=7,fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify(o)});case 7:if((u=e.sent).ok){e.next=13;break}return e.next=11,u.text();case 11:throw a=e.sent,new Error("Failed to fetch embedding: ".concat(a));case 13:return e.next=15,u.json();case 15:return s=e.sent,e.abrupt("return",s.data[0].embedding);case 17:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e,t){return v.apply(this,arguments)}function v(){return v=f(c().mark((function e(t,n){var i,o,u,a,l,f,h,d,p,v,y,b,g,D,w,E,x=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=x.length>2&&void 0!==x[2]?x[2]:"gpt-4",o=x.length>3?x[3]:void 0,u=x.length>4&&void 0!==x[4]?x[4]:[],a=x.length>5&&void 0!==x[5]?x[5]:function(){},l=x.length>6&&void 0!==x[6]?x[6]:function(){},f=x.length>7&&void 0!==x[7]?x[7]:function(){},h=x.length>8&&void 0!==x[8]?x[8]:function(){},(0,r.O4)()){e.next=10;break}return e.abrupt("return");case 10:return d={messages:t.map((function(e){return"function"===e.role?s(s({},e),{},{name:"TODO"}):e})),model:i,max_tokens:o,temperature:n,stream:!0},u.length>0&&(d.functions=u,d.function_call="auto"),e.next=14,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat((0,r.O4)()),"Content-Type":"application/json"},body:JSON.stringify(d)});case 14:if((p=e.sent).body){e.next=17;break}return e.abrupt("return");case 17:v=new TextDecoder("utf8"),y=p.body.getReader(),b=null,g="";case 22:return e.next=25,y.read();case 25:if(D=e.sent,w=D.value,E=D.done,void 0,v.decode(w).split("\n\n").map((function(e){return e.trim()})).filter((function(e){return e.startsWith("data: ")})).forEach((function(e){""!==(g=m(e,g,b,(function(e){return b=e}),l,f,h))&&a(b?"Function call: ".concat(b,"\n\nArguments: ")+g:g)})),!E){e.next=34;break}return e.abrupt("return");case 34:e.next=22;break;case 36:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function m(e,t,n,r,i,u,a){if("data: [DONE]"===e.trim())return t;var s=JSON.parse(e.substring(6).trim());if(s.choices[0].delta.function_call&&s.choices[0].delta.function_call.name)return r(s.choices[0].delta.function_call.name),s.choices[0].delta.function_call.arguments||"";if(s.choices[0].delta.function_call&&void 0!==s.choices[0].delta.function_call.arguments)return t+s.choices[0].delta.function_call.arguments;if(void 0!==s.choices[0].delta.content)return t+s.choices[0].delta.content;var c=s.choices[0].finish_reason;return"stop"===c?(u(t),""):"function_call"===c?(i({name:n,parameters:o().parse(t)}),""):"length"===c?(a(t),""):(console.error("Unknown chunk type:",s),t)}},64211:(e,t,n)=>{"use strict";function r(e){return e.length>0}function i(e){var t=e[e.length-1];return[e.slice(0,-1),t]}function o(e){if(!r(e))throw new Error("Impossible code path");return e}n.d(t,{A1:()=>r,Al:()=>o,kb:()=>i})},51039:function(e,t,n){!function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=r(n);function o(e,t,n){var r,o;"function"==typeof e?(r=t||[],o=n):(r=[],o=t);var u=i.default.useRef({hasResult:!1,result:o,error:null}),a=i.default.useReducer((function(e){return e+1}),0);a[0];var s=a[1],c=i.default.useMemo((function(){var t="function"==typeof e?e():e;if(!t||"function"!=typeof t.subscribe)throw e===t?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof t.hasValue||t.hasValue()))if("function"==typeof t.getValue)u.current.result=t.getValue(),u.current.hasResult=!0;else{var n=t.subscribe((function(e){u.current.result=e,u.current.hasResult=!0}));"function"==typeof n?n():n.unsubscribe()}return t}),r);if(i.default.useDebugValue(u.current.result),i.default.useEffect((function(){var e=c.subscribe((function(e){var t=u.current;null===t.error&&t.result===e||(t.error=null,t.result=e,t.hasResult=!0,s())}),(function(e){var t=u.current;t.error!==e&&(t.error=e,s())}));return"function"==typeof e?e:e.unsubscribe.bind(e)}),r),u.current.error)throw u.current.error;return u.current.result}e.useLiveQuery=function(e,n,r){return o((function(){return t.liveQuery(e)}),n||[],r)},e.useObservable=o,e.usePermissions=function(e,n,r){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var i;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if("string"!=typeof n)throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!r||"object"!=typeof r)throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");i=e}else{if(e instanceof t.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if("function"!=typeof e.table||"object"!=typeof e.db)throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)");i=e.db,r=e,n=e.table()}if(!("cloud"in i))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in i.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return o((function(){return i.cloud.permissions(r,n)}),[r.realmId,r.owner,n])},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(49520),n(67294))},6230:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},11142:function(e){e.exports=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),n=e((function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)})),r=(n.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),i=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e},o=function(e){try{return!!e()}catch(e){return!0}},u=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),a=t.document,s=r(a)&&r(a.createElement),c=!u&&!o((function(){return 7!=Object.defineProperty((e="div",s?a.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),l=Object.defineProperty,f={f:u?Object.defineProperty:function(e,t,n){if(i(e),t=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(t,!0),i(n),c)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},h=u?function(e,t,n){return f.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,n))}:function(e,t,n){return e[t]=n,e},d={}.hasOwnProperty,p=function(e,t){return d.call(e,t)},v=0,m=Math.random(),y=e((function(e){var r="__core-js_shared__",i=t[r]||(t[r]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),b=y("native-function-to-string",Function.toString),g=e((function(e){var r=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++v+m).toString(36))}("src"),i="toString",o=(""+b).split(i);n.inspectSource=function(e){return b.call(e)},(e.exports=function(e,n,i,u){var a="function"==typeof i;a&&(p(i,"name")||h(i,"name",n)),e[n]!==i&&(a&&(p(i,r)||h(i,r,e[n]?""+e[n]:o.join(String(n)))),e===t?e[n]=i:u?e[n]?e[n]=i:h(e,n,i):(delete e[n],h(e,n,i)))})(Function.prototype,i,(function(){return"function"==typeof this&&this[r]||b.call(this)}))})),D=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},w="prototype",E=function(e,r,i){var o,u,a,s,c=e&E.F,l=e&E.G,f=e&E.S,d=e&E.P,p=e&E.B,v=l?t:f?t[r]||(t[r]={}):(t[r]||{})[w],m=l?n:n[r]||(n[r]={}),y=m[w]||(m[w]={});for(o in l&&(i=r),i)a=((u=!c&&v&&void 0!==v[o])?v:i)[o],s=p&&u?D(a,t):d&&"function"==typeof a?D(Function.call,a):a,v&&g(v,o,a,e&E.U),m[o]!=a&&h(m,o,s),d&&y[o]!=a&&(y[o]=a)};t.core=n,E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;var x=E,_=Math.ceil,A=Math.floor,C=function(e){return isNaN(e=+e)?0:(e>0?A:_)(e)},F=(!1,function(e,t){var n,r,i=String(function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}(e)),o=C(t),u=i.length;return o<0||o>=u?void 0:(n=i.charCodeAt(o))<55296||n>56319||o+1===u||(r=i.charCodeAt(o+1))<56320||r>57343?n:r-56320+(n-55296<<10)+65536});x(x.P,"String",{codePointAt:function(e){return F(this,e)}}),n.String.codePointAt;var O=Math.max,S=Math.min,P=String.fromCharCode,B=String.fromCodePoint;x(x.S+x.F*(!!B&&1!=B.length),"String",{fromCodePoint:function(e){for(var t,n=arguments,r=[],i=arguments.length,o=0;i>o;){if(t=+n[o++],a=1114111,((u=C(u=t))<0?O(u+a,0):S(u,a))!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?P(t):P(55296+((t-=65536)>>10),t%1024+56320))}var u,a;return r.join("")}}),n.String.fromCodePoint;var j,k,T,R,I,L,M,N,U,q,K,H,z,G,V={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},X={isSpaceSeparator:function(e){return"string"==typeof e&&V.Space_Separator.test(e)},isIdStartChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||V.ID_Start.test(e))},isIdContinueChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||V.ID_Continue.test(e))},isDigit:function(e){return"string"==typeof e&&/[0-9]/.test(e)},isHexDigit:function(e){return"string"==typeof e&&/[0-9A-Fa-f]/.test(e)}};function $(e,t,n){var r=e[t];if(null!=r&&"object"==typeof r)if(Array.isArray(r))for(var i=0;i<r.length;i++){var o=String(i),u=$(r,o,n);void 0===u?delete r[o]:Object.defineProperty(r,o,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(var a in r){var s=$(r,a,n);void 0===s?delete r[a]:Object.defineProperty(r,a,{value:s,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,r)}function J(){for(q="default",K="",H=!1,z=1;;){G=Y();var e=Z[q]();if(e)return e}}function Y(){if(j[R])return String.fromCodePoint(j.codePointAt(R))}function W(){var e=Y();return"\n"===e?(I++,L=0):e?L+=e.length:L++,e&&(R+=e.length),e}var Z={default:function(){switch(G){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void W();case"/":return W(),void(q="comment");case void 0:return W(),Q("eof")}if(!X.isSpaceSeparator(G))return Z[k]();W()},comment:function(){switch(G){case"*":return W(),void(q="multiLineComment");case"/":return W(),void(q="singleLineComment")}throw oe(W())},multiLineComment:function(){switch(G){case"*":return W(),void(q="multiLineCommentAsterisk");case void 0:throw oe(W())}W()},multiLineCommentAsterisk:function(){switch(G){case"*":return void W();case"/":return W(),void(q="default");case void 0:throw oe(W())}W(),q="multiLineComment"},singleLineComment:function(){switch(G){case"\n":case"\r":case"\u2028":case"\u2029":return W(),void(q="default");case void 0:return W(),Q("eof")}W()},value:function(){switch(G){case"{":case"[":return Q("punctuator",W());case"n":return W(),ee("ull"),Q("null",null);case"t":return W(),ee("rue"),Q("boolean",!0);case"f":return W(),ee("alse"),Q("boolean",!1);case"-":case"+":return"-"===W()&&(z=-1),void(q="sign");case".":return K=W(),void(q="decimalPointLeading");case"0":return K=W(),void(q="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return K=W(),void(q="decimalInteger");case"I":return W(),ee("nfinity"),Q("numeric",1/0);case"N":return W(),ee("aN"),Q("numeric",NaN);case'"':case"'":return H='"'===W(),K="",void(q="string")}throw oe(W())},identifierNameStartEscape:function(){if("u"!==G)throw oe(W());W();var e=te();switch(e){case"$":case"_":break;default:if(!X.isIdStartChar(e))throw ae()}K+=e,q="identifierName"},identifierName:function(){switch(G){case"$":case"_":case"‌":case"‍":return void(K+=W());case"\\":return W(),void(q="identifierNameEscape")}if(!X.isIdContinueChar(G))return Q("identifier",K);K+=W()},identifierNameEscape:function(){if("u"!==G)throw oe(W());W();var e=te();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!X.isIdContinueChar(e))throw ae()}K+=e,q="identifierName"},sign:function(){switch(G){case".":return K=W(),void(q="decimalPointLeading");case"0":return K=W(),void(q="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return K=W(),void(q="decimalInteger");case"I":return W(),ee("nfinity"),Q("numeric",z*(1/0));case"N":return W(),ee("aN"),Q("numeric",NaN)}throw oe(W())},zero:function(){switch(G){case".":return K+=W(),void(q="decimalPoint");case"e":case"E":return K+=W(),void(q="decimalExponent");case"x":case"X":return K+=W(),void(q="hexadecimal")}return Q("numeric",0*z)},decimalInteger:function(){switch(G){case".":return K+=W(),void(q="decimalPoint");case"e":case"E":return K+=W(),void(q="decimalExponent")}if(!X.isDigit(G))return Q("numeric",z*Number(K));K+=W()},decimalPointLeading:function(){if(X.isDigit(G))return K+=W(),void(q="decimalFraction");throw oe(W())},decimalPoint:function(){switch(G){case"e":case"E":return K+=W(),void(q="decimalExponent")}return X.isDigit(G)?(K+=W(),void(q="decimalFraction")):Q("numeric",z*Number(K))},decimalFraction:function(){switch(G){case"e":case"E":return K+=W(),void(q="decimalExponent")}if(!X.isDigit(G))return Q("numeric",z*Number(K));K+=W()},decimalExponent:function(){switch(G){case"+":case"-":return K+=W(),void(q="decimalExponentSign")}if(X.isDigit(G))return K+=W(),void(q="decimalExponentInteger");throw oe(W())},decimalExponentSign:function(){if(X.isDigit(G))return K+=W(),void(q="decimalExponentInteger");throw oe(W())},decimalExponentInteger:function(){if(!X.isDigit(G))return Q("numeric",z*Number(K));K+=W()},hexadecimal:function(){if(X.isHexDigit(G))return K+=W(),void(q="hexadecimalInteger");throw oe(W())},hexadecimalInteger:function(){if(!X.isHexDigit(G))return Q("numeric",z*Number(K));K+=W()},string:function(){switch(G){case"\\":return W(),void(K+=function(){switch(Y()){case"b":return W(),"\b";case"f":return W(),"\f";case"n":return W(),"\n";case"r":return W(),"\r";case"t":return W(),"\t";case"v":return W(),"\v";case"0":if(W(),X.isDigit(Y()))throw oe(W());return"\0";case"x":return W(),function(){var e="",t=Y();if(!X.isHexDigit(t))throw oe(W());if(e+=W(),t=Y(),!X.isHexDigit(t))throw oe(W());return e+=W(),String.fromCodePoint(parseInt(e,16))}();case"u":return W(),te();case"\n":case"\u2028":case"\u2029":return W(),"";case"\r":return W(),"\n"===Y()&&W(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw oe(W())}return W()}());case'"':return H?(W(),Q("string",K)):void(K+=W());case"'":return H?void(K+=W()):(W(),Q("string",K));case"\n":case"\r":throw oe(W());case"\u2028":case"\u2029":!function(e){console.warn("JSON5: '"+se(e)+"' in strings is not valid ECMAScript; consider escaping")}(G);break;case void 0:throw oe(W())}K+=W()},start:function(){switch(G){case"{":case"[":return Q("punctuator",W())}q="value"},beforePropertyName:function(){switch(G){case"$":case"_":return K=W(),void(q="identifierName");case"\\":return W(),void(q="identifierNameStartEscape");case"}":return Q("punctuator",W());case'"':case"'":return H='"'===W(),void(q="string")}if(X.isIdStartChar(G))return K+=W(),void(q="identifierName");throw oe(W())},afterPropertyName:function(){if(":"===G)return Q("punctuator",W());throw oe(W())},beforePropertyValue:function(){q="value"},afterPropertyValue:function(){switch(G){case",":case"}":return Q("punctuator",W())}throw oe(W())},beforeArrayValue:function(){if("]"===G)return Q("punctuator",W());q="value"},afterArrayValue:function(){switch(G){case",":case"]":return Q("punctuator",W())}throw oe(W())},end:function(){throw oe(W())}};function Q(e,t){return{type:e,value:t,line:I,column:L}}function ee(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(Y()!==r)throw oe(W());W()}}function te(){for(var e="",t=4;t-- >0;){var n=Y();if(!X.isHexDigit(n))throw oe(W());e+=W()}return String.fromCodePoint(parseInt(e,16))}var ne={start:function(){if("eof"===M.type)throw ue();re()},beforePropertyName:function(){switch(M.type){case"identifier":case"string":return N=M.value,void(k="afterPropertyName");case"punctuator":return void ie();case"eof":throw ue()}},afterPropertyName:function(){if("eof"===M.type)throw ue();k="beforePropertyValue"},beforePropertyValue:function(){if("eof"===M.type)throw ue();re()},beforeArrayValue:function(){if("eof"===M.type)throw ue();"punctuator"!==M.type||"]"!==M.value?re():ie()},afterPropertyValue:function(){if("eof"===M.type)throw ue();switch(M.value){case",":return void(k="beforePropertyName");case"}":ie()}},afterArrayValue:function(){if("eof"===M.type)throw ue();switch(M.value){case",":return void(k="beforeArrayValue");case"]":ie()}},end:function(){}};function re(){var e;switch(M.type){case"punctuator":switch(M.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=M.value}if(void 0===U)U=e;else{var t=T[T.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,N,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(null!==e&&"object"==typeof e)T.push(e),k=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var n=T[T.length-1];k=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function ie(){T.pop();var e=T[T.length-1];k=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function oe(e){return ce(void 0===e?"JSON5: invalid end of input at "+I+":"+L:"JSON5: invalid character '"+se(e)+"' at "+I+":"+L)}function ue(){return ce("JSON5: invalid end of input at "+I+":"+L)}function ae(){return ce("JSON5: invalid identifier character at "+I+":"+(L-=5))}function se(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function ce(e){var t=new SyntaxError(e);return t.lineNumber=I,t.columnNumber=L,t}return{parse:function(e,t){j=String(e),k="start",T=[],R=0,I=1,L=0,M=void 0,N=void 0,U=void 0;do{M=J(),ne[k]()}while("eof"!==M.type);return"function"==typeof t?$({"":U},"",t):U},stringify:function(e,t,n){var r,i,o,u=[],a="",s="";if(null==t||"object"!=typeof t||Array.isArray(t)||(n=t.space,o=t.quote,t=t.replacer),"function"==typeof t)i=t;else if(Array.isArray(t)){r=[];for(var c=0,l=t;c<l.length;c+=1){var f=l[c],h=void 0;"string"==typeof f?h=f:("number"==typeof f||f instanceof String||f instanceof Number)&&(h=String(f)),void 0!==h&&r.indexOf(h)<0&&r.push(h)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),s="          ".substr(0,n)):"string"==typeof n&&(s=n.substr(0,10)),d("",{"":e});function d(e,t){var n=t[e];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(e):"function"==typeof n.toJSON&&(n=n.toJSON(e))),i&&(n=i.call(t,e,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?p(n):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);var t=a;a+=s;for(var n,r=[],i=0;i<e.length;i++){var o=d(String(i),e);r.push(void 0!==o?o:"null")}if(0===r.length)n="[]";else if(""===s)n="["+r.join(",")+"]";else{var c=",\n"+a,l=r.join(c);n="[\n"+a+l+",\n"+t+"]"}return u.pop(),a=t,n}(n):function(e){if(u.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");u.push(e);var t=a;a+=s;for(var n,i,o=[],c=0,l=r||Object.keys(e);c<l.length;c+=1){var f=l[c],h=d(f,e);if(void 0!==h){var p=v(f)+":";""!==s&&(p+=" "),p+=h,o.push(p)}}if(0===o.length)n="{}";else if(""===s)n="{"+(i=o.join(","))+"}";else{var m=",\n"+a;i=o.join(m),n="{\n"+a+i+",\n"+t+"}"}return u.pop(),a=t,n}(n):void 0}function p(e){for(var t={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",i=0;i<e.length;i++){var u=e[i];switch(u){case"'":case'"':t[u]++,r+=u;continue;case"\0":if(X.isDigit(e[i+1])){r+="\\x00";continue}}if(n[u])r+=n[u];else if(u<" "){var a=u.charCodeAt(0).toString(16);r+="\\x"+("00"+a).substring(a.length)}else r+=u}var s=o||Object.keys(t).reduce((function(e,n){return t[e]<t[n]?e:n}));return s+(r=r.replace(new RegExp(s,"g"),n[s]))+s}function v(e){if(0===e.length)return p(e);var t=String.fromCodePoint(e.codePointAt(0));if(!X.isIdStartChar(t))return p(e);for(var n=t.length;n<e.length;n++)if(!X.isIdContinueChar(String.fromCodePoint(e.codePointAt(n))))return p(e);return e}}}}()},74793:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const i=n(9669),o=n(33597),u=n(45198);t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant",Function:"function"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(e){return{cancelFineTune:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("cancelFineTune","fineTuneId",t);const r="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),createAnswer:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createAnswer","createAnswerRequest",t);const r=new URL("/answers",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createChatCompletion:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createChatCompletion","createChatCompletionRequest",t);const r=new URL("/chat/completions",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createClassification:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createClassification","createClassificationRequest",t);const r=new URL("/classifications",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createCompletion:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createCompletion","createCompletionRequest",t);const r=new URL("/completions",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createEdit:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createEdit","createEditRequest",t);const r=new URL("/edits",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createEmbedding:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createEmbedding","createEmbeddingRequest",t);const r=new URL("/embeddings",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createFile:(t,n,i={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createFile","file",t),o.assertParamExists("createFile","purpose",n);const r=new URL("/files",o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},u),i),s={},c=new(e&&e.formDataCtor||FormData);void 0!==t&&c.append("file",t),void 0!==n&&c.append("purpose",n),s["Content-Type"]="multipart/form-data",o.setSearchParams(r,{});let l=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign(Object.assign({},s),c.getHeaders()),l),i.headers),a.data=c,{url:o.toPathString(r),options:a}})),createFineTune:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createFineTune","createFineTuneRequest",t);const r=new URL("/fine-tunes",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createImage:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createImage","createImageRequest",t);const r=new URL("/images/generations",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createImageEdit:(t,n,i,u,a,s,c,l={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createImageEdit","image",t),o.assertParamExists("createImageEdit","prompt",n);const r=new URL("/images/edits",o.DUMMY_BASE_URL);let f;e&&(f=e.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),l),d={},p=new(e&&e.formDataCtor||FormData);void 0!==t&&p.append("image",t),void 0!==i&&p.append("mask",i),void 0!==n&&p.append("prompt",n),void 0!==u&&p.append("n",u),void 0!==a&&p.append("size",a),void 0!==s&&p.append("response_format",s),void 0!==c&&p.append("user",c),d["Content-Type"]="multipart/form-data",o.setSearchParams(r,{});let v=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign(Object.assign({},d),p.getHeaders()),v),l.headers),h.data=p,{url:o.toPathString(r),options:h}})),createImageVariation:(t,n,i,u,a,s={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createImageVariation","image",t);const r=new URL("/images/variations",o.DUMMY_BASE_URL);let c;e&&(c=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},c),s),f={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("image",t),void 0!==n&&h.append("n",n),void 0!==i&&h.append("size",i),void 0!==u&&h.append("response_format",u),void 0!==a&&h.append("user",a),f["Content-Type"]="multipart/form-data",o.setSearchParams(r,{});let d=c&&c.headers?c.headers:{};return l.headers=Object.assign(Object.assign(Object.assign(Object.assign({},f),h.getHeaders()),d),s.headers),l.data=h,{url:o.toPathString(r),options:l}})),createModeration:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createModeration","createModerationRequest",t);const r=new URL("/moderations",o.DUMMY_BASE_URL);let i;e&&(i=e.baseOptions);const u=Object.assign(Object.assign({method:"POST"},i),n),a={"Content-Type":"application/json"};o.setSearchParams(r,{});let s=i&&i.headers?i.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},a),s),n.headers),u.data=o.serializeDataIfNeeded(t,u,e),{url:o.toPathString(r),options:u}})),createSearch:(t,n,i={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createSearch","engineId",t),o.assertParamExists("createSearch","createSearchRequest",n);const r="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(t))),u=new URL(r,o.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},a),i),c={"Content-Type":"application/json"};o.setSearchParams(u,{});let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},c),l),i.headers),s.data=o.serializeDataIfNeeded(n,s,e),{url:o.toPathString(u),options:s}})),createTranscription:(t,n,i,u,a,s,c={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createTranscription","file",t),o.assertParamExists("createTranscription","model",n);const r=new URL("/audio/transcriptions",o.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const f=Object.assign(Object.assign({method:"POST"},l),c),h={},d=new(e&&e.formDataCtor||FormData);void 0!==t&&d.append("file",t),void 0!==n&&d.append("model",n),void 0!==i&&d.append("prompt",i),void 0!==u&&d.append("response_format",u),void 0!==a&&d.append("temperature",a),void 0!==s&&d.append("language",s),h["Content-Type"]="multipart/form-data",o.setSearchParams(r,{});let p=l&&l.headers?l.headers:{};return f.headers=Object.assign(Object.assign(Object.assign(Object.assign({},h),d.getHeaders()),p),c.headers),f.data=d,{url:o.toPathString(r),options:f}})),createTranslation:(t,n,i,u,a,s={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("createTranslation","file",t),o.assertParamExists("createTranslation","model",n);const r=new URL("/audio/translations",o.DUMMY_BASE_URL);let c;e&&(c=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},c),s),f={},h=new(e&&e.formDataCtor||FormData);void 0!==t&&h.append("file",t),void 0!==n&&h.append("model",n),void 0!==i&&h.append("prompt",i),void 0!==u&&h.append("response_format",u),void 0!==a&&h.append("temperature",a),f["Content-Type"]="multipart/form-data",o.setSearchParams(r,{});let d=c&&c.headers?c.headers:{};return l.headers=Object.assign(Object.assign(Object.assign(Object.assign({},f),h.getHeaders()),d),s.headers),l.data=h,{url:o.toPathString(r),options:l}})),deleteFile:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("deleteFile","fileId",t);const r="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"DELETE"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),deleteModel:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("deleteModel","model",t);const r="/models/{model}".replace("{model}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"DELETE"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),downloadFile:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("downloadFile","fileId",t);const r="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),listEngines:(t={})=>r(this,void 0,void 0,(function*(){const n=new URL("/engines",o.DUMMY_BASE_URL);let r;e&&(r=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},r),t);o.setSearchParams(n,{});let u=r&&r.headers?r.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),u),t.headers),{url:o.toPathString(n),options:i}})),listFiles:(t={})=>r(this,void 0,void 0,(function*(){const n=new URL("/files",o.DUMMY_BASE_URL);let r;e&&(r=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},r),t);o.setSearchParams(n,{});let u=r&&r.headers?r.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),u),t.headers),{url:o.toPathString(n),options:i}})),listFineTuneEvents:(t,n,i={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("listFineTuneEvents","fineTuneId",t);const r="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(t))),u=new URL(r,o.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},a),i),c={};void 0!==n&&(c.stream=n),o.setSearchParams(u,c);let l=a&&a.headers?a.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),l),i.headers),{url:o.toPathString(u),options:s}})),listFineTunes:(t={})=>r(this,void 0,void 0,(function*(){const n=new URL("/fine-tunes",o.DUMMY_BASE_URL);let r;e&&(r=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},r),t);o.setSearchParams(n,{});let u=r&&r.headers?r.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),u),t.headers),{url:o.toPathString(n),options:i}})),listModels:(t={})=>r(this,void 0,void 0,(function*(){const n=new URL("/models",o.DUMMY_BASE_URL);let r;e&&(r=e.baseOptions);const i=Object.assign(Object.assign({method:"GET"},r),t);o.setSearchParams(n,{});let u=r&&r.headers?r.headers:{};return i.headers=Object.assign(Object.assign(Object.assign({},{}),u),t.headers),{url:o.toPathString(n),options:i}})),retrieveEngine:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("retrieveEngine","engineId",t);const r="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),retrieveFile:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("retrieveFile","fileId",t);const r="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),retrieveFineTune:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("retrieveFineTune","fineTuneId",t);const r="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}})),retrieveModel:(t,n={})=>r(this,void 0,void 0,(function*(){o.assertParamExists("retrieveModel","model",t);const r="/models/{model}".replace("{model}",encodeURIComponent(String(t))),i=new URL(r,o.DUMMY_BASE_URL);let u;e&&(u=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},u),n);o.setSearchParams(i,{});let s=u&&u.headers?u.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),s),n.headers),{url:o.toPathString(i),options:a}}))}},t.OpenAIApiFp=function(e){const n=t.OpenAIApiAxiosParamCreator(e);return{cancelFineTune(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.cancelFineTune(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createAnswer(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createAnswer(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createChatCompletion(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createChatCompletion(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createClassification(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createClassification(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createCompletion(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createCompletion(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createEdit(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createEdit(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createEmbedding(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createEmbedding(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createFile(t,a,s){return r(this,void 0,void 0,(function*(){const r=yield n.createFile(t,a,s);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createFineTune(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createFineTune(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createImage(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createImage(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createImageEdit(t,a,s,c,l,f,h,d){return r(this,void 0,void 0,(function*(){const r=yield n.createImageEdit(t,a,s,c,l,f,h,d);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createImageVariation(t,a,s,c,l,f){return r(this,void 0,void 0,(function*(){const r=yield n.createImageVariation(t,a,s,c,l,f);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createModeration(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.createModeration(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createSearch(t,a,s){return r(this,void 0,void 0,(function*(){const r=yield n.createSearch(t,a,s);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createTranscription(t,a,s,c,l,f,h){return r(this,void 0,void 0,(function*(){const r=yield n.createTranscription(t,a,s,c,l,f,h);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},createTranslation(t,a,s,c,l,f){return r(this,void 0,void 0,(function*(){const r=yield n.createTranslation(t,a,s,c,l,f);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},deleteFile(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.deleteFile(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},deleteModel(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.deleteModel(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},downloadFile(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.downloadFile(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},listEngines(t){return r(this,void 0,void 0,(function*(){const r=yield n.listEngines(t);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},listFiles(t){return r(this,void 0,void 0,(function*(){const r=yield n.listFiles(t);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},listFineTuneEvents(t,a,s){return r(this,void 0,void 0,(function*(){const r=yield n.listFineTuneEvents(t,a,s);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},listFineTunes(t){return r(this,void 0,void 0,(function*(){const r=yield n.listFineTunes(t);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},listModels(t){return r(this,void 0,void 0,(function*(){const r=yield n.listModels(t);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},retrieveEngine(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.retrieveEngine(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},retrieveFile(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.retrieveFile(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},retrieveFineTune(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.retrieveFineTune(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))},retrieveModel(t,a){return r(this,void 0,void 0,(function*(){const r=yield n.retrieveModel(t,a);return o.createRequestFunction(r,i.default,u.BASE_PATH,e)}))}}},t.OpenAIApiFactory=function(e,n,r){const i=t.OpenAIApiFp(e);return{cancelFineTune:(e,t)=>i.cancelFineTune(e,t).then((e=>e(r,n))),createAnswer:(e,t)=>i.createAnswer(e,t).then((e=>e(r,n))),createChatCompletion:(e,t)=>i.createChatCompletion(e,t).then((e=>e(r,n))),createClassification:(e,t)=>i.createClassification(e,t).then((e=>e(r,n))),createCompletion:(e,t)=>i.createCompletion(e,t).then((e=>e(r,n))),createEdit:(e,t)=>i.createEdit(e,t).then((e=>e(r,n))),createEmbedding:(e,t)=>i.createEmbedding(e,t).then((e=>e(r,n))),createFile:(e,t,o)=>i.createFile(e,t,o).then((e=>e(r,n))),createFineTune:(e,t)=>i.createFineTune(e,t).then((e=>e(r,n))),createImage:(e,t)=>i.createImage(e,t).then((e=>e(r,n))),createImageEdit:(e,t,o,u,a,s,c,l)=>i.createImageEdit(e,t,o,u,a,s,c,l).then((e=>e(r,n))),createImageVariation:(e,t,o,u,a,s)=>i.createImageVariation(e,t,o,u,a,s).then((e=>e(r,n))),createModeration:(e,t)=>i.createModeration(e,t).then((e=>e(r,n))),createSearch:(e,t,o)=>i.createSearch(e,t,o).then((e=>e(r,n))),createTranscription:(e,t,o,u,a,s,c)=>i.createTranscription(e,t,o,u,a,s,c).then((e=>e(r,n))),createTranslation:(e,t,o,u,a,s)=>i.createTranslation(e,t,o,u,a,s).then((e=>e(r,n))),deleteFile:(e,t)=>i.deleteFile(e,t).then((e=>e(r,n))),deleteModel:(e,t)=>i.deleteModel(e,t).then((e=>e(r,n))),downloadFile:(e,t)=>i.downloadFile(e,t).then((e=>e(r,n))),listEngines:e=>i.listEngines(e).then((e=>e(r,n))),listFiles:e=>i.listFiles(e).then((e=>e(r,n))),listFineTuneEvents:(e,t,o)=>i.listFineTuneEvents(e,t,o).then((e=>e(r,n))),listFineTunes:e=>i.listFineTunes(e).then((e=>e(r,n))),listModels:e=>i.listModels(e).then((e=>e(r,n))),retrieveEngine:(e,t)=>i.retrieveEngine(e,t).then((e=>e(r,n))),retrieveFile:(e,t)=>i.retrieveFile(e,t).then((e=>e(r,n))),retrieveFineTune:(e,t)=>i.retrieveFineTune(e,t).then((e=>e(r,n))),retrieveModel:(e,t)=>i.retrieveModel(e,t).then((e=>e(r,n)))}};class a extends u.BaseAPI{cancelFineTune(e,n){return t.OpenAIApiFp(this.configuration).cancelFineTune(e,n).then((e=>e(this.axios,this.basePath)))}createAnswer(e,n){return t.OpenAIApiFp(this.configuration).createAnswer(e,n).then((e=>e(this.axios,this.basePath)))}createChatCompletion(e,n){return t.OpenAIApiFp(this.configuration).createChatCompletion(e,n).then((e=>e(this.axios,this.basePath)))}createClassification(e,n){return t.OpenAIApiFp(this.configuration).createClassification(e,n).then((e=>e(this.axios,this.basePath)))}createCompletion(e,n){return t.OpenAIApiFp(this.configuration).createCompletion(e,n).then((e=>e(this.axios,this.basePath)))}createEdit(e,n){return t.OpenAIApiFp(this.configuration).createEdit(e,n).then((e=>e(this.axios,this.basePath)))}createEmbedding(e,n){return t.OpenAIApiFp(this.configuration).createEmbedding(e,n).then((e=>e(this.axios,this.basePath)))}createFile(e,n,r){return t.OpenAIApiFp(this.configuration).createFile(e,n,r).then((e=>e(this.axios,this.basePath)))}createFineTune(e,n){return t.OpenAIApiFp(this.configuration).createFineTune(e,n).then((e=>e(this.axios,this.basePath)))}createImage(e,n){return t.OpenAIApiFp(this.configuration).createImage(e,n).then((e=>e(this.axios,this.basePath)))}createImageEdit(e,n,r,i,o,u,a,s){return t.OpenAIApiFp(this.configuration).createImageEdit(e,n,r,i,o,u,a,s).then((e=>e(this.axios,this.basePath)))}createImageVariation(e,n,r,i,o,u){return t.OpenAIApiFp(this.configuration).createImageVariation(e,n,r,i,o,u).then((e=>e(this.axios,this.basePath)))}createModeration(e,n){return t.OpenAIApiFp(this.configuration).createModeration(e,n).then((e=>e(this.axios,this.basePath)))}createSearch(e,n,r){return t.OpenAIApiFp(this.configuration).createSearch(e,n,r).then((e=>e(this.axios,this.basePath)))}createTranscription(e,n,r,i,o,u,a){return t.OpenAIApiFp(this.configuration).createTranscription(e,n,r,i,o,u,a).then((e=>e(this.axios,this.basePath)))}createTranslation(e,n,r,i,o,u){return t.OpenAIApiFp(this.configuration).createTranslation(e,n,r,i,o,u).then((e=>e(this.axios,this.basePath)))}deleteFile(e,n){return t.OpenAIApiFp(this.configuration).deleteFile(e,n).then((e=>e(this.axios,this.basePath)))}deleteModel(e,n){return t.OpenAIApiFp(this.configuration).deleteModel(e,n).then((e=>e(this.axios,this.basePath)))}downloadFile(e,n){return t.OpenAIApiFp(this.configuration).downloadFile(e,n).then((e=>e(this.axios,this.basePath)))}listEngines(e){return t.OpenAIApiFp(this.configuration).listEngines(e).then((e=>e(this.axios,this.basePath)))}listFiles(e){return t.OpenAIApiFp(this.configuration).listFiles(e).then((e=>e(this.axios,this.basePath)))}listFineTuneEvents(e,n,r){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(e,n,r).then((e=>e(this.axios,this.basePath)))}listFineTunes(e){return t.OpenAIApiFp(this.configuration).listFineTunes(e).then((e=>e(this.axios,this.basePath)))}listModels(e){return t.OpenAIApiFp(this.configuration).listModels(e).then((e=>e(this.axios,this.basePath)))}retrieveEngine(e,n){return t.OpenAIApiFp(this.configuration).retrieveEngine(e,n).then((e=>e(this.axios,this.basePath)))}retrieveFile(e,n){return t.OpenAIApiFp(this.configuration).retrieveFile(e,n).then((e=>e(this.axios,this.basePath)))}retrieveFineTune(e,n){return t.OpenAIApiFp(this.configuration).retrieveFineTune(e,n).then((e=>e(this.axios,this.basePath)))}retrieveModel(e,n){return t.OpenAIApiFp(this.configuration).retrieveModel(e,n).then((e=>e(this.axios,this.basePath)))}}t.OpenAIApi=a},45198:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const r=n(9669);t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},t.BaseAPI=class{constructor(e,n=t.BASE_PATH,i=r.default){this.basePath=n,this.axios=i,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}};class i extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}t.RequiredError=i},33597:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestFunction=t.toPathString=t.serializeDataIfNeeded=t.setSearchParams=t.setOAuthToObject=t.setBearerAuthToObject=t.setBasicAuthToObject=t.setApiKeyToObject=t.assertParamExists=t.DUMMY_BASE_URL=void 0;const i=n(45198);function o(e,t,n=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach((t=>o(e,t,n))):Object.keys(t).forEach((r=>o(e,t[r],`${n}${""!==n?".":""}${r}`))):e.has(n)?e.append(n,t):e.set(n,t))}t.DUMMY_BASE_URL="https://example.com",t.assertParamExists=function(e,t,n){if(null==n)throw new i.RequiredError(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},t.setApiKeyToObject=function(e,t,n){return r(this,void 0,void 0,(function*(){if(n&&n.apiKey){const r="function"==typeof n.apiKey?yield n.apiKey(t):yield n.apiKey;e[t]=r}}))},t.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},t.setBearerAuthToObject=function(e,t){return r(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},t.setOAuthToObject=function(e,t,n,i){return r(this,void 0,void 0,(function*(){if(i&&i.accessToken){const r="function"==typeof i.accessToken?yield i.accessToken(t,n):yield i.accessToken;e.Authorization="Bearer "+r}}))},t.setSearchParams=function(e,...t){const n=new URLSearchParams(e.search);o(n,t),e.search=n.toString()},t.serializeDataIfNeeded=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},t.toPathString=function(e){return e.pathname+e.search+e.hash},t.createRequestFunction=function(e,t,n,r){return(i=t,o=n)=>{const u=Object.assign(Object.assign({},e.options),{url:((null==r?void 0:r.basePath)||o)+e.url});return i.request(u)}}},46577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;const r=n(62811);t.Configuration=class{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${r.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=n(6230))}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}}},36485:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(74793),t),i(n(46577),t)},72408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function b(){}function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var D=g.prototype=new b;D.constructor=g,v(D,y.prototype),D.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,x={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},u=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(u=""+t.key),t)E.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===o[i]&&(o[i]=s[i]);return{$$typeof:n,type:e,key:u,ref:a,props:o,_owner:x.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var F=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,i,o,u){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s=!1;if(null===e)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return u=u(s=e),e=""===o?"."+O(s,0):o,w(u)?(i="",null!=e&&(i=e.replace(F,"$&/")+"/"),S(u,t,i,"",(function(e){return e}))):null!=u&&(C(u)&&(u=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(u,i+(!u.key||s&&s.key===u.key?"":(""+u.key).replace(F,"$&/")+"/")+e)),t.push(u)),1;if(s=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var l=o+O(a=e[c],c);s+=S(a,t,i,l,u)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(a=e.next()).done;)s+=S(a=a.value,t,i,l=o+O(a,c++),u);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},k={transition:null},T={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:k,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=u,t.PureComponent=g,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,u=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)E.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:o,ref:u,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.2.0"},67294:(e,t,n)=>{"use strict";e.exports=n(72408)},72107:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ArgumentOutOfRangeError:()=>ce,AsyncSubject:()=>w,BehaviorSubject:()=>b.X,ConnectableObservable:()=>c,EMPTY:()=>J.E,EmptyError:()=>oe.K,NEVER:()=>ot,NotFoundError:()=>le,Notification:()=>Q,NotificationKind:()=>S,ObjectUnsubscribedError:()=>fe.N,Observable:()=>r.y,ReplaySubject:()=>D,Scheduler:()=>T,SequenceError:()=>he,Subject:()=>y.x,Subscriber:()=>$.Lv,Subscription:()=>o.w0,TimeoutError:()=>me,UnsubscriptionError:()=>ge.B,VirtualAction:()=>X,VirtualTimeScheduler:()=>V,animationFrame:()=>G,animationFrameScheduler:()=>z,animationFrames:()=>d,asap:()=>L,asapScheduler:()=>I,async:()=>N,asyncScheduler:()=>M,audit:()=>wt,auditTime:()=>Et,bindCallback:()=>Fe,bindNodeCallback:()=>Oe,buffer:()=>xt,bufferCount:()=>_t,bufferTime:()=>At,bufferToggle:()=>Ct,bufferWhen:()=>Ft,catchError:()=>Ot.K,combineAll:()=>jt,combineLatest:()=>Le,combineLatestAll:()=>Bt,combineLatestWith:()=>Tt,concat:()=>Ue.z,concatAll:()=>Rt.u,concatMap:()=>It.b,concatMapTo:()=>Lt,concatWith:()=>Nt,config:()=>Dt.v,connect:()=>qt,connectable:()=>He,count:()=>Ht,debounce:()=>zt,debounceTime:()=>Gt,defaultIfEmpty:()=>Vt,defer:()=>qe.P,delay:()=>Wt,delayWhen:()=>Yt,dematerialize:()=>Zt,distinct:()=>Qt,distinctUntilChanged:()=>en.x,distinctUntilKeyChanged:()=>tn,elementAt:()=>on,empty:()=>J.c,endWith:()=>un,every:()=>an,exhaust:()=>ln,exhaustAll:()=>cn,exhaustMap:()=>sn,expand:()=>hn,filter:()=>ht.h,finalize:()=>dn.x,find:()=>pn,findIndex:()=>mn,first:()=>yn,firstValueFrom:()=>ae.z,flatMap:()=>An,forkJoin:()=>ze,from:()=>Te.D,fromEvent:()=>Ye,fromEventPattern:()=>Ze,generate:()=>et,groupBy:()=>bn,identity:()=>re.y,ignoreElements:()=>$t,iif:()=>tt,interval:()=>rt,isEmpty:()=>gn,isObservable:()=>ie.b,last:()=>wn,lastValueFrom:()=>ue,map:()=>Ee.U,mapTo:()=>Jt,materialize:()=>En,max:()=>xn,merge:()=>it.T,mergeAll:()=>_n.J,mergeMap:()=>Ge.z,mergeMapTo:()=>Cn,mergeScan:()=>Fn,mergeWith:()=>Sn,min:()=>Pn,multicast:()=>Bn,never:()=>ut,noop:()=>ne.Z,observable:()=>l.L,observeOn:()=>Ae.Q,of:()=>Y.of,onErrorResumeNext:()=>ct,onErrorResumeNextWith:()=>jn,pairs:()=>lt,pairwise:()=>kn,partition:()=>dt,pipe:()=>te.z,pluck:()=>Tn,publish:()=>Rn,publishBehavior:()=>In,publishLast:()=>Ln,publishReplay:()=>Mn,queue:()=>K,queueScheduler:()=>q,race:()=>pt,raceWith:()=>Nn,range:()=>mt,reduce:()=>Kt.u,refCount:()=>s,repeat:()=>Un,repeatWhen:()=>qn,retry:()=>Kn,retryWhen:()=>Hn,sample:()=>zn,sampleTime:()=>Gn,scan:()=>Vn.R,scheduled:()=>gt.x,sequenceEqual:()=>Xn,share:()=>$n.B,shareReplay:()=>Jn,single:()=>Yn,skip:()=>Wn,skipLast:()=>Zn,skipUntil:()=>Qn,skipWhile:()=>er,startWith:()=>tr,subscribeOn:()=>we.R,switchAll:()=>rr,switchMap:()=>nr.w,switchMapTo:()=>ir,switchScan:()=>or,take:()=>Xt,takeLast:()=>Dn,takeUntil:()=>ur,takeWhile:()=>ar,tap:()=>sr,throttle:()=>cr,throttleTime:()=>lr,throwError:()=>W._,throwIfEmpty:()=>nn,timeInterval:()=>fr,timeout:()=>ye,timeoutWith:()=>dr,timer:()=>nt,timestamp:()=>pr,toArray:()=>St.q,using:()=>yt,window:()=>vr,windowCount:()=>mr,windowTime:()=>yr,windowToggle:()=>br,windowWhen:()=>gr,withLatestFrom:()=>Dr,zip:()=>bt,zipAll:()=>wr,zipWith:()=>xr});var r=n(80230),i=n(97582),o=n(70204),u=n(96798),a=n(2566);function s(){return(0,u.e)((function(e,t){var n=null;e._refCount++;var r=(0,a.x)(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,i=n;n=null,!r||i&&r!==i||r.unsubscribe(),t.unsubscribe()}}));e.subscribe(r),r.closed||(n=e.connect())}))}var c=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._subject=null,r._refCount=0,r._connection=null,(0,u.A)(t)&&(r.lift=t.lift),r}return(0,i.ZT)(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new o.w0;var n=this.getSubject();t.add(this.source.subscribe((0,a.x)(n,void 0,(function(){e._teardown(),n.complete()}),(function(t){e._teardown(),n.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=o.w0.EMPTY)}return t},t.prototype.refCount=function(){return s()(this)},t}(r.y),l=n(46766),f={now:function(){return(f.delegate||performance).now()},delegate:void 0},h={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,r=h.delegate;r&&(t=r.requestAnimationFrame,n=r.cancelAnimationFrame);var i=t((function(t){n=void 0,e(t)}));return new o.w0((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=h.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,(0,i.ev)([],(0,i.CR)(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=h.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,(0,i.ev)([],(0,i.CR)(e)))},delegate:void 0};function d(e){return e?p(e):m}function p(e){return new r.y((function(t){var n=e||f,r=n.now(),i=0,o=function(){t.closed||(i=h.requestAnimationFrame((function(u){i=0;var a=n.now();t.next({timestamp:e?a:u,elapsed:a-r}),o()})))};return o(),function(){i&&h.cancelAnimationFrame(i)}}))}var v,m=p(),y=n(9248),b=n(86515),g={now:function(){return(g.delegate||Date).now()},delegate:void 0},D=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=g);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return(0,i.ZT)(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,u=n._timestampProvider,a=n._windowTime;r||(i.push(t),!o&&i.push(u.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var u=n.now(),a=0,s=1;s<r.length&&r[s]<=u;s+=2)a=s;a&&r.splice(0,a+1)}},t}(y.x),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return(0,i.ZT)(t,e),t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t._hasValue,i=t._value,o=t.thrownError,u=t.isStopped,a=t._isComplete;n?e.error(o):(u||a)&&(r&&e.next(i),e.complete())},t.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},t.prototype.complete=function(){var t=this,n=t._hasValue,r=t._value;t._isComplete||(this._isComplete=!0,n&&e.prototype.next.call(this,r),e.prototype.complete.call(this))},t}(y.x),E=function(e){function t(t,n){return e.call(this)||this}return(0,i.ZT)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(o.w0),x={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=x.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,(0,i.ev)([e,t],(0,i.CR)(n))):setInterval.apply(void 0,(0,i.ev)([e,t],(0,i.CR)(n)))},clearInterval:function(e){var t=x.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},_=n(3699),A=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return(0,i.ZT)(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),x.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&x.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,(0,_.P)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(E),C=1,F={};function O(e){return e in F&&(delete F[e],!0)}var S,P=function(e){var t=C++;return F[t]=!0,v||(v=Promise.resolve()),v.then((function(){return O(t)&&e()})),t},B=function(e){O(e)},j={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=j.delegate;return((null==n?void 0:n.setImmediate)||P).apply(void 0,(0,i.ev)([],(0,i.CR)(e)))},clearImmediate:function(e){var t=j.delegate;return((null==t?void 0:t.clearImmediate)||B)(e)},delegate:void 0},k=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,i.ZT)(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=j.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(j.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},t}(A),T=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=g.now,e}(),R=function(e){function t(t,n){void 0===n&&(n=T.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return(0,i.ZT)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(T),I=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(R))(k),L=I,M=new R(A),N=M,U=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,i.ZT)(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.flush(this),0)},t}(A),q=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t}(R))(U),K=q,H=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return(0,i.ZT)(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=h.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,r){var i;if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o=t.actions;null!=n&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==n&&(h.cancelAnimationFrame(n),t._scheduled=void 0)},t}(A),z=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(R))(H),G=z,V=function(e){function t(t,n){void 0===t&&(t=X),void 0===n&&(n=1/0);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return(0,i.ZT)(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(R),X=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return(0,i.ZT)(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}return o.w0.EMPTY},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(A),$=n(43652),J=n(1545),Y=n(32817),W=n(83610),Z=n(58474);!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(S||(S={}));var Q=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){return ee(this,e)},e.prototype.do=function(e,t,n){var r=this,i=r.kind,o=r.value,u=r.error;return"N"===i?null==e?void 0:e(o):"E"===i?null==t?void 0:t(u):null==n?void 0:n()},e.prototype.accept=function(e,t,n){var r;return(0,Z.m)(null===(r=e)||void 0===r?void 0:r.next)?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this,t=e.kind,n=e.value,r=e.error,i="N"===t?(0,Y.of)(n):"E"===t?(0,W._)((function(){return r})):"C"===t?J.E:0;if(!i)throw new TypeError("Unexpected notification kind "+t);return i},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();function ee(e,t){var n,r,i,o=e,u=o.kind,a=o.value,s=o.error;if("string"!=typeof u)throw new TypeError('Invalid notification, missing "kind"');"N"===u?null===(n=t.next)||void 0===n||n.call(t,a):"E"===u?null===(r=t.error)||void 0===r||r.call(t,s):null===(i=t.complete)||void 0===i||i.call(t)}var te=n(92749),ne=n(22967),re=n(90278),ie=n(9141),oe=n(18084);function ue(e,t){var n="object"==typeof t;return new Promise((function(r,i){var o,u=!1;e.subscribe({next:function(e){o=e,u=!0},error:i,complete:function(){u?r(o):n?r(t.defaultValue):i(new oe.K)}})}))}var ae=n(1718),se=n(1819),ce=(0,se.d)((function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})),le=(0,se.d)((function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}})),fe=n(9825),he=(0,se.d)((function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}));function de(e){return e instanceof Date&&!isNaN(e)}var pe=n(87878),ve=n(47845),me=(0,se.d)((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function ye(e,t){var n=de(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,s=void 0===o?be:o,c=n.scheduler,l=void 0===c?null!=t?t:M:c,f=n.meta,h=void 0===f?null:f;if(null==r&&null==i)throw new TypeError("No timeout provided.");return(0,u.e)((function(e,t){var n,o,u=null,c=0,f=function(e){o=(0,ve.f)(t,l,(function(){try{n.unsubscribe(),(0,pe.Xf)(s({meta:h,lastValue:u,seen:c})).subscribe(t)}catch(e){t.error(e)}}),e)};n=e.subscribe((0,a.x)(t,(function(e){null==o||o.unsubscribe(),c++,t.next(u=e),i>0&&f(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),u=null}))),!c&&f(null!=r?"number"==typeof r?r:+r-l.now():i)}))}function be(e){throw new me(e)}var ge=n(25948),De=n(64865),we=n(58720),Ee=n(29127),xe=Array.isArray;function _e(e){return(0,Ee.U)((function(t){return function(e,t){return xe(t)?e.apply(void 0,(0,i.ev)([],(0,i.CR)(t))):e(t)}(e,t)}))}var Ae=n(29526);function Ce(e,t,n,o){if(n){if(!(0,De.K)(n))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ce(e,t,o).apply(this,r).pipe(_e(n))};o=n}return o?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Ce(e,t).apply(this,n).pipe((0,we.R)(o),(0,Ae.Q)(o))}:function(){for(var n=this,o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var a=new w,s=!0;return new r.y((function(r){var u=a.subscribe(r);if(s){s=!1;var c=!1,l=!1;t.apply(n,(0,i.ev)((0,i.ev)([],(0,i.CR)(o)),[function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var r=t.shift();if(null!=r)return void a.error(r)}a.next(1<t.length?t:t[0]),l=!0,c&&a.complete()}])),l&&a.complete(),c=!0}return u}))}}function Fe(e,t,n){return Ce(!1,e,t,n)}function Oe(e,t,n){return Ce(!0,e,t,n)}var Se=Array.isArray,Pe=Object.getPrototypeOf,Be=Object.prototype,je=Object.keys;function ke(e){if(1===e.length){var t=e[0];if(Se(t))return{args:t,keys:null};if((r=t)&&"object"==typeof r&&Pe(r)===Be){var n=je(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}var Te=n(40052),Re=n(22457);function Ie(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.yG)(e),i=(0,Re.jO)(e),o=ke(e),u=o.args,a=o.keys;if(0===u.length)return(0,Te.D)([],n);var s=new r.y(Me(u,n,a?function(e){return Ie(a,e)}:re.y));return i?s.pipe(_e(i)):s}function Me(e,t,n){return void 0===n&&(n=re.y),function(r){Ne(t,(function(){for(var i=e.length,o=new Array(i),u=i,s=i,c=function(i){Ne(t,(function(){var c=(0,Te.D)(e[i],t),l=!1;c.subscribe((0,a.x)(r,(function(e){o[i]=e,l||(l=!0,s--),s||r.next(n(o.slice()))}),(function(){--u||r.complete()})))}),r)},l=0;l<i;l++)c(l)}),r)}}function Ne(e,t,n){e?(0,ve.f)(n,e,t):t()}var Ue=n(26362),qe=n(19917),Ke={connector:function(){return new y.x},resetOnDisconnect:!0};function He(e,t){void 0===t&&(t=Ke);var n=null,i=t.connector,o=t.resetOnDisconnect,u=void 0===o||o,a=i(),s=new r.y((function(e){return a.subscribe(e)}));return s.connect=function(){return n&&!n.closed||(n=(0,qe.P)((function(){return e})).subscribe(a),u&&n.add((function(){return a=i()}))),n},s}function ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.jO)(e),i=ke(e),o=i.args,u=i.keys,s=new r.y((function(e){var t=o.length;if(t)for(var n=new Array(t),r=t,i=t,s=function(t){var s=!1;(0,pe.Xf)(o[t]).subscribe((0,a.x)(e,(function(e){s||(s=!0,i--),n[t]=e}),(function(){return r--}),void 0,(function(){r&&s||(i||e.next(u?Ie(u,n):n),e.complete())})))},c=0;c<t;c++)s(c);else e.complete()}));return n?s.pipe(_e(n)):s}var Ge=n(43994),Ve=n(45685),Xe=["addListener","removeListener"],$e=["addEventListener","removeEventListener"],Je=["on","off"];function Ye(e,t,n,o){if((0,Z.m)(n)&&(o=n,n=void 0),o)return Ye(e,t,n).pipe(_e(o));var u=(0,i.CR)(function(e){return(0,Z.m)(e.addEventListener)&&(0,Z.m)(e.removeEventListener)}(e)?$e.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return(0,Z.m)(e.addListener)&&(0,Z.m)(e.removeListener)}(e)?Xe.map(We(e,t)):function(e){return(0,Z.m)(e.on)&&(0,Z.m)(e.off)}(e)?Je.map(We(e,t)):[],2),a=u[0],s=u[1];if(!a&&(0,Ve.z)(e))return(0,Ge.z)((function(e){return Ye(e,t,n)}))((0,pe.Xf)(e));if(!a)throw new TypeError("Invalid event target");return new r.y((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return a(t),function(){return s(t)}}))}function We(e,t){return function(n){return function(r){return e[n](t,r)}}}function Ze(e,t,n){return n?Ze(e,t).pipe(_e(n)):new r.y((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)},i=e(r);return(0,Z.m)(t)?function(){return t(r,i)}:void 0}))}var Qe=n(18077);function et(e,t,n,r,o){var u,a,s,c;function l(){var e;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:e=c,r.label=1;case 1:return t&&!t(e)?[3,4]:[4,s(e)];case 2:r.sent(),r.label=3;case 3:return e=n(e),[3,1];case 4:return[2]}}))}return 1===arguments.length?(c=(u=e).initialState,t=u.condition,n=u.iterate,a=u.resultSelector,s=void 0===a?re.y:a,o=u.scheduler):(c=e,!r||(0,De.K)(r)?(s=re.y,o=r):s=r),(0,qe.P)(o?function(){return(0,Qe.Q)(l(),o)}:l)}function tt(e,t,n){return(0,qe.P)((function(){return e()?t:n}))}function nt(e,t,n){void 0===e&&(e=0),void 0===n&&(n=N);var i=-1;return null!=t&&((0,De.K)(t)?n=t:i=t),new r.y((function(t){var r=de(e)?+e-n.now():e;r<0&&(r=0);var o=0;return n.schedule((function(){t.closed||(t.next(o++),0<=i?this.schedule(void 0,i):t.complete())}),r)}))}function rt(e,t){return void 0===e&&(e=0),void 0===t&&(t=M),e<0&&(e=0),nt(e,e,t)}var it=n(23071),ot=new r.y(ne.Z);function ut(){return ot}var at=Array.isArray;function st(e){return 1===e.length&&at(e[0])?e[0]:e}function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=st(e);return new r.y((function(e){var t=0,r=function(){if(t<n.length){var i=void 0;try{i=(0,pe.Xf)(n[t++])}catch(e){return void r()}var o=new a.Q(e,void 0,ne.Z,ne.Z);i.subscribe(o),o.add(r)}else e.complete()};r()}))}function lt(e,t){return(0,Te.D)(Object.entries(e),t)}function ft(e,t){return function(n,r){return!e.call(t,n,r)}}var ht=n(94975);function dt(e,t,n){return[(0,ht.h)(t,n)((0,pe.Xf)(e)),(0,ht.h)(ft(t,n))((0,pe.Xf)(e))]}function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===(e=st(e)).length?(0,pe.Xf)(e[0]):new r.y(vt(e))}function vt(e){return function(t){for(var n=[],r=function(r){n.push((0,pe.Xf)(e[r]).subscribe((0,a.x)(t,(function(e){if(n){for(var i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(e)}))))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}function mt(e,t,n){if(null==t&&(t=e,e=0),t<=0)return J.E;var i=t+e;return new r.y(n?function(t){var r=e;return n.schedule((function(){r<i?(t.next(r++),this.schedule()):t.complete()}))}:function(t){for(var n=e;n<i&&!t.closed;)t.next(n++);t.complete()})}function yt(e,t){return new r.y((function(n){var r=e(),i=t(r);return(i?(0,pe.Xf)(i):J.E).subscribe(n),function(){r&&r.unsubscribe()}}))}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.jO)(e),o=st(e);return o.length?new r.y((function(e){var t=o.map((function(){return[]})),r=o.map((function(){return!1}));e.add((function(){t=r=null}));for(var u=function(u){(0,pe.Xf)(o[u]).subscribe((0,a.x)(e,(function(o){if(t[u].push(o),t.every((function(e){return e.length}))){var a=t.map((function(e){return e.shift()}));e.next(n?n.apply(void 0,(0,i.ev)([],(0,i.CR)(a))):a),t.some((function(e,t){return!e.length&&r[t]}))&&e.complete()}}),(function(){r[u]=!0,!t[u].length&&e.complete()})))},s=0;!e.closed&&s<o.length;s++)u(s);return function(){t=r=null}})):J.E}var gt=n(44878),Dt=n(53912);function wt(e){return(0,u.e)((function(t,n){var r=!1,i=null,o=null,u=!1,s=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}u&&n.complete()},c=function(){o=null,u&&n.complete()};t.subscribe((0,a.x)(n,(function(t){r=!0,i=t,o||(0,pe.Xf)(e(t)).subscribe(o=(0,a.x)(n,s,c))}),(function(){u=!0,(!r||!o||o.closed)&&n.complete()})))}))}function Et(e,t){return void 0===t&&(t=M),wt((function(){return nt(e,t)}))}function xt(e){return(0,u.e)((function(t,n){var r=[];return t.subscribe((0,a.x)(n,(function(e){return r.push(e)}),(function(){n.next(r),n.complete()}))),(0,pe.Xf)(e).subscribe((0,a.x)(n,(function(){var e=r;r=[],n.next(e)}),ne.Z)),function(){r=null}}))}function _t(e,t){return void 0===t&&(t=null),t=null!=t?t:e,(0,u.e)((function(n,r){var o=[],u=0;n.subscribe((0,a.x)(r,(function(n){var a,s,c,l,f=null;u++%t==0&&o.push([]);try{for(var h=(0,i.XA)(o),d=h.next();!d.done;d=h.next())(m=d.value).push(n),e<=m.length&&(f=null!=f?f:[]).push(m)}catch(e){a={error:e}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}if(f)try{for(var p=(0,i.XA)(f),v=p.next();!v.done;v=p.next()){var m=v.value;(0,_.P)(o,m),r.next(m)}}catch(e){c={error:e}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(c)throw c.error}}}),(function(){var e,t;try{for(var n=(0,i.XA)(o),u=n.next();!u.done;u=n.next()){var a=u.value;r.next(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}r.complete()}),void 0,(function(){o=null})))}))}function At(e){for(var t,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var c=null!==(t=(0,Re.yG)(r))&&void 0!==t?t:M,l=null!==(n=r[0])&&void 0!==n?n:null,f=r[1]||1/0;return(0,u.e)((function(t,n){var r=[],u=!1,s=function(e){var t=e.buffer;e.subs.unsubscribe(),(0,_.P)(r,e),n.next(t),u&&h()},h=function(){if(r){var t=new o.w0;n.add(t);var i={buffer:[],subs:t};r.push(i),(0,ve.f)(t,c,(function(){return s(i)}),e)}};null!==l&&l>=0?(0,ve.f)(n,c,h,l,!0):u=!0,h();var d=(0,a.x)(n,(function(e){var t,n,o=r.slice();try{for(var u=(0,i.XA)(o),a=u.next();!a.done;a=u.next()){var c=a.value,l=c.buffer;l.push(e),f<=l.length&&s(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}),(function(){for(;null==r?void 0:r.length;)n.next(r.shift().buffer);null==d||d.unsubscribe(),n.complete(),n.unsubscribe()}),void 0,(function(){return r=null}));t.subscribe(d)}))}function Ct(e,t){return(0,u.e)((function(n,r){var u=[];(0,pe.Xf)(e).subscribe((0,a.x)(r,(function(e){var n=[];u.push(n);var i=new o.w0;i.add((0,pe.Xf)(t(e)).subscribe((0,a.x)(r,(function(){(0,_.P)(u,n),r.next(n),i.unsubscribe()}),ne.Z)))}),ne.Z)),n.subscribe((0,a.x)(r,(function(e){var t,n;try{for(var r=(0,i.XA)(u),o=r.next();!o.done;o=r.next())o.value.push(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}),(function(){for(;u.length>0;)r.next(u.shift());r.complete()})))}))}function Ft(e){return(0,u.e)((function(t,n){var r=null,i=null,o=function(){null==i||i.unsubscribe();var t=r;r=[],t&&n.next(t),(0,pe.Xf)(e()).subscribe(i=(0,a.x)(n,o,ne.Z))};o(),t.subscribe((0,a.x)(n,(function(e){return null==r?void 0:r.push(e)}),(function(){r&&n.next(r),n.complete()}),void 0,(function(){return r=i=null})))}))}var Ot=n(79878),St=n(30062);function Pt(e,t){return(0,te.z)((0,St.q)(),(0,Ge.z)((function(t){return e(t)})),t?_e(t):re.y)}function Bt(e){return Pt(Le,e)}var jt=Bt;function kt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.jO)(e);return n?(0,te.z)(kt.apply(void 0,(0,i.ev)([],(0,i.CR)(e))),_e(n)):(0,u.e)((function(t,n){Me((0,i.ev)([t],(0,i.CR)(st(e))))(n)}))}function Tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return kt.apply(void 0,(0,i.ev)([],(0,i.CR)(e)))}var Rt=n(79834),It=n(51313);function Lt(e,t){return(0,Z.m)(t)?(0,It.b)((function(){return e}),t):(0,It.b)((function(){return e}))}function Mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.yG)(e);return(0,u.e)((function(t,r){(0,Rt.u)()((0,Te.D)((0,i.ev)([t],(0,i.CR)(e)),n)).subscribe(r)}))}function Nt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Mt.apply(void 0,(0,i.ev)([],(0,i.CR)(e)))}var Ut={connector:function(){return new y.x}};function qt(e,t){void 0===t&&(t=Ut);var n=t.connector;return(0,u.e)((function(t,i){var o,u=n();(0,pe.Xf)(e((o=u,new r.y((function(e){return o.subscribe(e)}))))).subscribe(i),i.add(t.subscribe(u))}))}var Kt=n(77270);function Ht(e){return(0,Kt.u)((function(t,n,r){return!e||e(n,r)?t+1:t}),0)}function zt(e){return(0,u.e)((function(t,n){var r=!1,i=null,o=null,u=function(){if(null==o||o.unsubscribe(),o=null,r){r=!1;var e=i;i=null,n.next(e)}};t.subscribe((0,a.x)(n,(function(t){null==o||o.unsubscribe(),r=!0,i=t,o=(0,a.x)(n,u,ne.Z),(0,pe.Xf)(e(t)).subscribe(o)}),(function(){u(),n.complete()}),void 0,(function(){i=o=null})))}))}function Gt(e,t){return void 0===t&&(t=M),(0,u.e)((function(n,r){var i=null,o=null,u=null,s=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,r.next(e)}};function c(){var n=u+e,o=t.now();if(o<n)return i=this.schedule(void 0,n-o),void r.add(i);s()}n.subscribe((0,a.x)(r,(function(n){o=n,u=t.now(),i||(i=t.schedule(c,e),r.add(i))}),(function(){s(),r.complete()}),void 0,(function(){o=i=null})))}))}function Vt(e){return(0,u.e)((function(t,n){var r=!1;t.subscribe((0,a.x)(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}function Xt(e){return e<=0?function(){return J.E}:(0,u.e)((function(t,n){var r=0;t.subscribe((0,a.x)(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}function $t(){return(0,u.e)((function(e,t){e.subscribe((0,a.x)(t,ne.Z))}))}function Jt(e){return(0,Ee.U)((function(){return e}))}function Yt(e,t){return t?function(n){return(0,Ue.z)(t.pipe(Xt(1),$t()),n.pipe(Yt(e)))}:(0,Ge.z)((function(t,n){return(0,pe.Xf)(e(t,n)).pipe(Xt(1),Jt(t))}))}function Wt(e,t){void 0===t&&(t=M);var n=nt(e,t);return Yt((function(){return n}))}function Zt(){return(0,u.e)((function(e,t){e.subscribe((0,a.x)(t,(function(e){return ee(e,t)})))}))}function Qt(e,t){return(0,u.e)((function(n,r){var i=new Set;n.subscribe((0,a.x)(r,(function(t){var n=e?e(t):t;i.has(n)||(i.add(n),r.next(t))}))),t&&(0,pe.Xf)(t).subscribe((0,a.x)(r,(function(){return i.clear()}),ne.Z))}))}var en=n(53741);function tn(e,t){return(0,en.x)((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}function nn(e){return void 0===e&&(e=rn),(0,u.e)((function(t,n){var r=!1;t.subscribe((0,a.x)(n,(function(e){r=!0,n.next(e)}),(function(){return r?n.complete():n.error(e())})))}))}function rn(){return new oe.K}function on(e,t){if(e<0)throw new ce;var n=arguments.length>=2;return function(r){return r.pipe((0,ht.h)((function(t,n){return n===e})),Xt(1),n?Vt(t):nn((function(){return new ce})))}}function un(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return(0,Ue.z)(t,Y.of.apply(void 0,(0,i.ev)([],(0,i.CR)(e))))}}function an(e,t){return(0,u.e)((function(n,r){var i=0;n.subscribe((0,a.x)(r,(function(o){e.call(t,o,i++,n)||(r.next(!1),r.complete())}),(function(){r.next(!0),r.complete()})))}))}function sn(e,t){return t?function(n){return n.pipe(sn((function(n,r){return(0,pe.Xf)(e(n,r)).pipe((0,Ee.U)((function(e,i){return t(n,e,r,i)})))})))}:(0,u.e)((function(t,n){var r=0,i=null,o=!1;t.subscribe((0,a.x)(n,(function(t){i||(i=(0,a.x)(n,void 0,(function(){i=null,o&&n.complete()})),(0,pe.Xf)(e(t,r++)).subscribe(i))}),(function(){o=!0,!i&&n.complete()})))}))}function cn(){return sn(re.y)}var ln=cn,fn=n(29007);function hn(e,t,n){return void 0===t&&(t=1/0),t=(t||0)<1?1/0:t,(0,u.e)((function(r,i){return(0,fn.p)(r,i,e,t,void 0,!0,n)}))}var dn=n(83286);function pn(e,t){return(0,u.e)(vn(e,t,"value"))}function vn(e,t,n){var r="index"===n;return function(n,i){var o=0;n.subscribe((0,a.x)(i,(function(u){var a=o++;e.call(t,u,a,n)&&(i.next(r?a:u),i.complete())}),(function(){i.next(r?-1:void 0),i.complete()})))}}function mn(e,t){return(0,u.e)(vn(e,t,"index"))}function yn(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,ht.h)((function(t,n){return e(t,n,r)})):re.y,Xt(1),n?Vt(t):nn((function(){return new oe.K})))}}function bn(e,t,n,i){return(0,u.e)((function(o,u){var s;t&&"function"!=typeof t?(n=t.duration,s=t.element,i=t.connector):s=t;var c=new Map,l=function(e){c.forEach(e),e(u)},f=function(e){return l((function(t){return t.error(e)}))},h=0,d=!1,p=new a.Q(u,(function(t){try{var o=e(t),l=c.get(o);if(!l){c.set(o,l=i?i():new y.x);var v=(b=o,g=l,(D=new r.y((function(e){h++;var t=g.subscribe(e);return function(){t.unsubscribe(),0==--h&&d&&p.unsubscribe()}}))).key=b,D);if(u.next(v),n){var m=(0,a.x)(l,(function(){l.complete(),null==m||m.unsubscribe()}),void 0,void 0,(function(){return c.delete(o)}));p.add((0,pe.Xf)(n(v)).subscribe(m))}}l.next(s?s(t):t)}catch(e){f(e)}var b,g,D}),(function(){return l((function(e){return e.complete()}))}),f,(function(){return c.clear()}),(function(){return d=!0,0===h}));o.subscribe(p)}))}function gn(){return(0,u.e)((function(e,t){e.subscribe((0,a.x)(t,(function(){t.next(!1),t.complete()}),(function(){t.next(!0),t.complete()})))}))}function Dn(e){return e<=0?function(){return J.E}:(0,u.e)((function(t,n){var r=[];t.subscribe((0,a.x)(n,(function(t){r.push(t),e<r.length&&r.shift()}),(function(){var e,t;try{for(var o=(0,i.XA)(r),u=o.next();!u.done;u=o.next()){var a=u.value;n.next(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){r=null})))}))}function wn(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?(0,ht.h)((function(t,n){return e(t,n,r)})):re.y,Dn(1),n?Vt(t):nn((function(){return new oe.K})))}}function En(){return(0,u.e)((function(e,t){e.subscribe((0,a.x)(t,(function(e){t.next(Q.createNext(e))}),(function(){t.next(Q.createComplete()),t.complete()}),(function(e){t.next(Q.createError(e)),t.complete()})))}))}function xn(e){return(0,Kt.u)((0,Z.m)(e)?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}var _n=n(44367),An=Ge.z;function Cn(e,t,n){return void 0===n&&(n=1/0),(0,Z.m)(t)?(0,Ge.z)((function(){return e}),t,n):("number"==typeof t&&(n=t),(0,Ge.z)((function(){return e}),n))}function Fn(e,t,n){return void 0===n&&(n=1/0),(0,u.e)((function(r,i){var o=t;return(0,fn.p)(r,i,(function(t,n){return e(o,t,n)}),n,(function(e){o=e}),!1,void 0,(function(){return o=null}))}))}function On(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.yG)(e),r=(0,Re._6)(e,1/0);return e=st(e),(0,u.e)((function(t,o){(0,_n.J)(r)((0,Te.D)((0,i.ev)([t],(0,i.CR)(e)),n)).subscribe(o)}))}function Sn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return On.apply(void 0,(0,i.ev)([],(0,i.CR)(e)))}function Pn(e){return(0,Kt.u)((0,Z.m)(e)?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}function Bn(e,t){var n=(0,Z.m)(e)?e:function(){return e};return(0,Z.m)(t)?qt(t,{connector:n}):function(e){return new c(e,n)}}function jn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=st(e);return function(e){return ct.apply(void 0,(0,i.ev)([e],(0,i.CR)(n)))}}function kn(){return(0,u.e)((function(e,t){var n,r=!1;e.subscribe((0,a.x)(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))}function Tn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return(0,Ee.U)((function(t){for(var r=t,i=0;i<n;i++){var o=null==r?void 0:r[e[i]];if(void 0===o)return;r=o}return r}))}function Rn(e){return e?function(t){return qt(e)(t)}:function(e){return Bn(new y.x)(e)}}function In(e){return function(t){var n=new b.X(e);return new c(t,(function(){return n}))}}function Ln(){return function(e){var t=new w;return new c(e,(function(){return t}))}}function Mn(e,t,n,r){n&&!(0,Z.m)(n)&&(r=n);var i=(0,Z.m)(n)?n:void 0;return function(n){return Bn(new D(e,t,r),i)(n)}}function Nn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(0,u.e)((function(t,n){vt((0,i.ev)([t],(0,i.CR)(e)))(n)})):re.y}function Un(e){var t,n,r=1/0;return null!=e&&("object"==typeof e?(t=e.count,r=void 0===t?1/0:t,n=e.delay):r=e),r<=0?function(){return J.E}:(0,u.e)((function(e,t){var i,o=0,u=function(){if(null==i||i.unsubscribe(),i=null,null!=n){var e="number"==typeof n?nt(n):(0,pe.Xf)(n(o)),r=(0,a.x)(t,(function(){r.unsubscribe(),s()}));e.subscribe(r)}else s()},s=function(){var n=!1;i=e.subscribe((0,a.x)(t,void 0,(function(){++o<r?i?u():n=!0:t.complete()}))),n&&u()};s()}))}function qn(e){return(0,u.e)((function(t,n){var r,i,o=!1,u=!1,s=!1,c=function(){return s&&u&&(n.complete(),!0)},l=function(){s=!1,r=t.subscribe((0,a.x)(n,void 0,(function(){s=!0,!c()&&(i||(i=new y.x,(0,pe.Xf)(e(i)).subscribe((0,a.x)(n,(function(){r?l():o=!0}),(function(){u=!0,c()})))),i).next()}))),o&&(r.unsubscribe(),r=null,o=!1,l())};l()}))}function Kn(e){var t;void 0===e&&(e=1/0);var n=(t=e&&"object"==typeof e?e:{count:e}).count,r=void 0===n?1/0:n,i=t.delay,o=t.resetOnSuccess,s=void 0!==o&&o;return r<=0?re.y:(0,u.e)((function(e,t){var n,o=0,u=function(){var c=!1;n=e.subscribe((0,a.x)(t,(function(e){s&&(o=0),t.next(e)}),void 0,(function(e){if(o++<r){var s=function(){n?(n.unsubscribe(),n=null,u()):c=!0};if(null!=i){var l="number"==typeof i?nt(i):(0,pe.Xf)(i(e,o)),f=(0,a.x)(t,(function(){f.unsubscribe(),s()}),(function(){t.complete()}));l.subscribe(f)}else s()}else t.error(e)}))),c&&(n.unsubscribe(),n=null,u())};u()}))}function Hn(e){return(0,u.e)((function(t,n){var r,i,o=!1,u=function(){r=t.subscribe((0,a.x)(n,void 0,void 0,(function(t){i||(i=new y.x,(0,pe.Xf)(e(i)).subscribe((0,a.x)(n,(function(){return r?u():o=!0})))),i&&i.next(t)}))),o&&(r.unsubscribe(),r=null,o=!1,u())};u()}))}function zn(e){return(0,u.e)((function(t,n){var r=!1,i=null;t.subscribe((0,a.x)(n,(function(e){r=!0,i=e}))),(0,pe.Xf)(e).subscribe((0,a.x)(n,(function(){if(r){r=!1;var e=i;i=null,n.next(e)}}),ne.Z))}))}function Gn(e,t){return void 0===t&&(t=M),zn(rt(e,t))}var Vn=n(56542);function Xn(e,t){return void 0===t&&(t=function(e,t){return e===t}),(0,u.e)((function(n,r){var i={buffer:[],complete:!1},o={buffer:[],complete:!1},u=function(e){r.next(e),r.complete()},s=function(e,n){var i=(0,a.x)(r,(function(r){var i=n.buffer,o=n.complete;0===i.length?o?u(!1):e.buffer.push(r):!t(r,i.shift())&&u(!1)}),(function(){e.complete=!0;var t=n.complete,r=n.buffer;t&&u(0===r.length),null==i||i.unsubscribe()}));return i};n.subscribe(s(i,o)),(0,pe.Xf)(e).subscribe(s(o,i))}))}var $n=n(65583);function Jn(e,t,n){var r,i,o,u,a=!1;return e&&"object"==typeof e?(r=e.bufferSize,u=void 0===r?1/0:r,i=e.windowTime,t=void 0===i?1/0:i,a=void 0!==(o=e.refCount)&&o,n=e.scheduler):u=null!=e?e:1/0,(0,$n.B)({connector:function(){return new D(u,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function Yn(e){return(0,u.e)((function(t,n){var r,i=!1,o=!1,u=0;t.subscribe((0,a.x)(n,(function(a){o=!0,e&&!e(a,u++,t)||(i&&n.error(new he("Too many matching values")),i=!0,r=a)}),(function(){i?(n.next(r),n.complete()):n.error(o?new le("No matching values"):new oe.K)})))}))}function Wn(e){return(0,ht.h)((function(t,n){return e<=n}))}function Zn(e){return e<=0?re.y:(0,u.e)((function(t,n){var r=new Array(e),i=0;return t.subscribe((0,a.x)(n,(function(t){var o=i++;if(o<e)r[o]=t;else{var u=o%e,a=r[u];r[u]=t,n.next(a)}}))),function(){r=null}}))}function Qn(e){return(0,u.e)((function(t,n){var r=!1,i=(0,a.x)(n,(function(){null==i||i.unsubscribe(),r=!0}),ne.Z);(0,pe.Xf)(e).subscribe(i),t.subscribe((0,a.x)(n,(function(e){return r&&n.next(e)})))}))}function er(e){return(0,u.e)((function(t,n){var r=!1,i=0;t.subscribe((0,a.x)(n,(function(t){return(r||(r=!e(t,i++)))&&n.next(t)})))}))}function tr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.yG)(e);return(0,u.e)((function(t,r){(n?(0,Ue.z)(e,t,n):(0,Ue.z)(e,t)).subscribe(r)}))}var nr=n(34978);function rr(){return(0,nr.w)(re.y)}function ir(e,t){return(0,Z.m)(t)?(0,nr.w)((function(){return e}),t):(0,nr.w)((function(){return e}))}function or(e,t){return(0,u.e)((function(n,r){var i=t;return(0,nr.w)((function(t,n){return e(i,t,n)}),(function(e,t){return i=t,t}))(n).subscribe(r),function(){i=null}}))}function ur(e){return(0,u.e)((function(t,n){(0,pe.Xf)(e).subscribe((0,a.x)(n,(function(){return n.complete()}),ne.Z)),!n.closed&&t.subscribe(n)}))}function ar(e,t){return void 0===t&&(t=!1),(0,u.e)((function(n,r){var i=0;n.subscribe((0,a.x)(r,(function(n){var o=e(n,i++);(o||t)&&r.next(n),!o&&r.complete()})))}))}function sr(e,t,n){var r=(0,Z.m)(e)||t||n?{next:e,error:t,complete:n}:e;return r?(0,u.e)((function(e,t){var n;null===(n=r.subscribe)||void 0===n||n.call(r);var i=!0;e.subscribe((0,a.x)(t,(function(e){var n;null===(n=r.next)||void 0===n||n.call(r,e),t.next(e)}),(function(){var e;i=!1,null===(e=r.complete)||void 0===e||e.call(r),t.complete()}),(function(e){var n;i=!1,null===(n=r.error)||void 0===n||n.call(r,e),t.error(e)}),(function(){var e,t;i&&(null===(e=r.unsubscribe)||void 0===e||e.call(r)),null===(t=r.finalize)||void 0===t||t.call(r)})))})):re.y}function cr(e,t){return(0,u.e)((function(n,r){var i=null!=t?t:{},o=i.leading,u=void 0===o||o,s=i.trailing,c=void 0!==s&&s,l=!1,f=null,h=null,d=!1,p=function(){null==h||h.unsubscribe(),h=null,c&&(y(),d&&r.complete())},v=function(){h=null,d&&r.complete()},m=function(t){return h=(0,pe.Xf)(e(t)).subscribe((0,a.x)(r,p,v))},y=function(){if(l){l=!1;var e=f;f=null,r.next(e),!d&&m(e)}};n.subscribe((0,a.x)(r,(function(e){l=!0,f=e,(!h||h.closed)&&(u?y():m(e))}),(function(){d=!0,(!(c&&l&&h)||h.closed)&&r.complete()})))}))}function lr(e,t,n){void 0===t&&(t=M);var r=nt(e,t);return cr((function(){return r}),n)}function fr(e){return void 0===e&&(e=M),(0,u.e)((function(t,n){var r=e.now();t.subscribe((0,a.x)(n,(function(t){var i=e.now(),o=i-r;r=i,n.next(new hr(t,o))})))}))}var hr=function(e,t){this.value=e,this.interval=t};function dr(e,t,n){var r,i,o;if(n=null!=n?n:N,de(e)?r=e:"number"==typeof e&&(i=e),!t)throw new TypeError("No observable provided to switch to");if(o=function(){return t},null==r&&null==i)throw new TypeError("No timeout provided.");return ye({first:r,each:i,scheduler:n,with:o})}function pr(e){return void 0===e&&(e=g),(0,Ee.U)((function(t){return{value:t,timestamp:e.now()}}))}function vr(e){return(0,u.e)((function(t,n){var r=new y.x;n.next(r.asObservable());var i=function(e){r.error(e),n.error(e)};return t.subscribe((0,a.x)(n,(function(e){return null==r?void 0:r.next(e)}),(function(){r.complete(),n.complete()}),i)),(0,pe.Xf)(e).subscribe((0,a.x)(n,(function(){r.complete(),n.next(r=new y.x)}),ne.Z,i)),function(){null==r||r.unsubscribe(),r=null}}))}function mr(e,t){void 0===t&&(t=0);var n=t>0?t:e;return(0,u.e)((function(t,r){var o=[new y.x],u=0;r.next(o[0].asObservable()),t.subscribe((0,a.x)(r,(function(t){var a,s;try{for(var c=(0,i.XA)(o),l=c.next();!l.done;l=c.next())l.value.next(t)}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}var f=u-e+1;if(f>=0&&f%n==0&&o.shift().complete(),++u%n==0){var h=new y.x;o.push(h),r.next(h.asObservable())}}),(function(){for(;o.length>0;)o.shift().complete();r.complete()}),(function(e){for(;o.length>0;)o.shift().error(e);r.error(e)}),(function(){o=null})))}))}function yr(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=null!==(t=(0,Re.yG)(r))&&void 0!==t?t:M,c=null!==(n=r[0])&&void 0!==n?n:null,l=r[1]||1/0;return(0,u.e)((function(t,n){var r=[],i=!1,u=function(e){var t=e.window,n=e.subs;t.complete(),n.unsubscribe(),(0,_.P)(r,e),i&&f()},f=function(){if(r){var t=new o.w0;n.add(t);var i=new y.x,a={window:i,subs:t,seen:0};r.push(a),n.next(i.asObservable()),(0,ve.f)(t,s,(function(){return u(a)}),e)}};null!==c&&c>=0?(0,ve.f)(n,s,f,c,!0):i=!0,f();var h=function(e){return r.slice().forEach(e)},d=function(e){h((function(t){var n=t.window;return e(n)})),e(n),n.unsubscribe()};return t.subscribe((0,a.x)(n,(function(e){h((function(t){t.window.next(e),l<=++t.seen&&u(t)}))}),(function(){return d((function(e){return e.complete()}))}),(function(e){return d((function(t){return t.error(e)}))}))),function(){r=null}}))}function br(e,t){return(0,u.e)((function(n,r){var u=[],s=function(e){for(;0<u.length;)u.shift().error(e);r.error(e)};(0,pe.Xf)(e).subscribe((0,a.x)(r,(function(e){var n=new y.x;u.push(n);var i,c=new o.w0;try{i=(0,pe.Xf)(t(e))}catch(e){return void s(e)}r.next(n.asObservable()),c.add(i.subscribe((0,a.x)(r,(function(){(0,_.P)(u,n),n.complete(),c.unsubscribe()}),ne.Z,s)))}),ne.Z)),n.subscribe((0,a.x)(r,(function(e){var t,n,r=u.slice();try{for(var o=(0,i.XA)(r),a=o.next();!a.done;a=o.next())a.value.next(e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}),(function(){for(;0<u.length;)u.shift().complete();r.complete()}),s,(function(){for(;0<u.length;)u.shift().unsubscribe()})))}))}function gr(e){return(0,u.e)((function(t,n){var r,i,o=function(e){r.error(e),n.error(e)},u=function(){var t;null==i||i.unsubscribe(),null==r||r.complete(),r=new y.x,n.next(r.asObservable());try{t=(0,pe.Xf)(e())}catch(e){return void o(e)}t.subscribe(i=(0,a.x)(n,u,u,o))};u(),t.subscribe((0,a.x)(n,(function(e){return r.next(e)}),(function(){r.complete(),n.complete()}),o,(function(){null==i||i.unsubscribe(),r=null})))}))}function Dr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,Re.jO)(e);return(0,u.e)((function(t,r){for(var o=e.length,u=new Array(o),s=e.map((function(){return!1})),c=!1,l=function(t){(0,pe.Xf)(e[t]).subscribe((0,a.x)(r,(function(e){u[t]=e,c||s[t]||(s[t]=!0,(c=s.every(re.y))&&(s=null))}),ne.Z))},f=0;f<o;f++)l(f);t.subscribe((0,a.x)(r,(function(e){if(c){var t=(0,i.ev)([e],(0,i.CR)(u));r.next(n?n.apply(void 0,(0,i.ev)([],(0,i.CR)(t))):t)}})))}))}function wr(e){return Pt(bt,e)}function Er(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,u.e)((function(t,n){bt.apply(void 0,(0,i.ev)([t],(0,i.CR)(e))).subscribe(n)}))}function xr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Er.apply(void 0,(0,i.ev)([],(0,i.CR)(e)))}},86515:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(97582),i=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n(9248).x)},85185:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,JM:()=>o,TQ:()=>r});var r=u("C",void 0,void 0);function i(e){return u("E",void 0,e)}function o(e){return u("N",e,void 0)}function u(e,t,n){return{kind:e,value:t,error:n}}},80230:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(43652),i=n(70204),o=n(46766),u=n(92749),a=n(53912),s=n(58474),c=n(68846),l=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,u=this,a=(o=e)&&o instanceof r.Lv||function(e){return e&&(0,s.m)(e.next)&&(0,s.m)(e.error)&&(0,s.m)(e.complete)}(o)&&(0,i.Nn)(o)?e:new r.Hp(e,t,n);return(0,c.x)((function(){var e=u,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?u._subscribe(a):u._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=f(t))((function(t,i){var o=new r.Hp({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.L]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,u.U)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=f(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function f(e){var t;return null!==(t=null!=e?e:a.v.Promise)&&void 0!==t?t:Promise}},9248:(e,t,n)=>{"use strict";n.d(t,{x:()=>c});var r=n(97582),i=n(80230),o=n(70204),u=n(9825),a=n(3699),s=n(68846),c=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.ZT)(t,e),t.prototype.lift=function(e){var t=new l(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new u.N},t.prototype.next=function(e){var t=this;(0,s.x)((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.XA)(t.currentObservers),u=o.next();!u.done;u=o.next())u.value.next(e)}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;(0,s.x)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,s.x)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,u=n.observers;return r||i?o.Lc:(this.currentObservers=null,u.push(e),new o.w0((function(){t.currentObservers=null,(0,a.P)(u,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new i.y;return e.source=this,e},t.create=function(e,t){return new l(e,t)},t}(i.y),l=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.ZT)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.Lc},t}(c)},43652:(e,t,n)=>{"use strict";n.d(t,{Hp:()=>m,Lv:()=>h});var r=n(97582),i=n(58474),o=n(70204),u=n(53912),a=n(40005),s=n(22967),c=n(85185),l=n(68380),f=n(68846),h=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.Nn)(t)&&t.add(n)):n.destination=g,n}return(0,r.ZT)(t,e),t.create=function(e,t,n){return new m(e,t,n)},t.prototype.next=function(e){this.isStopped?b((0,c.JM)(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?b((0,c.A)(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?b(c.TQ,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.w0),d=Function.prototype.bind;function p(e,t){return d.call(e,t)}var v=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){y(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){y(e)}else y(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){y(e)}},e}(),m=function(e){function t(t,n,r){var o,a,s=e.call(this)||this;return(0,i.m)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&u.v.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&p(t.next,a),error:t.error&&p(t.error,a),complete:t.complete&&p(t.complete,a)}):o=t,s.destination=new v(o),s}return(0,r.ZT)(t,e),t}(h);function y(e){u.v.useDeprecatedSynchronousErrorHandling?(0,f.O)(e):(0,a.h)(e)}function b(e,t){var n=u.v.onStoppedNotification;n&&l.z.setTimeout((function(){return n(e,t)}))}var g={closed:!0,next:s.Z,error:function(e){throw e},complete:s.Z}},70204:(e,t,n)=>{"use strict";n.d(t,{Lc:()=>s,Nn:()=>c,w0:()=>a});var r=n(97582),i=n(58474),o=n(25948),u=n(3699),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,u,a;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var c=(0,r.XA)(s),f=c.next();!f.done;f=c.next())f.value.remove(this)}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}else s.remove(this);var h=this.initialTeardown;if((0,i.m)(h))try{h()}catch(e){a=e instanceof o.B?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var p=(0,r.XA)(d),v=p.next();!v.done;v=p.next()){var m=v.value;try{l(m)}catch(e){a=null!=a?a:[],e instanceof o.B?a=(0,r.ev)((0,r.ev)([],(0,r.CR)(a)),(0,r.CR)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(n)throw n.error}}}if(a)throw new o.B(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)l(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,u.P)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,u.P)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),s=a.EMPTY;function c(e){return e instanceof a||e&&"closed"in e&&(0,i.m)(e.remove)&&(0,i.m)(e.add)&&(0,i.m)(e.unsubscribe)}function l(e){(0,i.m)(e)?e():e.unsubscribe()}},53912:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1718:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(18084),i=n(43652);function o(e,t){var n="object"==typeof t;return new Promise((function(o,u){var a=new i.Hp({next:function(e){o(e),a.unsubscribe()},error:u,complete:function(){n?o(t.defaultValue):u(new r.K)}});e.subscribe(a)}))}},26362:(e,t,n)=>{"use strict";n.d(t,{z:()=>u});var r=n(79834),i=n(22457),o=n(40052);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,r.u)()((0,o.D)(e,(0,i.yG)(e)))}},19917:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(80230),i=n(87878);function o(e){return new r.y((function(t){(0,i.Xf)(e()).subscribe(t)}))}},1545:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>o});var r=n(80230),i=new r.y((function(e){return e.complete()}));function o(e){return e?function(e){return new r.y((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},40052:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(44878),i=n(87878);function o(e,t){return t?(0,r.x)(e,t):(0,i.Xf)(e)}},87878:(e,t,n)=>{"use strict";n.d(t,{Xf:()=>v});var r=n(97582),i=n(45685),o=n(53841),u=n(80230),a=n(71764),s=n(58430),c=n(88729),l=n(1837),f=n(48671),h=n(58474),d=n(40005),p=n(46766);function v(e){if(e instanceof u.y)return e;if(null!=e){if((0,a.c)(e))return b=e,new u.y((function(e){var t=b[p.L]();if((0,h.m)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((0,i.z)(e))return y=e,new u.y((function(e){for(var t=0;t<y.length&&!e.closed;t++)e.next(y[t]);e.complete()}));if((0,o.t)(e))return v=e,new u.y((function(e){v.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,d.h)}));if((0,s.D)(e))return m(e);if((0,l.T)(e))return n=e,new u.y((function(e){var t,i;try{for(var o=(0,r.XA)(n),u=o.next();!u.done;u=o.next()){var a=u.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}e.complete()}));if((0,f.L)(e))return t=e,m((0,f.Q)(t))}var t,n,v,y,b;throw(0,c.z)(e)}function m(e){return new u.y((function(t){(function(e,t){var n,i,o,u;return(0,r.mG)(this,void 0,void 0,(function(){var a,s;return(0,r.Jh)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=(0,r.KL)(e),c.label=1;case 1:return[4,n.next()];case 2:if((i=c.sent()).done)return[3,4];if(a=i.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(u=n.return)?[4,u.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}},23071:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(44367),i=n(87878),o=n(1545),u=n(22457),a=n(40052);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,u.yG)(e),s=(0,u._6)(e,1/0),c=e;return c.length?1===c.length?(0,i.Xf)(c[0]):(0,r.J)(s)((0,a.D)(c,n)):o.E}},32817:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(22457),i=n(40052);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,r.yG)(e);return(0,i.D)(e,n)}},83610:(e,t,n)=>{"use strict";n.d(t,{_:()=>o});var r=n(80230),i=n(58474);function o(e,t){var n=(0,i.m)(e)?e:function(){return e},o=function(e){return e.error(n())};return new r.y(t?function(e){return t.schedule(o,0,e)}:o)}},2566:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o,x:()=>i});var r=n(97582);function i(e,t,n,r,i){return new o(e,t,n,r,i)}var o=function(e){function t(t,n,r,i,o,u){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=u,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,r.ZT)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(n(43652).Lv)},79878:(e,t,n)=>{"use strict";n.d(t,{K:()=>u});var r=n(87878),i=n(2566),o=n(96798);function u(e){return(0,o.e)((function(t,n){var o,a=null,s=!1;a=t.subscribe((0,i.x)(n,void 0,void 0,(function(i){o=(0,r.Xf)(e(i,u(e)(t))),a?(a.unsubscribe(),a=null,o.subscribe(n)):s=!0}))),s&&(a.unsubscribe(),a=null,o.subscribe(n))}))}},79834:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(44367);function i(){return(0,r.J)(1)}},51313:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(43994),i=n(58474);function o(e,t){return(0,i.m)(t)?(0,r.z)(e,t,1):(0,r.z)(e,1)}},53741:(e,t,n)=>{"use strict";n.d(t,{x:()=>u});var r=n(90278),i=n(96798),o=n(2566);function u(e,t){return void 0===t&&(t=r.y),e=null!=e?e:a,(0,i.e)((function(n,r){var i,u=!0;n.subscribe((0,o.x)(r,(function(n){var o=t(n);!u&&e(i,o)||(u=!1,i=o,r.next(n))})))}))}function a(e,t){return e===t}},94975:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(96798),i=n(2566);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){return e.call(t,n,o++)&&r.next(n)})))}))}},83286:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(96798);function i(e){return(0,r.e)((function(t,n){try{t.subscribe(n)}finally{n.add(e)}}))}},29127:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(96798),i=n(2566);function o(e,t){return(0,r.e)((function(n,r){var o=0;n.subscribe((0,i.x)(r,(function(n){r.next(e.call(t,n,o++))})))}))}},44367:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=n(43994),i=n(90278);function o(e){return void 0===e&&(e=1/0),(0,r.z)(i.y,e)}},29007:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var r=n(87878),i=n(47845),o=n(2566);function u(e,t,n,u,a,s,c,l){var f=[],h=0,d=0,p=!1,v=function(){!p||f.length||h||t.complete()},m=function(e){return h<u?y(e):f.push(e)},y=function(e){s&&t.next(e),h++;var l=!1;(0,r.Xf)(n(e,d++)).subscribe((0,o.x)(t,(function(e){null==a||a(e),s?m(e):t.next(e)}),(function(){l=!0}),void 0,(function(){if(l)try{h--;for(var e=function(){var e=f.shift();c?(0,i.f)(t,c,(function(){return y(e)})):y(e)};f.length&&h<u;)e();v()}catch(e){t.error(e)}})))};return e.subscribe((0,o.x)(t,m,(function(){p=!0,v()}))),function(){null==l||l()}}},43994:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(29127),i=n(87878),o=n(96798),u=n(29007),a=n(58474);function s(e,t,n){return void 0===n&&(n=1/0),(0,a.m)(t)?s((function(n,o){return(0,r.U)((function(e,r){return t(n,e,o,r)}))((0,i.Xf)(e(n,o)))}),n):("number"==typeof t&&(n=t),(0,o.e)((function(t,r){return(0,u.p)(t,r,e,n)})))}},29526:(e,t,n)=>{"use strict";n.d(t,{Q:()=>u});var r=n(47845),i=n(96798),o=n(2566);function u(e,t){return void 0===t&&(t=0),(0,i.e)((function(n,i){n.subscribe((0,o.x)(i,(function(n){return(0,r.f)(i,e,(function(){return i.next(n)}),t)}),(function(){return(0,r.f)(i,e,(function(){return i.complete()}),t)}),(function(n){return(0,r.f)(i,e,(function(){return i.error(n)}),t)})))}))}},77270:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var r=n(71674),i=n(96798);function o(e,t){return(0,i.e)((0,r.U)(e,t,arguments.length>=2,!1,!0))}},56542:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(96798),i=n(71674);function o(e,t){return(0,r.e)((0,i.U)(e,t,arguments.length>=2,!0))}},71674:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(2566);function i(e,t,n,i,o){return function(u,a){var s=n,c=t,l=0;u.subscribe((0,r.x)(a,(function(t){var n=l++;c=s?e(c,t,n):(s=!0,t),i&&a.next(c)}),o&&function(){s&&a.next(c),a.complete()}))}}},65583:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var r=n(97582),i=n(87878),o=n(9248),u=n(43652),a=n(96798);function s(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new o.x}:t,r=e.resetOnError,s=void 0===r||r,l=e.resetOnComplete,f=void 0===l||l,h=e.resetOnRefCountZero,d=void 0===h||h;return function(e){var t,r,o,l=0,h=!1,p=!1,v=function(){null==r||r.unsubscribe(),r=void 0},m=function(){v(),t=o=void 0,h=p=!1},y=function(){var e=t;m(),null==e||e.unsubscribe()};return(0,a.e)((function(e,a){l++,p||h||v();var b=o=null!=o?o:n();a.add((function(){0!=--l||p||h||(r=c(y,d))})),b.subscribe(a),!t&&l>0&&(t=new u.Hp({next:function(e){return b.next(e)},error:function(e){p=!0,v(),r=c(m,s,e),b.error(e)},complete:function(){h=!0,v(),r=c(m,f),b.complete()}}),(0,i.Xf)(e).subscribe(t))}))(e)}}function c(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!0!==t){if(!1!==t){var a=new u.Hp({next:function(){a.unsubscribe(),e()}});return(0,i.Xf)(t.apply(void 0,(0,r.ev)([],(0,r.CR)(n)))).subscribe(a)}}else e()}},58720:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(96798);function i(e,t){return void 0===t&&(t=0),(0,r.e)((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}},34978:(e,t,n)=>{"use strict";n.d(t,{w:()=>u});var r=n(87878),i=n(96798),o=n(2566);function u(e,t){return(0,i.e)((function(n,i){var u=null,a=0,s=!1,c=function(){return s&&!u&&i.complete()};n.subscribe((0,o.x)(i,(function(n){null==u||u.unsubscribe();var s=0,l=a++;(0,r.Xf)(e(n,l)).subscribe(u=(0,o.x)(i,(function(e){return i.next(t?t(n,e,l,s++):e)}),(function(){u=null,c()})))}),(function(){s=!0,c()})))}))}},30062:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(77270),i=n(96798),o=function(e,t){return e.push(t),e};function u(){return(0,i.e)((function(e,t){(0,r.u)(o,[])(e).subscribe(t)}))}},13217:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(80230);function i(e,t){return new r.y((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}},45002:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(80230),i=n(47845);function o(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y((function(n){(0,i.f)(n,t,(function(){var r=e[Symbol.asyncIterator]();(0,i.f)(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}},18077:(e,t,n)=>{"use strict";n.d(t,{Q:()=>a});var r=n(80230),i=n(39768),o=n(58474),u=n(47845);function a(e,t){return new r.y((function(n){var r;return(0,u.f)(n,t,(function(){r=e[i.h](),(0,u.f)(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){return void n.error(e)}i?n.complete():n.next(t)}),0,!0)})),function(){return(0,o.m)(null==r?void 0:r.return)&&r.return()}}))}},93524:(e,t,n)=>{"use strict";n.d(t,{l:()=>u});var r=n(87878),i=n(29526),o=n(58720);function u(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},75362:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(87878),i=n(29526),o=n(58720);function u(e,t){return(0,r.Xf)(e).pipe((0,o.R)(t),(0,i.Q)(t))}},46444:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(45002),i=n(48671);function o(e,t){return(0,r.z)((0,i.Q)(e),t)}},44878:(e,t,n)=>{"use strict";n.d(t,{x:()=>m});var r=n(93524),i=n(75362),o=n(13217),u=n(18077),a=n(45002),s=n(71764),c=n(53841),l=n(45685),f=n(1837),h=n(58430),d=n(88729),p=n(48671),v=n(46444);function m(e,t){if(null!=e){if((0,s.c)(e))return(0,r.l)(e,t);if((0,l.z)(e))return(0,o.r)(e,t);if((0,c.t)(e))return(0,i.c)(e,t);if((0,h.D)(e))return(0,a.z)(e,t);if((0,f.T)(e))return(0,u.Q)(e,t);if((0,p.L)(e))return(0,v.v)(e,t)}throw(0,d.z)(e)}},68380:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(97582),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var u=i.delegate;return(null==u?void 0:u.setTimeout)?u.setTimeout.apply(u,(0,r.ev)([e,t],(0,r.CR)(n))):setTimeout.apply(void 0,(0,r.ev)([e,t],(0,r.CR)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},39768:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},46766:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},18084:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var r=(0,n(1819).d)((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}))},9825:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var r=(0,n(1819).d)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},25948:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=(0,n(1819).d)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},22457:(e,t,n)=>{"use strict";n.d(t,{_6:()=>s,jO:()=>u,yG:()=>a});var r=n(58474),i=n(64865);function o(e){return e[e.length-1]}function u(e){return(0,r.m)(o(e))?e.pop():void 0}function a(e){return(0,i.K)(o(e))?e.pop():void 0}function s(e,t){return"number"==typeof o(e)?e.pop():t}},3699:(e,t,n)=>{"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.d(t,{P:()=>r})},1819:(e,t,n)=>{"use strict";function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.d(t,{d:()=>r})},68846:(e,t,n)=>{"use strict";n.d(t,{O:()=>u,x:()=>o});var r=n(53912),i=null;function o(e){if(r.v.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,u=n.error;if(i=null,o)throw u}}else e()}function u(e){r.v.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},47845:(e,t,n)=>{"use strict";function r(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}n.d(t,{f:()=>r})},90278:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},45685:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},58430:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var r=n(58474);function i(e){return Symbol.asyncIterator&&(0,r.m)(null==e?void 0:e[Symbol.asyncIterator])}},58474:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},71764:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(46766),i=n(58474);function o(e){return(0,i.m)(e[r.L])}},1837:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n(39768),i=n(58474);function o(e){return(0,i.m)(null==e?void 0:e[r.h])}},9141:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(80230),i=n(58474);function o(e){return!!e&&(e instanceof r.y||(0,i.m)(e.lift)&&(0,i.m)(e.subscribe))}},53841:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var r=n(58474);function i(e){return(0,r.m)(null==e?void 0:e.then)}},48671:(e,t,n)=>{"use strict";n.d(t,{L:()=>u,Q:()=>o});var r=n(97582),i=n(58474);function o(e){return(0,r.FC)(this,arguments,(function(){var t,n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,r.qq)(t.read())];case 3:return n=o.sent(),i=n.value,n.done?[4,(0,r.qq)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,(0,r.qq)(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function u(e){return(0,i.m)(null==e?void 0:e.getReader)}},64865:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(58474);function i(e){return e&&(0,r.m)(e.schedule)}},96798:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,e:()=>o});var r=n(58474);function i(e){return(0,r.m)(null==e?void 0:e.lift)}function o(e){return function(t){if(i(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}},22967:(e,t,n)=>{"use strict";function r(){}n.d(t,{Z:()=>r})},92749:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,z:()=>i});var r=n(90278);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?r.y:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},40005:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(53912),i=n(68380);function o(e){i.z.setTimeout((function(){var t=r.v.onUnhandledError;if(!t)throw e;t(e)}))}},88729:(e,t,n)=>{"use strict";function r(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}n.d(t,{z:()=>r})},93744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},13653:(e,t,n)=>{"use strict";let r;n.d(t,{Z:()=>o});const i=new Uint8Array(16);function o(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},3958:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}},72045:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(93744),i=n(13653),o=n(3958);const u=function(e,t,n){if(r.Z.randomUUID&&!t&&!e)return r.Z.randomUUID();const u=(e=e||{}).random||(e.rng||i.Z)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=u[e];return t}return(0,o.S)(u)}},49520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Dexie:()=>Qn,RangeSet:()=>Gn,default:()=>Qn,liveQuery:()=>rr,mergeRanges:()=>Xn,rangesOverlap:()=>$n});const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,i=Object.keys,o=Array.isArray;function u(e,t){return"object"!=typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const a=Object.getPrototypeOf,s={}.hasOwnProperty;function c(e,t){return s.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(a(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach((n=>{h(e,n,t[n])}))}const f=Object.defineProperty;function h(e,t,n,r){f(e,t,u(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function d(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}const p=Object.getOwnPropertyDescriptor;function v(e,t){let n;return p(e,t)||(n=a(e))&&v(n,t)}const m=[].slice;function y(e,t,n){return m.call(e,t,n)}function b(e,t){return t(e)}function g(e){if(!e)throw new Error("Assertion Failed")}function D(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function E(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=E(e,t[r]);n.push(o)}return n}var u=t.indexOf(".");if(-1!==u){var a=e[t.substr(0,u)];return void 0===a?void 0:E(a,t.substr(u+1))}}function x(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){g("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)x(e,t[r],n[r])}else{var u=t.indexOf(".");if(-1!==u){var a=t.substr(0,u),s=t.substr(u+1);if(""===s)void 0===n?o(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l&&c(e,a)||(l=e[a]={}),x(l,s,n)}}else void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}const A=[].concat;function C(e){return A.apply([],e)}const F="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(C([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),O=F.map((e=>r[e]));w(F,(e=>[e,!0]));let S=null;function P(e){S="undefined"!=typeof WeakMap&&new WeakMap;const t=B(e);return S=null,t}function B(e){if(!e||"object"!=typeof e)return e;let t=S&&S.get(e);if(t)return t;if(o(e)){t=[],S&&S.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(B(e[n]))}else if(O.indexOf(e.constructor)>=0)t=e;else{const n=a(e);for(var i in t=n===Object.prototype?{}:Object.create(n),S&&S.set(e,t),e)c(e,i)&&(t[i]=B(e[i]))}return t}const{toString:j}={};function k(e){return j.call(e).slice(8,-1)}const T="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof T?function(e){var t;return null!=e&&(t=e[T])&&t.apply(e)}:function(){return null},I={};function L(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===I&&"string"==typeof e)return[e];if(i=R(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const M="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var N="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U(e,t){N=e,q=t}var q=()=>!0;const K=!new Error("").stack;function H(){if(K)try{throw H.arguments,new Error}catch(e){return e}return new Error}function z(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(q).map((e=>"\n"+e)).join("")):""}var G=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],V=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(G),X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this._e=H(),this.name=e,this.message=t}function J(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function Y(e,t,n,r){this._e=H(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=J(e,t)}function W(e,t){this._e=H(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=J(e,t)}d($).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+z(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(Y).from($),d(W).from($);var Z=V.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Q=$;var ee=V.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=H(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=X[t]||n,this.inner=null)}return d(r).from(Q),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=G.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=V.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function re(){}function ie(e){return e}function oe(e,t){return null==e||e===ie?t:function(n){return t(e(n))}}function ue(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ae(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ue(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ue(i,this.onerror):i),void 0!==o?o:n}}function se(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ue(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ue(r,this.onerror):r)}}function ce(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);u(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ue(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ue(o,this.onerror):o),void 0===r?void 0===a?void 0:a:u(r,a)}}function le(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function fe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ne.ModifyError=Y,ne.DexieError=$,ne.BulkError=W;var he={};const de=100,[pe,ve,me]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,a(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,a(t),e]})(),ye=ve&&ve.then,be=pe&&pe.constructor,ge=!!me;var De=!1,we=me?()=>{me.then(ze)}:r.setImmediate?setImmediate.bind(null,ze):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{ze(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(ze,0)},Ee=function(e,t){Be.push([e,t]),_e&&(we(),_e=!1)},xe=!0,_e=!0,Ae=[],Ce=[],Fe=null,Oe=ie,Se={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{vt(e[0],e[1])}catch(e){}}))}},Pe=Se,Be=[],je=0,ke=[];function Te(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Pe;if(N&&(this._stackHolder=H(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==he)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Me(this,this._value))}this._state=null,this._value=null,++t.ref,Le(this,e)}const Re={get:function(){var e=Pe,t=et;function n(n,r){var i=!e.global&&(e!==Pe||t!==et);const o=i&&!it();var u=new Te(((t,u)=>{Ue(this,new Ie(ht(n,e,i,o),ht(r,e,i,o),t,u,e))}));return N&&He(u,this),u}return n.prototype=he,n},set:function(e){h(this,"then",e&&e.prototype===he?Re:{get:function(){return e},set:Re.set})}};function Ie(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Le(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ge();t&&"function"==typeof t.then?Le(e,((e,n)=>{t instanceof Te?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Ne(e)),n&&Ve()}}),Me.bind(null,e))}catch(t){Me(e,t)}}function Me(e,t){if(Ce.push(t),null===e._state){var n=e._lib&&Ge();t=Oe(t),e._state=!1,e._value=t,N&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=v(t,"stack");t._promise=e,h(t,"stack",{get:()=>De?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){Ae.some((t=>t._value===e._value))||Ae.push(e)}(e),Ne(e),n&&Ve()}}function Ne(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ue(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===je&&(++je,Ee((()=>{0==--je&&Xe()}),[]))}function Ue(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++je,Ee(qe,[n,e,t])}else e._listeners.push(t)}function qe(e,t,n){try{Fe=t;var r,i=t._value;t._state?r=e(i):(Ce.length&&(Ce=[]),r=e(i),-1===Ce.indexOf(i)&&function(e){for(var t=Ae.length;t;)if(Ae[--t]._value===e._value)return void Ae.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Fe=null,0==--je&&Xe(),--n.psd.ref||n.psd.finalize()}}function Ke(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,u=e._value;null!=u?(i=u.name||"Error",o=u.message||u,r=z(u,0)):(i=u,o=""),t.push(i+(o?": "+o:"")+r)}return N&&((r=z(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ke(e._prev,t,n)),t}function He(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function ze(){Ge()&&Ve()}function Ge(){var e=xe;return xe=!1,_e=!1,e}function Ve(){var e,t,n;do{for(;Be.length>0;)for(e=Be,Be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Be.length>0);xe=!0,_e=!0}function Xe(){var e=Ae;Ae=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=ke.slice(0),n=t.length;n;)t[--n]()}function $e(e){return new Te(he,!1,e)}function Je(e,t){var n=Pe;return function(){var r=Ge(),i=Pe;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(i,!1),r&&Ve()}}}l(Te.prototype,{then:Re,_then:function(e,t){Ue(this,new Ie(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):$e(e))):this.then(null,(e=>e&&e.name===t?n(e):$e(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),$e(t))))},stack:{get:function(){if(this._stack)return this._stack;try{De=!0;var e=Ke(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{De=!1}}},timeout:function(e,t){return e<1/0?new Te(((n,r)=>{var i=setTimeout((()=>r(new ee.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Se.env=ct(),l(Te,{all:function(){var e=L.apply(null,arguments).map(ot);return new Te((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,o)=>Te.resolve(i).then((n=>{e[o]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Te)return e;if(e&&"function"==typeof e.then)return new Te(((t,n)=>{e.then(t,n)}));var t=new Te(he,!0,e);return He(t,Fe),t},reject:$e,race:function(){var e=L.apply(null,arguments).map(ot);return new Te(((t,n)=>{e.map((e=>Te.resolve(e).then(t,n)))}))},PSD:{get:()=>Pe,set:e=>Pe=e},totalEchoes:{get:()=>et},newPSD:nt,usePSD:lt,scheduler:{get:()=>Ee,set:e=>{Ee=e}},rejectionMapper:{get:()=>Oe,set:e=>{Oe=e}},follow:(e,t)=>new Te(((n,r)=>nt(((t,n)=>{var r=Pe;r.unhandleds=[],r.onunhandled=n,r.finalize=ue((function(){!function(e){ke.push((function t(){e(),ke.splice(ke.indexOf(t),1)})),++je,Ee((()=>{0==--je&&Xe()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),be&&(be.allSettled&&h(Te,"allSettled",(function(){const e=L.apply(null,arguments).map(ot);return new Te((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>Te.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),be.any&&"undefined"!=typeof AggregateError&&h(Te,"any",(function(){const e=L.apply(null,arguments).map(ot);return new Te(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,o)=>Te.resolve(e).then((e=>t(e)),(e=>{i[o]=e,--r||n(new AggregateError(i))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var We=0,Ze=[],Qe=0,et=0,tt=0;function nt(e,t,n,r){var i=Pe,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++tt;var a=Se.env;o.env=ge?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject,nthen:dt(a.nthen,o),gthen:dt(a.gthen,o)}:{},t&&u(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=lt(o,e,n,r);return 0===o.ref&&o.finalize(),s}function rt(){return Ye.id||(Ye.id=++We),++Ye.awaits,Ye.echoes+=de,Ye.id}function it(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=Ye.awaits*de,!0)}function ot(e){return Ye.echoes&&e&&e.constructor===be?(rt(),e.then((e=>(it(),e)),(e=>(it(),mt(e))))):e}function ut(e){++et,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ze.push(Pe),st(e,!0)}function at(){var e=Ze[Ze.length-1];Ze.pop(),st(e,!1)}function st(e,t){var n=Pe;if((t?!Ye.echoes||Qe++&&e===Pe:!Qe||--Qe&&e===Pe)||ft(t?ut.bind(null,e):at),e!==Pe&&(Pe=e,n===Se&&(Se.env=ct()),ge)){var i=Se.env.Promise,o=e.env;ve.then=o.nthen,i.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",o.PromiseProp),i.all=o.all,i.race=o.race,i.resolve=o.resolve,i.reject=o.reject,o.allSettled&&(i.allSettled=o.allSettled),o.any&&(i.any=o.any))}}function ct(){var e=r.Promise;return ge?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ve.then,gthen:e.prototype.then}:{}}function lt(e,t,n,r,i){var o=Pe;try{return st(e,!0),t(n,r,i)}finally{st(o,!1)}}function ft(e){ye.call(pe,e)}function ht(e,t,n,r){return"function"!=typeof e?e:function(){var i=Pe;n&&rt(),st(t,!0);try{return e.apply(this,arguments)}finally{st(i,!1),r&&ft(it)}}}function dt(e,t){return function(n,r){return e.call(this,ht(n,t),ht(r,t))}}-1===(""+ye).indexOf("[native code]")&&(rt=it=re);const pt="unhandledrejection";function vt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var i,o={promise:t,reason:e};if(r.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(pt,!0,!0),u(i,o)):r.CustomEvent&&u(i=new CustomEvent(pt,{detail:o}),o),i&&r.dispatchEvent&&(dispatchEvent(i),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(i)}catch(e){}N&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}var mt=Te.reject;function yt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Pe.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>yt(e,t,n,r)))):mt(i)}return i._promise(t,((e,t)=>nt((()=>(Pe.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return mt(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return mt(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((()=>yt(e,t,n,r)))}const bt="3.2.4",gt=String.fromCharCode(65535),Dt=-1/0,wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Et="String expected.",xt=[],_t="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),At=_t,Ct=_t,Ft=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),Ot="__dbnames",St="readonly",Pt="readwrite";function Bt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const jt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function kt(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=P(t))[e],t)}class Tt{_trans(e,t,n){const r=this._tx||Pe.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const u=Ge();try{return r&&r.db===this.db?r===Pe.trans?r._promise(e,o,n):nt((()=>r._promise(e,o,n)),{trans:r,transless:Pe.transless||Pe}):yt(this.db,e,[this.name],o)}finally{u&&Ve()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==gt)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&N&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,u=this.db._deps.indexedDB;function a(e,t){try{return 0===u.cmp(e,t)}catch(e){return!1}}const[s,c]=t.reduce((([t,n],i)=>{const u=r[i],s=e[i];return[t||u,t||!u?Bt(n,u&&u.multi?e=>{const t=E(e,i);return o(t)&&t.some((e=>a(s,e)))}:e=>a(s,E(e,i))):n]}),[null,null]);return s?this.where(s.name).equals(e[s.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){u(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=kt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?Te.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{x(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||o(e))return this.where(":id").equals(e).modify(t);{const n=E(e,this.schema.primKey.keyPath);if(void 0===n)return mt(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?i(t).forEach((n=>{x(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=kt(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Te.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{x(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Te.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:jt}))).then((e=>e.numFailures?Te.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let a=o&&n?e.map(kt(o)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:a,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new W(`${this.name}.bulkAdd(): ${e} of ${u} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let a=o&&n?e.map(kt(o)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:a,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new W(`${this.name}.bulkPut(): ${e} of ${u} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new W(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Rt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var r=1,u=arguments.length;r<u;++r)a(arguments[r]);return n;function a(e,r,u){if("object"!=typeof e){var s;r||(r=le),u||(u=re);var c={subscribers:[],fire:u,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,u)}};return t[e]=n[e]=c,c}i(s=e).forEach((function(e){var t=s[e];if(o(t))a(e,s[e][0],s[e][1]);else{if("asap"!==t)throw new ee.InvalidArgument("Invalid event config");var n=a(e,ie,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){D((function(){e.apply(null,t)}))}))}))}}))}}function It(e,t){return d(t).from({prototype:e}),t}function Lt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Mt(e,t){e.filter=Bt(e.filter,t)}function Nt(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Bt(r(),t()):t,e.justLimit=n&&!r}function Ut(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function qt(e,t,n){const r=Ut(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Kt(e,t,n,r){const i=e.replayFilter?Bt(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},u=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var u=n.primaryKey,a=""+u;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(u)),c(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(u,n),Ht(qt(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}return Ht(qt(e,r,n),Bt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ht(e,t,n,r){var i=Je(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=re}),(t=>{e.fail(t),n=re}))||i(e.value,e,(e=>n=e)),n()}))}))}function zt(e,t){try{const n=Gt(e),r=Gt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Vt(e),Vt(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n){const r=zt(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Gt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=k(e);return"ArrayBuffer"===n?"binary":n}function Vt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Xt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,mt.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,mt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Bt(t.algorithm,e)}_iterate(e,t){return Kt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&u(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Kt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Lt(t,!0))return n.count({trans:e,query:{index:Ut(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Kt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var u="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-u:n>r?u:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Lt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Ut(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Kt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Lt(t)?Nt(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Nt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Nt(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Mt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Mt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Bt(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Lt(t,!0)&&t.limit>0)return this._read((e=>{var n=Ut(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Mt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var o=i(e),u=o.length;r=function(t){for(var n=!1,r=0;r<u;++r){var i=o[r],a=e[i];E(t,i)!==a&&(x(t,i,a),n=!0)}return n}}const a=t.table.core,{outbound:s,extractKey:c}=a.schema.primaryKey,l=this.db._options.modifyChunkSize||200,f=[];let h=0;const d=[],p=(e,t)=>{const{failures:n,numFailures:r}=t;h+=e-r;for(let e of i(n))f.push(n[e])};return this.clone().primaryKeys().then((i=>{const o=u=>{const f=Math.min(l,i.length-u);return a.getMany({trans:n,keys:i.slice(u,u+f),cache:"immutable"}).then((h=>{const d=[],v=[],m=s?[]:null,y=[];for(let e=0;e<f;++e){const t=h[e],n={value:P(t),primKey:i[u+e]};!1!==r.call(n,n.value,n)&&(null==n.value?y.push(i[u+e]):s||0===zt(c(t),c(n.value))?(v.push(n.value),s&&m.push(i[u+e])):(y.push(i[u+e]),d.push(n.value)))}const b=Lt(t)&&t.limit===1/0&&("function"!=typeof e||e===$t)&&{index:t.index,range:t.range};return Promise.resolve(d.length>0&&a.mutate({trans:n,type:"add",values:d}).then((e=>{for(let t in e.failures)y.splice(parseInt(t),1);p(d.length,e)}))).then((()=>(v.length>0||b&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:m,values:v,criteria:b,changeSpec:"function"!=typeof e&&e}).then((e=>p(v.length,e))))).then((()=>(y.length>0||b&&e===$t)&&a.mutate({trans:n,type:"delete",keys:y,criteria:b}).then((e=>p(y.length,e))))).then((()=>i.length>u+f&&o(u+l)))}))};return o(0).then((()=>{if(f.length>0)throw new Y("Error modifying one or more objects",f,h,d);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Lt(e)&&(e.isPrimKey&&!Ct||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((({failures:e,lastResult:n,results:r,numFailures:i})=>{if(i)throw new Y("Could not delete some values",Object.keys(e).map((t=>e[t])),t-i);return t-i}))))})):this.modify($t)}}const $t=(e,t)=>t.value=null;function Jt(e,t){return e<t?-1:e===t?0:1}function Yt(e,t){return e>t?-1:e===t?0:1}function Wt(e,t,n){var r=e instanceof rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Zt(e){return new e.Collection(e,(()=>nn(""))).limit(0)}function Qt(e,t,n,r,i,o){for(var u=Math.min(e.length,r.length),a=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[s],c)<0&&(a=s)}return u<r.length&&"next"===o?e+n.substr(e.length):u<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function en(e,t,n,r){var i,o,u,a,s,c,l,f=n.length;if(!n.every((e=>"string"==typeof e)))return Wt(e,Et);function h(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),o=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),u="next"===e?Jt:Yt;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return u(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(()=>tn(a[0],s[f-1]+r)));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,s,p))return!0;for(var d=null,v=p;v<f;++v){var m=Qt(i,h,a[v],s[v],u,c);null===m&&null===d?p=v+1:(null===d||u(d,m)>0)&&(d=m)}return n(null!==d?function(){e.continue(d+l)}:r),!1})),d}function tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nn(e){return{type:1,lower:e,upper:e}}class rn{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Zt(this):new this.Collection(this,(()=>tn(e,t,!n,!r)))}catch(e){return Wt(this,wt)}}equals(e){return null==e?Wt(this,wt):new this.Collection(this,(()=>nn(e)))}above(e){return null==e?Wt(this,wt):new this.Collection(this,(()=>tn(e,void 0,!0)))}aboveOrEqual(e){return null==e?Wt(this,wt):new this.Collection(this,(()=>tn(e,void 0,!1)))}below(e){return null==e?Wt(this,wt):new this.Collection(this,(()=>tn(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Wt(this,wt):new this.Collection(this,(()=>tn(void 0,e)))}startsWith(e){return"string"!=typeof e?Wt(this,Et):this.between(e,e+gt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):en(this,((e,t)=>0===e.indexOf(t[0])),[e],gt)}equalsIgnoreCase(e){return en(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=L.apply(I,arguments);return 0===e.length?Zt(this):en(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=L.apply(I,arguments);return 0===e.length?Zt(this):en(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,gt)}anyOf(){const e=L.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Wt(this,wt)}if(0===e.length)return Zt(this);const n=new this.Collection(this,(()=>tn(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,o)=>{const u=n.key;for(;t(u,e[r])>0;)if(++r,r===e.length)return i(o),!1;return 0===t(u,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[Dt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=L.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Wt(this,wt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[Dt,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,o=this._min,u=this._max;if(0===e.length)return Zt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const a=!t||!1!==t.includeLowers,s=t&&!0===t.includeUppers;let c,l=r;function f(e,t){return l(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=o(i[0],t[0]),i[1]=u(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),c.sort(f)}catch(e){return Wt(this,wt)}let h=0;const d=s?e=>r(e,c[h][1])>0:e=>r(e,c[h][1])>=0,p=a?e=>i(e,c[h][0])>0:e=>i(e,c[h][0])>=0;let v=d;const m=new this.Collection(this,(()=>tn(c[0][0],c[c.length-1][1],!a,!s)));return m._ondirectionchange=e=>{"next"===e?(v=d,l=r):(v=p,l=i),c.sort(f)},m._addAlgorithm(((e,t,n)=>{for(var i=e.key;v(i);)if(++h,h===c.length)return t(n),!1;return!!function(e){return!d(e)&&!p(e)}(i)||(0===this._cmp(i,c[h][1])||0===this._cmp(i,c[h][0])||t((()=>{l===r?e.continue(c[h][0]):e.continue(c[h][1])})),!1)})),m}startsWithAnyOf(){const e=L.apply(I,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Zt(this):this.inAnyRange(e.map((e=>[e,e+gt]))):Wt(this,"startsWithAnyOf() only works with strings")}}function on(e){return Je((function(t){return un(t),e(t.target.error),!1}))}function un(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const an="storagemutated",sn="x-storagemutated-1",cn=Rt(null,an);class ln{_lock(){return g(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this}_unlock(){if(g(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{lt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Pe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(g(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return g(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Je((t=>{un(t),this._reject(e.error)})),e.onabort=Je((t=>{un(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Je((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&cn.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return mt(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return mt(new ee.TransactionInactive);if(this._locked())return new Te(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},Pe])}));if(n)return nt((()=>{var e=new Te(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Te(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Te.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Te(((e,r)=>{n.then((n=>t._waitingQueue.push(Je(e.bind(null,n)))),(e=>t._waitingQueue.push(Je(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function fn(e,t,n,r,i,o,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+hn(t)}}function hn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function dn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:w(n,(e=>[e.name,e]))}}let pn=e=>{try{return e.only([[]]),pn=()=>[[]],[[]]}catch(e){return pn=()=>gt,gt}};function vn(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>E(t,e)}(e):t=>E(t,e)}function mn(e){return[].slice.call(e)}let yn=0;function bn(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function gn(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:o}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}const{schema:i,hasGetAll:u}=function(e,t){const n=mn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=o(t),i=null==t,u={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:vn(t)},indexes:mn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,a={name:t,compound:o(i),keyPath:i,unique:n,multiEntry:r,extractKey:vn(i)};return u[bn(i)]=a,a})),getIndexByKeyPath:e=>u[bn(e)]};return u[":id"]=a.primaryKey,null!=t&&(u[bn(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:i,values:o,range:u}){return new Promise(((a,s)=>{a=Je(a);const c=e.objectStore(t),l=null==c.keyPath,f="put"===n||"add"===n;if(!f&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:h}=i||o||{length:1};if(i&&o&&i.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const p=[],v=[];let m=0;const y=e=>{++m,un(e)};if("deleteRange"===n){if(4===u.type)return a({numFailures:m,failures:v,results:[],lastResult:void 0});3===u.type?p.push(d=c.clear()):p.push(d=c.delete(r(u)))}else{const[e,t]=f?l?[o,i]:[o,null]:[i,null];if(f)for(let r=0;r<h;++r)p.push(d=t&&void 0!==t[r]?c[n](e[r],t[r]):c[n](e[r])),d.onerror=y;else for(let t=0;t<h;++t)p.push(d=c[n](e[t])),d.onerror=y}const b=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(v[t]=e.error))),a({numFailures:m,failures:v,results:"delete"===n?i:p.map((e=>e.result)),lastResult:t})};d.onerror=e=>{y(e),b(e)},d.onsuccess=b}))},getMany:({trans:e,keys:n})=>new Promise(((r,i)=>{r=Je(r);const o=e.objectStore(t),u=n.length,a=new Array(u);let s,c=0,l=0;const f=e=>{const t=e.target;a[t._pos]=t.result,++l===c&&r(a)},h=on(i);for(let e=0;e<u;++e)null!=n[e]&&(s=o.get(n[e]),s._pos=e,s.onsuccess=f,s.onerror=h,++c);0===c&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,i)=>{r=Je(r);const o=e.objectStore(t).get(n);o.onsuccess=e=>r(e.target.result),o.onerror=on(i)})),query:function(e){return n=>new Promise(((i,o)=>{i=Je(i);const{trans:u,values:a,limit:s,query:c}=n,l=s===1/0?void 0:s,{index:f,range:h}=c,d=u.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),v=r(h);if(0===s)return i({result:[]});if(e){const e=a?p.getAll(v,l):p.getAllKeys(v,l);e.onsuccess=e=>i({result:e.target.result}),e.onerror=on(o)}else{let e=0;const t=a||!("openKeyCursor"in p)?p.openCursor(v):p.openKeyCursor(v),n=[];t.onsuccess=r=>{const o=t.result;return o?(n.push(a?o.value:o.primaryKey),++e===s?i({result:n}):void o.continue()):i({result:n})},t.onerror=on(o)}}))}(u),openCursor:function({trans:e,values:n,query:i,reverse:o,unique:u}){return new Promise(((a,s)=>{a=Je(a);const{index:c,range:l}=i,f=e.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),d=o?u?"prevunique":"prev":u?"nextunique":"next",p=n||!("openKeyCursor"in h)?h.openCursor(r(l),d):h.openKeyCursor(r(l),d);p.onerror=on(s),p.onsuccess=Je((t=>{const n=p.result;if(!n)return void a(null);n.___id=++yn,n.done=!1;const r=n.continue.bind(n);let i=n.continuePrimaryKey;i&&(i=i.bind(n));const o=n.advance.bind(n),u=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Je(s),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Je(e),p.onerror=on(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=u,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return p.onsuccess=Je((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=i,n.advance=o,a(),t},a(n)}),s)}))},count({query:e,trans:n}){const{index:i,range:o}=e;return new Promise(((e,u)=>{const a=n.objectStore(t),s=i.isPrimaryKey?a:a.index(i.name),c=r(o),l=c?s.count(c):s.count();l.onsuccess=Je((t=>e(t.target.result))),l.onerror=on(u)}))}}}(e))),s={};return a.forEach((e=>s[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!s[e])throw new Error(`Table '${e}' not found`);return s[e]},MIN_KEY:-1/0,MAX_KEY:pn(t),schema:i}}function Dn({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},i){const o=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(gn(t,n,i),e.dbcore);return{dbcore:o}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function wn({_novip:e},t,n,r){n.forEach((n=>{const i=r[n];t.forEach((t=>{const r=v(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get(){return this.table(n)},set(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function En({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function xn(e,t){return e._cfg.version-t._cfg.version}function _n(e,t,n,r){const o=e._dbSchema,u=e._createTransaction("readwrite",e._storeNames,o);u.create(n),u._completion.catch(r);const a=u._reject.bind(u),s=Pe.transless||Pe;nt((()=>{Pe.trans=u,Pe.transless=s,0===t?(i(o).forEach((e=>{Cn(n,e,o[e].primKey,o[e].indexes)})),Dn(e,n),Te.follow((()=>e.on.populate.fire(u))).catch(a)):function({_novip:e},t,n,r){const o=[],u=e._versions;let a=e._dbSchema=On(0,e.idbdb,r),s=!1;const c=u.filter((e=>e._cfg.version>=t));return c.forEach((u=>{o.push((()=>{const o=a,c=u._cfg.dbschema;Sn(e,o,r),Sn(e,c,r),a=e._dbSchema=c;const l=An(o,c);l.add.forEach((e=>{Cn(r,e[0],e[1].primKey,e[1].indexes)})),l.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>Fn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),Fn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const f=u._cfg.contentUpgrade;if(f&&u._cfg.version>t){Dn(e,r),n._memoizedTables={},s=!0;let t=_(c);l.del.forEach((e=>{t[e]=o[e]})),En(e,[e.Transaction.prototype]),wn(e,[e.Transaction.prototype],i(t),t),n.schema=t;const u=M(f);let a;u&&rt();const h=Te.follow((()=>{if(a=f(n),a&&u){var e=it.bind(null,null);a.then(e,e)}}));return a&&"function"==typeof a.then?Te.resolve(a):h.then((()=>a))}})),o.push((t=>{s&&At||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(u._cfg.dbschema,t),En(e,[e.Transaction.prototype]),wn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return o.length?Te.resolve(o.shift()(n.idbtrans)).then(e):Te.resolve()}().then((()=>{var e,t;t=r,i(e=a).forEach((n=>{t.db.objectStoreNames.contains(n)||Cn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,u,n).catch(a)}))}function An(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const e={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!_t)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=o.idxByName;let u;for(u in t)r[u]||e.del.push(u);for(u in r){const n=t[u],i=r[u];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,o])}return n}function Cn(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>Fn(i,e))),i}function Fn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,n){const r={};return y(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const o=fn(hn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),u=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);i=n.keyPath;var a=fn(n.name,i,!!n.unique,!!n.multiEntry,!1,i&&"string"!=typeof i,!1);u.push(a)}r[e]=dn(e,o,u)})),r}function Sn({_novip:e},t,n){const i=n.db.objectStoreNames;for(let r=0;r<i.length;++r){const o=i[r],u=n.objectStore(o);e._hasGetAll="getAll"in u;for(let e=0;e<u.indexNames.length;++e){const n=u.indexNames[e],r=u.index(n).keyPath,i="string"==typeof r?r:"["+y(r).join("+")+"]";if(t[o]){const e=t[o].idxByName[i];e&&(e.name=n,delete t[o].idxByName[i],t[o].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Pn{_parseStoresSpec(e,t){i(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return fn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)})),i=r.shift();if(i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=dn(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,e):e;const n=t._versions,r={};let o={};return n.forEach((e=>{u(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,En(t,[t._allTables,t,t.Transaction.prototype]),wn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this}upgrade(e){return this._cfg.contentUpgrade=fe(this._cfg.contentUpgrade||re,e),this}}function Bn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Qn(Ot,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function jn(e){return e&&"function"==typeof e.databases}function kn(e){return nt((function(){return Pe.letThrough=!0,e()}))}function Tn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Rn(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),u=i.value;return i.done?u:u&&"function"==typeof u.then?u.then(n,r):o(u)?Promise.all(u).then(n,r):n(u)}}return i(t)()}function In(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,C(i),n]}function Ln(e,t,n,r,i){return Te.resolve().then((()=>{const o=Pe.transless||Pe,u=e._createTransaction(t,n,e._dbSchema,r),a={trans:u,transless:o};if(r)u.idbtrans=r.idbtrans;else try{u.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Ln(e,t,n,null,i)))):mt(r)}const s=M(i);let c;s&&rt();const l=Te.follow((()=>{if(c=i.call(u,u),c)if(s){var e=it.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=Rn(c))}),a);return(c&&"function"==typeof c.then?Te.resolve(c).then((e=>u.active?e:mt(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):l.then((()=>c))).then((e=>(r&&u._resolve(),u._completion.then((()=>e))))).catch((e=>(u._reject(e),mt(e))))}))}function Mn(e,t,n){const r=o(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const Nn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function u(e,t,n){const r=bn(e),a=i[r]=i[r]||[],s=null==e?0:"string"==typeof e?1:e.length,c=t>0,l={...n,isVirtual:c,keyTail:t,keyLength:s,extractKey:vn(e),unique:!c&&n.unique};return a.push(l),l.isPrimaryKey||o.push(l),s>1&&u(2===s?e[0]:e.slice(0,s-1),t+1,n),a.sort(((e,t)=>e.keyTail-t.keyTail)),l}const a=u(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const e of r.indexes)u(e.keyPath,0,e);function s(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Mn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Mn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const c={...n,schema:{...r,primaryKey:a,indexes:o,getIndexByKeyPath:function(e){const t=i[bn(e)];return t&&t[0]}},count:e=>n.count(s(e)),query:e=>n.query(s(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:o}=t.query.index;return i?n.openCursor(s(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Mn(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Mn(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return c}}}};function Un(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((i=>{if(c(t,i)){var o=e[i],u=t[i];if("object"==typeof o&&"object"==typeof u&&o&&u){const e=k(o);e!==k(u)?n[r+i]=t[i]:"Object"===e?Un(o,u,n,r+i+"."):o!==u&&(n[r+i]=t[i])}else o!==u&&(n[r+i]=t[i])}else n[r+i]=void 0})),i(t).forEach((i=>{c(e,i)||(n[r+i]=t[i])})),n}const qn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=Pe.trans,{deleting:o,creating:u,updating:a}=i.table(t).hook;switch(e.type){case"add":if(u.fire===re)break;return i._promise("readwrite",(()=>s(e)),!0);case"put":if(u.fire===re&&a.fire===re)break;return i._promise("readwrite",(()=>s(e)),!0);case"delete":if(o.fire===re)break;return i._promise("readwrite",(()=>s(e)),!0);case"deleteRange":if(o.fire===re)break;return i._promise("readwrite",(()=>function(e){return l(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function s(e){const t=Pe.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((s=>{const l=i.map(((n,i)=>{const l=s[i],f={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(f,n,l,t);else if("add"===e.type||void 0===l){const o=u.fire.call(f,n,e.values[i],t);null==n&&null!=o&&(n=o,e.keys[i]=n,r.outbound||x(e.values[i],r.keyPath,n))}else{const r=Un(l,e.values[i]),o=a.fire.call(f,r,n,l,t);if(o){const t=e.values[i];Object.keys(o).forEach((e=>{c(t,e)?t[e]=o[e]:x(t,e,o[e])}))}}return f}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:o})=>{for(let r=0;r<i.length;++r){const o=n?n[r]:i[r],u=l[r];null==o?u.onerror&&u.onerror(t[r]):u.onsuccess&&u.onsuccess("put"===e.type&&s[r]?e.values[r]:o)}return{failures:t,results:n,numFailures:r,lastResult:o}})).catch((e=>(l.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function l(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((({result:n})=>s({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<i?{failures:[],numFailures:0,lastResult:void 0}:l(e,{...t,lower:n[n.length-1],lowerOpen:!0},i)))))}}};return i}})};function Kn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)0===zt(t.keys[i],e[o])&&(r.push(n?P(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}const Hn={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Kn(e.keys,e.trans._cache,"clone"===e.cache);return t?Te.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function zn(e){return!("from"in e)}const Gn=function(e,t){if(!this){const t=new Gn;return e&&"d"in e&&u(t,e),t}u(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Vn(e,t,n){const r=zt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(zn(e))return u(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(zt(n,e.from)<0)return i?Vn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Yn(e);if(zt(t,e.to)>0)return o?Vn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Yn(e);zt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),zt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Xn(e,i),o&&a&&Xn(e,o)}function Xn(e,t){zn(t)||function e(t,{from:n,to:r,l:i,r:o}){Vn(t,n,r),i&&e(t,i),o&&e(t,o)}(e,t)}function $n(e,t){const n=Jn(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=Jn(e);let u=o.next(i.from),a=u.value;for(;!r.done&&!u.done;){if(zt(a.from,i.to)<=0&&zt(a.to,i.from)>=0)return!0;zt(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(u=o.next(i.from)).value}return!1}function Jn(e){let t=zn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&zt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||zt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Yn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=Wn(n)}e.d=Wn(e)}function Wn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}l(Gn.prototype,{add(e){return Xn(this,e),this},addKey(e){return Vn(this,e,e),this},addKeys(e){return e.forEach((e=>Vn(this,e,e))),this},[T](){return Jn(this)}});const Zn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Gn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const u=e.table(r),{schema:a}=u,{primaryKey:s}=a,{extractKey:c,outbound:l}=s,f={...u,mutate:e=>{const i=e.trans,s=i.mutatedParts||(i.mutatedParts={}),c=e=>{const n=`idb://${t}/${r}/${e}`;return s[n]||(s[n]=new Gn)},l=c(""),f=c(":dels"),{type:h}=e;let[d,p]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const v=e.trans._cache;return u.mutate(e).then((e=>{if(o(d)){"delete"!==h&&(d=e.results),l.addKeys(d);const t=Kn(d,v);t||"add"===h||f.addKeys(d),(t||p)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function u(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&o(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&u(n[t]),o=r&&u(r[t]);0!==zt(i,o)&&(null!=i&&a(i),null!=o&&a(o))}))}))}(c,a,t,p)}else if(d){const e={from:d.lower,to:d.upper};f.add(e),l.add(e)}else l.add(n),f.add(n),a.indexes.forEach((e=>c(e.name).add(n)));return e}))}},h=({query:{index:t,range:n}})=>{var r,i;return[t,new Gn(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(i=n.upper)&&void 0!==i?i:e.MAX_KEY)]},d={get:e=>[s,new Gn(e.key)],getMany:e=>[s,(new Gn).addKeys(e.keys)],count:h,query:h,openCursor:h};return i(d).forEach((e=>{f[e]=function(i){const{subscr:o}=Pe;if(o){const a=e=>{const n=`idb://${t}/${r}/${e}`;return o[n]||(o[n]=new Gn)},s=a(""),f=a(":dels"),[h,p]=d[e](i);if(a(h.name||"").add(p),!h.isPrimaryKey){if("count"!==e){const t="query"===e&&l&&i.values&&u.query({...i,values:!1});return u[e].apply(this,arguments).then((n=>{if("query"===e){if(l&&i.values)return t.then((({result:e})=>(s.addKeys(e),n)));const e=i.values?n.result.map(c):n.result;i.values?s.addKeys(e):f.addKeys(e)}else if("openCursor"===e){const e=n,t=i.values;return e&&Object.create(e,{key:{get:()=>(f.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return f.addKey(t),t}},value:{get:()=>(t&&s.addKey(e.primaryKey),e.value)}})}return n}))}f.add(n)}}return u[e].apply(this,arguments)}})),f}}}};class Qn{constructor(e,t){this._middlewares={},this.verno=0;const n=Qn.dependencies;this._options=t={addons:Qn.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new Te((e=>{i.dbReadyResolve=e})),i.openCanceller=new Te(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=Rt(this,"populate","blocked","versionchange","close",{ready:[fe,re]}),this.on.ready.subscribe=b(this.on.ready.subscribe,(e=>(t,n)=>{Qn.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Te.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(o=this,It(Xt.prototype,(function(e,t){this.db=o;let n=jt,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,u=i.table,a=u.hook.reading.fire;this._ctx={table:u,index:i.index,isPrimKey:!i.index||u.schema.primKey.keyPath&&i.index===u.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==ie?a:null}}))),this.Table=function(e){return It(Tt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Rt(null,{creating:[ae,re],reading:[oe,ie],updating:[ce,re],deleting:[se,re]})}))}(this),this.Transaction=function(e){return It(ln.prototype,(function(t,n,r,i,o){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Rt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),mt(e)}))}))}(this),this.Version=function(e){return It(Pn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return It(rn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new ee.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=pn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),xt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Nn),this.use(qn),this.use(Zn),this.use(Hn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(xn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new Te(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==n?10:n,name:r}),i.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?mt(t.dbOpenError):e));N&&(t.openCanceller._stackHolder=H()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function o(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let u=t.dbReadyResolve,a=null,s=!1;return Te.race([r,("undefined"==typeof navigator?Te.resolve():Tn()).then((()=>new Te(((r,u)=>{if(o(),!n)throw new ee.MissingAPI;const c=e.name,l=t.autoSchema?n.open(c):n.open(c,Math.round(10*e.verno));if(!l)throw new ee.MissingAPI;l.onerror=on(u),l.onblocked=Je(e._fireOnBlocked),l.onupgradeneeded=Je((r=>{if(a=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=un,a.abort(),l.result.close();const e=n.deleteDatabase(c);e.onsuccess=e.onerror=Je((()=>{u(new ee.NoSuchDatabase(`Database ${c} doesnt exist`))}))}else{a.onerror=on(u);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=i<1,e._novip.idbdb=l.result,_n(e,i/10,a,u)}}),u),l.onsuccess=Je((()=>{a=null;const n=e._novip.idbdb=l.result,o=y(n.objectStoreNames);if(o.length>0)try{const r=n.transaction(1===(u=o).length?u[0]:u,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=On(0,t,n);e._storeNames=y(t.objectStoreNames,0),wn(e,[e._allTables],i(r),r)}(e,n,r):(Sn(e,e._dbSchema,r),function(e,t){const n=An(On(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Dn(e,r)}catch(e){}var u;xt.push(e),n.onversionchange=Je((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Je((t=>{e.on("close").fire(t)})),s&&function({indexedDB:e,IDBKeyRange:t},n){!jn(e)&&n!==Ot&&Bn(e,t).put({name:n}).catch(re)}(e._deps,c),r()}),u)}))))]).then((()=>(o(),t.onReadyBeingFired=[],Te.resolve(kn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(fe,re);return t.onReadyBeingFired=[],Te.resolve(kn((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),mt(n)})).finally((()=>{t.openComplete=!0,u()}))}(this)}_close(){const e=this._state,t=xt.indexOf(this);if(t>=0&&xt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Te((t=>{e.dbReadyResolve=t})),e.openCanceller=new Te(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Te(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Je((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!jn(e)&&n!==Ot&&Bn(e,t).delete(n).catch(re)}(this._deps,this.name),n()})),e.onerror=on(r),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return i(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=In.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Pe.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let o,u;e=e.replace("!","").replace("?","");try{if(u=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===St)o=St;else{if("rw"!=e&&e!=Pt)throw new ee.InvalidArgument("Invalid transaction mode: "+e);o=Pt}if(r){if(r.mode===St&&o===Pt){if(!i)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&u.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):mt(e)}const a=Ln.bind(null,this,o,u,r,n);return r?r._promise(o,a,"lock"):Pe.trans?lt(Pe.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!c(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const er="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class tr{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[er](){return this}}function nr(e,t){return i(t).forEach((n=>{Xn(e[n]||(e[n]=new Gn),t[n])})),e}function rr(e){let t,n=!1;const r=new tr((r=>{const o=M(e);let u=!1,a={},s={};const c={get closed(){return u},unsubscribe:()=>{u=!0,cn.storagemutated.unsubscribe(d)}};r.start&&r.start(c);let l=!1,f=!1;function h(){return i(s).some((e=>a[e]&&$n(a[e],s[e])))}const d=e=>{nr(a,e),h()&&p()},p=()=>{if(l||u)return;a={};const i={},v=function(t){o&&rt();const n=()=>nt(e,{subscr:t,trans:null}),r=Pe.trans?lt(Pe.transless,n):n();return o&&r.then(it,it),r}(i);f||(cn(an,d),f=!0),l=!0,Promise.resolve(v).then((e=>{n=!0,t=e,l=!1,u||(h()?p():(a={},s=i,r.next&&r.next(e)))}),(e=>{l=!1,n=!1,r.error&&r.error(e),c.unsubscribe()}))};return p(),c}));return r.hasValue=()=>n,r.getValue=()=>t,r}let ir;try{ir={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){ir={indexedDB:null,IDBKeyRange:null}}const or=Qn;function ur(e){let t=ar;try{ar=!0,cn.storagemutated.fire(e)}finally{ar=t}}l(or,{...ne,delete:e=>new or(e,{addons:[]}).delete(),exists:e=>new or(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return jn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>e!==Ot)))):Bn(e,t).toCollection().primaryKeys()}(or.dependencies).then(e)}catch(e){return mt(new ee.MissingAPI)}},defineClass:()=>function(e){u(this,e)},ignoreTransaction:e=>Pe.trans?lt(Pe.transless,e):e(),vip:kn,async:function(e){return function(){try{var t=Rn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Te.resolve(t)}catch(e){return mt(e)}}},spawn:function(e,t,n){try{var r=Rn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Te.resolve(r)}catch(e){return mt(e)}},currentTransaction:{get:()=>Pe.trans||null},waitFor:function(e,t){const n=Te.resolve("function"==typeof e?or.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(n):n},Promise:Te,debug:{get:()=>N,set:e=>{U(e,"dexie"===e?()=>!0:Ft)}},derive:d,extend:u,props:l,override:b,Events:Rt,on:cn,liveQuery:rr,extendObservabilitySet:nr,getByKeyPath:E,setByKeyPath:x,delByKeyPath:function(e,t){"string"==typeof t?x(e,t,void 0):"length"in t&&[].map.call(t,(function(t){x(e,t,void 0)}))},shallowClone:_,deepClone:P,getObjectDiff:Un,cmp:zt,asap:D,minKey:Dt,addons:[],connections:xt,errnames:Z,dependencies:ir,semVer:bt,version:bt.split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),or.maxKey=pn(or.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(cn(an,(e=>{if(!ar){let t;_t?(t=document.createEvent("CustomEvent"),t.initCustomEvent(sn,!0,!0,e)):t=new CustomEvent(sn,{detail:e}),ar=!0,dispatchEvent(t),ar=!1}})),addEventListener(sn,(({detail:e})=>{ar||ur(e)})));let ar=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel(sn);"function"==typeof e.unref&&e.unref(),cn(an,(t=>{ar||e.postMessage(t)})),e.onmessage=e=>{e.data&&ur(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){cn(an,(e=>{try{ar||("undefined"!=typeof localStorage&&localStorage.setItem(sn,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:sn,changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if(e.key===sn){const t=JSON.parse(e.newValue);t&&ur(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&e.type===sn&&ur(e.changedParts)}))}Te.rejectionMapper=function(e,t){if(!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n},U(N,Ft)},97582:(e,t,n)=>{"use strict";n.d(t,{CR:()=>s,FC:()=>f,Jh:()=>u,KL:()=>h,XA:()=>a,ZT:()=>i,ev:()=>c,mG:()=>o,qq:()=>l});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){u.label=a[1];break}if(6===a[0]&&u.label<i[1]){u.label=i[1],i=a;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(a);break}i[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u}function c(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function l(e){return this instanceof l?(this.v=e,this):new l(e)}function f(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof l?Promise.resolve(n.value.v).then(s,c):f(o[0][2],n)}catch(e){f(o[0][3],e)}var n}function s(e){a("next",e)}function c(e){a("throw",e)}function f(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function h(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=a(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError},62811:e=>{"use strict";e.exports=JSON.parse('{"name":"openai","version":"3.3.0","description":"Node.js library for the OpenAI API","repository":{"type":"git","url":"git@github.com:openai/openai-node.git"},"keywords":["openai","open","ai","gpt-3","gpt3"],"author":"OpenAI","license":"MIT","main":"./dist/index.js","types":"./dist/index.d.ts","scripts":{"build":"tsc --outDir dist/"},"dependencies":{"axios":"^0.26.0","form-data":"^4.0.0"},"devDependencies":{"@types/node":"^12.11.5","typescript":"^3.6.4"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9141),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1545),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(32817),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(40052),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(80230),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(72107),_chat_conversationDb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4671),_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23229);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,u=Object.create(o.prototype),a=new P(r||[]);return i(u,"_invoke",{value:C(e,n,a)}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function y(){}function b(){}function g(){}var D={};c(D,u,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(B([])));E&&E!==n&&r.call(E,u)&&(D=E);var x=g.prototype=y.prototype=Object.create(D);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,u,a){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==_typeof(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(l).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=h;return function(o,u){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw u;return{value:e,done:!0}}for(r.method=o,r.arg=u;;){var a=r.delegate;if(a){var s=F(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function F(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,F(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var u=o.arg;return u?u.done?(n[t.resultName]=u.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):u:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return b.prototype=g,i(x,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new A(l(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},_(x),c(x,s,"Generator"),c(x,u,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function asyncGeneratorStep(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(e){return void n(e)}a.done?t(s):Promise.resolve(s).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){asyncGeneratorStep(o,r,i,u,a,"next",e)}function a(e){asyncGeneratorStep(o,r,i,u,a,"throw",e)}u(void 0)}))}}var db=new _chat_conversationDb__WEBPACK_IMPORTED_MODULE_0__.Au;function coerceInputOrReturn(e){return(0,rxjs__WEBPACK_IMPORTED_MODULE_2__.b)(e)?e:void 0===e?rxjs__WEBPACK_IMPORTED_MODULE_3__.E:"string"==typeof e?(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(e):(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.D)(e)}function buildFunction(e,t){return _buildFunction.apply(this,arguments)}function _buildFunction(){return(_buildFunction=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,i,o,u,a,s,c;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db.getMessageByHash(t);case 2:if(r=e.sent){e.next=5;break}throw new Error('Function message with hash "'.concat(t,'" not found.'));case 5:if((0,_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.ng)(r)){e.next=7;break}throw new Error('Message with hash "'.concat(t,'" is not a function message.'));case 7:if(i=(0,_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.TZ)(r.content)){e.next=10;break}throw new Error("Invalid function message content");case 10:if((0,_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.MM)(i)){e.next=12;break}throw new Error("Function message must be an invocation of generate_dynamic_function or compose_dynamic_functions.");case 12:return e.next=14,db.getFunctionDependenciesByHash(r.hash);case 14:return o=e.sent,u=o.filter((function(e){return!n.includes(e.dependencyName)})),e.next=18,Promise.all(u.map((function(e){return buildFunction(e.dependencyName,n).then((function(t){return'"'.concat(e.dependencyName,'": (').concat(t,")(utils),")}))})));case 18:return a=e.sent,s="{\n".concat(a.join("\n"),"\n}"),c="generate_dynamic_function"===i.name?i.parameters.functionBody:(0,_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.r$)(i.parameters.functionHashes),e.abrupt("return","\n    (utils) => (input) => {\n      const { RxJS } = utils;\n      utils = { RxJS, allStaticDependencies: utils.allStaticDependencies };\n\n      const dependencies = {...utils.allStaticDependencies, ...".concat(s,"};\n      input = coerceInputOrReturn(input);\n      {\n        const utils = undefined;\n        const returnVal = (() => {\n          ").concat(c,"\n        })();\n        const coercedReturn = coerceInputOrReturn(returnVal);\n        return coercedReturn;\n      }\n    }\n  "));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function customJsonpRunner(e,t){if("string"!=typeof t)throw new Error("URL must be a string");return new Promise((function(e,n){var r="jsonp_callback_"+Math.round(1e5*Math.random());self[r]=function(t){delete self[r];var n=JSON.stringify(t.data);e(n)};var i=t+(t.indexOf("?")>=0?"&":"?")+"callback="+r;importScripts(i)}))}self.addEventListener("message",function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(event){var data,functionHash,input,allowedFunctionSpecs,allStaticDependencies,allStaticDependenciesNames,builtFunctionString,builtFunction,results;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!event.data.SET_API_KEY){_context.next=3;break}return self.localStorage={getItem:function(){return event.data.SET_API_KEY}},_context.abrupt("return");case 3:return data=event.data,functionHash=data.functionHash,input=data.input,allowedFunctionSpecs=_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.YT.filter((function(e){return!_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.ck.includes(e.name)})),allStaticDependencies=allowedFunctionSpecs.reduce((function(e,t){var n=t.parameters.filter((function(e){return e.required})).length,r=t.parameters.length;return e[t.name]=function(e){return new rxjs__WEBPACK_IMPORTED_MODULE_6__.y((function(i){var o;try{o=(0,_chat_functionCalling__WEBPACK_IMPORTED_MODULE_1__.hp)(e,t)}catch(e){return void i.error(e)}if(o.length<n)i.error("Function ".concat(t.name," requires at least ").concat(n," parameters."));else{if(!(o.length>r)){var u=coerceInputOrReturn(("jsonp_data_retrevial"===t.name?customJsonpRunner:t.implementation).apply(void 0,[{db}].concat(_toConsumableArray(o)))).subscribe({next:function(e){i.next(e)},error:function(e){return i.error(e)},complete:function(){return i.complete()}});return function(){return u.unsubscribe()}}i.error("Function ".concat(t.name," accepts at most ").concat(r," parameters."))}}))},e}),{}),allStaticDependenciesNames=Object.keys(allStaticDependencies),_context.prev=8,_context.next=11,buildFunction(functionHash,allStaticDependenciesNames);case 11:builtFunctionString=_context.sent,builtFunction=eval(builtFunctionString),results=builtFunction({RxJS:rxjs__WEBPACK_IMPORTED_MODULE_7__,allStaticDependencies})(input),results.subscribe({next:function(e){var t={status:"incomplete",content:e};self.postMessage(t)},complete:function(){self.postMessage({status:"complete"})}}),_context.next=20;break;case 17:_context.prev=17,_context.t0=_context.catch(8),_context.t0 instanceof Error?(console.error("Error caught in dynamicFunctions.worker!",_context.t0),self.postMessage({status:"error",error:"An error occurred while invoking the function. The function likely has a coding error and needs to be regenerated: "+_context.t0.message})):self.postMessage({status:"error",error:"An unknown error occurred: "+JSON.stringify(_context.t0)});case 20:return _context.abrupt("return",[]);case 21:case"end":return _context.stop()}}),_callee,null,[[8,17]])})));return function(e){return _ref.apply(this,arguments)}}())})()})();